{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////node_modules/clipboard/lib/clipboard-action.js","webpack:////node_modules/select/src/select.js","webpack:////node_modules/tiny-emitter/index.js","webpack:////node_modules/good-listener/src/listen.js","webpack:////node_modules/good-listener/src/is.js","webpack:////node_modules/delegate/src/delegate.js","webpack:////node_modules/delegate/src/closest.js","webpack:////app/assets/webpack/node_modules/debounce/index.js","webpack:////node_modules/player.js/dist/player-0.0.11.js","webpack:////app/assets/webpack/player/utils.js","webpack:////app/assets/webpack/player/PlayerDOM.js","webpack:////app/assets/webpack/player/Waveform.js","webpack:////app/assets/webpack/player/playerReceiver.js","webpack:////app/assets/webpack/player/Player.js","webpack:////app/assets/webpack/player/index.js","webpack:////node_modules/howler/dist/howler.js","webpack:///(webpack)/buildin/global.js","webpack:////node_modules/clipboard/lib/clipboard.js","webpack:////node_modules/svg.js/dist/svg.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_select","_select2","_interopRequireDefault","obj","default","_typeof","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","ClipboardAction","options","this","resolveOptions","initSelection","arguments","undefined","action","emitter","text","trigger","selectedText","selectFake","selectTarget","_this","isRTL","document","documentElement","getAttribute","removeFake","fakeHandlerCallback","fakeHandler","body","addEventListener","fakeElem","createElement","style","fontSize","border","padding","margin","position","yPosition","window","pageYOffset","scrollTop","top","setAttribute","appendChild","copyText","removeEventListener","removeChild","succeeded","execCommand","err","handleResult","emit","clearSelection","blur","getSelection","removeAllRanges","set","_action","Error","nodeType","hasAttribute","_target","element","nodeName","focus","isReadOnly","select","setSelectionRange","removeAttribute","selection","range","createRange","selectNodeContents","addRange","toString","E","on","callback","ctx","e","push","fn","once","self","listener","off","apply","_","data","slice","evtArr","len","evts","liveEvents","is","delegate","type","string","node","destroy","listenNode","nodeList","Array","forEach","listenNodeList","selector","listenSelector","HTMLElement","String","closest","_delegate","useCapture","listenerFn","delegateTarget","elements","querySelectorAll","map","Element","matches","proto","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","parentNode","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","now","setTimeout","debounced","callNow","clear","clearTimeout","playerjs","createPrototypeFunction","method","test","assert","unshift","send","DEBUG","VERSION","CONTEXT","POST_MESSAGE","postMessage","origin","url","substr","location","protocol","split","join","addEvent","elem","eventHandle","attachEvent","log","history","console","isString","isObject","isArray","isNone","has","indexOf","array","item","IndexOf","msg","Keeper","init","getUUID","replace","Math","random","event","id","events","add","cb","one","execute","keep","listeners","Player","EVENTS","READY","PLAY","PAUSE","ENDED","TIMEUPDATE","PROGRESS","ERROR","all","METHODS","GETPAUSED","MUTE","UNMUTE","GETMUTED","SETVOLUME","GETVOLUME","GETDURATION","SETCURRENTTIME","GETCURRENTTIME","SETLOOP","GETLOOP","REMOVEEVENTLISTENER","ADDEVENTLISTENER","READIED","getElementById","src","keeper","isReady","queue","methods","receive","loaded","onload","version","contentWindow","JSON","stringify","parse","ready","supports","evtOrMethod","names","methodName","Receiver","referrer","supported","eventListeners","reject","code","index","splice","val","parent","HTML5Adapter","video","receiver","seconds","currentTime","duration","percent","buffered","play","pause","paused","volume","muted","loop","JWPlayerAdapter","player","looped","onPause","onPlay","onTime","onComplete","seek","onError","getState","getPosition","getDuration","getVolume","setVolume","setMute","getMute","MockAdapter","interval","timeupdate","mute","playing","setInterval","clearInterval","SublimeAdapter","playbackTime","seekTo","VideoJSAdapter","playerEvent","ga","hitType","eventCategory","eventAction","initializeEventListeners","playBtn","progressLock","caddy","pageX","waveformRect","waveform","getBoundingClientRect","waveformWidth","width","offsetX","left","setScrubberWidth","round","renderTime","subscribeToggle","subscriptionsTab","classList","sharingTab","remove","cookieTab","overlay","toggle","offsetParent","contains","setSubscribeText","shareToggle","cookieToggle","setShareText","setCookieText","embedBtn","PlayerDOM","hideBranding","timer","progress","scrubber","controls","episodeInfo","loader","logo","num","innerHTML","percentage","toFixed","currentPercentage","bool","secs","roundedSeconds","currentSeconds","hours","floor","minutes","formatTime","seekPos","setProgress","arcDiam","Waveform","isLightPlayer","isTilePlayer","waveformNode","progressNode","arcDir","centerLine","waveformStrokeColor","progressStrokeColor","randomizeWaveform","defaultData","debounce","redraw","offsetWidth","height","offsetHeight","drawLine","drawWave","wform","SVG","size","rect","attr","fill","stroke","viewbox","bbox","prog","sampledData","factor","ctr","sumA","sumB","sampled","a","b","sampleData","buildPath","path","draw","maxWave","max","minWave","min","scaleFactor","abs","arcPath","point","container","getElementsByClassName","errContainer","msgContainer","createTextNode","copyrightContainer","copyright","insertBefore","firstChild","parseQueryParameters","queryString","search","disableSharing","startTime","match","episode","sound","Howl","mediaUrl","html5","preload","onplay","requestAnimationFrame","step","DOM","setPlaying","_duration","setLoading","onend","looping","onpause","Clipboard","renderAudioPosition","vol","time","shouldLoop","toggleLoop","state","shouldMute","newSeekPos","HowlerGlobal","Howler","_counter","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","navigator","masterGain","noAudio","usingWebAudio","autoSuspend","mobileAutoEnable","_setup","parseFloat","setupAudioContext","gain","_webAudio","ids","_getSoundIds","j","_soundById","_node","unload","close","codecs","ext","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","canPlayType","mpegTest","checkOpera","userAgent","isOldOpera","parseInt","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","mp4","weba","webm","dolby","flac","_enableMobileAudio","isMobile","isTouch","maxTouchPoints","msMaxTouchPoints","_mobileEnabled","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","_autoResume","source","createBufferSource","buffer","connect","destination","start","noteOn","resume","onended","disconnect","suspend","_sounds","_paused","_suspendTimer","then","_resumeAfterSuspend","_emit","error","_autoplay","autoplay","_format","format","_html5","_loop","_pool","pool","_preload","_rate","rate","_sprite","sprite","_src","_state","_endTimers","_queue","_onend","_onfade","onfade","_onload","_onloaderror","onloaderror","_onpause","_onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onresume","load","str","exec","toLowerCase","warn","Sound","loadBuffer","internal","_ended","_id","_inactiveSound","soundId","_seek","_start","_stop","playWebAudio","_refreshBuffer","setValueAtTime","_playStart","bufferSource","noteGrainOn","Infinity","isRunning","_clearTimer","playHtml5","playbackRate","loadedNoReadyState","ejecta","readyState","isCocoonJS","_rateSeek","_stopFade","stop","noteOff","_cleanBuffer","isNaN","fade","from","to","diff","dir","steps","stepLen","ceil","end","linearRampToValueAtTime","_interval","cancelScheduledValues","loopStart","loopEnd","realTime","rateSeek","sounds","_errorFn","_loadFn","remCache","cache","isId","keys","_loadQueue","task","shift","ended","_drain","reset","limit","cnt","_panner","howl","_parent","createGain","createGainNode","_errorListener","_loadListener","__default","loadSound","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","xhr","XMLHttpRequest","open","responseType","status","response","onerror","safeXhrSend","arraybuffer","AudioContext","webkitAudioContext","iOS","platform","appVersion","safari","standalone","global","_super","_pos","_orientation","stereo","pan","pos","x","y","z","setPosition","orientation","xUp","yUp","zUp","or","setOrientation","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_panningModel","_refDistance","_rolloffFactor","pa","panner","createPanner","g","Function","_clipboardAction","_tinyEmitter","_goodListener","_clipboardAction2","_tinyEmitter2","_goodListener2","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","__proto__","_Emitter","getPrototypeOf","listenClick","defaultAction","defaultTarget","defaultText","_this2","onClick","currentTarget","clipboardAction","getAttributeValue","querySelector","actions","support","queryCommandSupported","suffix","attribute","root","Doc","parser","prepare","xmlns","xlink","svgjs","createElementNS","createSVGRect","did","eid","capitalize","extend","pop","Set","inherit","invent","config","initializer","construct","Container","adopt","SVGElement","Nested","Gradient","namespace","defs","setData","getElementsByTagName","nested","poly","polyline","native","regex","numberAndUnit","hex","rgb","reference","transforms","whitespace","isHex","isRgb","isCss","isBlank","isNumber","isPercent","isImage","delimiter","hyphen","pathLetters","isPathLetter","numbersWithDots","dots","utils","block","il","filter","radians","PI","degrees","filterSVGElements","nodes","el","defaults","attrs","opacity","cx","cy","rx","ry","offset","Color","color","fullHex","toHex","compToHex","toRgb","brightness","morph","at","isColor","fallback","valueOf","lastValue","lastDestination","settle","seen","trim","reverse","clone","array_clone","PointArray","toLine","x1","y1","x2","y2","points","move","box","getBBox","pathHandlers","M","p0","L","H","V","C","S","Q","T","Z","A","mlhvqtcsa","jl","toUpperCase","PathArray","arrayToString","equalCommands","pathArray","sourceArray","destinationArray","paramCnt","pathRegReplace","reduce","prev","curr","concat","arr","Point","Number","unit","isFinite","toJSON","plus","number","minus","times","divide","relative","_stroke","_event","dom","center","proportionalSize","withData","writeDataToDom","assignNewId","cloneNode","after","removeElement","addTo","put","putIn","inside","show","hide","visible","classes","hasClass","addClass","removeClass","toggleClass","doc","parents","svg","well","Parent","childNodes","each","lines","easing","cos","sin","MorphObj","Situation","reversed","reversing","delay","finish","ease","loops","animations","styles","FX","situations","active","situation","lastPos","absPos","_speed","animate","timeToAbsPos","absPosToTime","startAnimFrame","stopAnimFrame","animationFrame","cancelAnimationFrame","startCurrent","initAnimations","dequeue","initialTransformation","matrixify","clearQueue","clearCurrent","jumpToEnd","atEnd","temp","atStart","isAbsPos","durDivSpd","speed","easeIt","wrapper","detail","_callStart","during","eased","afterAll","duringAll","ignoreTime","absPosInt","lastLoop","Boolean","fire","fx","eachAt","Matrix","multiply","undo","extract","matrix","isEased","real","v","G","transform","Text","plot","leading","ViewBox","update","Stop","Box","fullBox","merge","xMin","xMax","yMin","yMax","BBox","Exception","topParent","Shape","clientLeft","clientTop","clientWidth","clientHeight","tbox","rbox","RBox","addOffset","pageXOffset","screenCTM","inverse","base","arrayToMatrix","abcdef","px","deltaTransformPoint","py","skewX","atan2","f","transformedX","sqrt","transformedY","skewY","scaleX","scaleY","rotation","parseMatrix","translate","scale","around","rotate","flip","skew","tan","createSVGMatrix","ctm","getCTM","getScreenCTM","createSVGPoint","matrixTransform","attributes","nodeValue","image","Image","pattern","setAttributeNS","rebuild","ensureCentre","Rotate","Scale","Skew","Translate","untransform","kv","toParent","pCtm","toDoc","Transformation","inversed","params","_undo","cssText","camelCase","children","first","deep","hasChildNodes","lastChild","_defs","ungroup","depth","Defs","flatten","view","we","he","wm","hm","reg","zoom","handlerMap","listenerId","binding","ev","_svgjsListenerId","Event","dispatchEvent","CustomEvent","cancelable","gbox","trans","group","siblings","next","previous","forward","backward","front","back","before","Mask","targets","unmask","mask","maskWith","masker","ClipPath","unclip","clip","clipWith","clipper","gradient","fy","Pattern","patternUnits","spof","Bare","words","symbol","Use","file","use","Rect","Circle","circle","Ellipse","ellipse","Line","line","Polyline","Polygon","polygon","_array","morphArray","Path","img","_loaded","ratio","_error","_rebuild","_build","oy","newLined","textContent","build","tspan","newLine","textPath","blankLineOffset","dy","plain","Tspan","dx","getComputedTextLength","TextPath","track","link","linkTo","Marker","ref","marker","sugar","prefix","charAt","substring","comp","w","h","idFromReference","extension","dmove","radius","getTotalLength","pointAt","getPointAtLength","font","members","remember","k","memory","forget","_memory","query","bubbles","createEvent","initCustomEvent","lastTime","vendors","currTime","getTime","timeToCall","factory"],"mappings":"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","file":"js/player-82cf362165d2dffa6507.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/packs/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2441);\n","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', 'select'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('select'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.select);\n        global.clipboardAction = mod.exports;\n    }\n})(this, function (module, _select) {\n    'use strict';\n\n    var _select2 = _interopRequireDefault(_select);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n    } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    var ClipboardAction = function () {\n        /**\n         * @param {Object} options\n         */\n        function ClipboardAction(options) {\n            _classCallCheck(this, ClipboardAction);\n\n            this.resolveOptions(options);\n            this.initSelection();\n        }\n\n        /**\n         * Defines base properties passed from constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(ClipboardAction, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = options.action;\n                this.emitter = options.emitter;\n                this.target = options.target;\n                this.text = options.text;\n                this.trigger = options.trigger;\n\n                this.selectedText = '';\n            }\n        }, {\n            key: 'initSelection',\n            value: function initSelection() {\n                if (this.text) {\n                    this.selectFake();\n                } else if (this.target) {\n                    this.selectTarget();\n                }\n            }\n        }, {\n            key: 'selectFake',\n            value: function selectFake() {\n                var _this = this;\n\n                var isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n                this.removeFake();\n\n                this.fakeHandlerCallback = function () {\n                    return _this.removeFake();\n                };\n                this.fakeHandler = document.body.addEventListener('click', this.fakeHandlerCallback) || true;\n\n                this.fakeElem = document.createElement('textarea');\n                // Prevent zooming on iOS\n                this.fakeElem.style.fontSize = '12pt';\n                // Reset box model\n                this.fakeElem.style.border = '0';\n                this.fakeElem.style.padding = '0';\n                this.fakeElem.style.margin = '0';\n                // Move element out of screen horizontally\n                this.fakeElem.style.position = 'absolute';\n                this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n                // Move element to the same position vertically\n                var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n                this.fakeElem.style.top = yPosition + 'px';\n\n                this.fakeElem.setAttribute('readonly', '');\n                this.fakeElem.value = this.text;\n\n                document.body.appendChild(this.fakeElem);\n\n                this.selectedText = (0, _select2.default)(this.fakeElem);\n                this.copyText();\n            }\n        }, {\n            key: 'removeFake',\n            value: function removeFake() {\n                if (this.fakeHandler) {\n                    document.body.removeEventListener('click', this.fakeHandlerCallback);\n                    this.fakeHandler = null;\n                    this.fakeHandlerCallback = null;\n                }\n\n                if (this.fakeElem) {\n                    document.body.removeChild(this.fakeElem);\n                    this.fakeElem = null;\n                }\n            }\n        }, {\n            key: 'selectTarget',\n            value: function selectTarget() {\n                this.selectedText = (0, _select2.default)(this.target);\n                this.copyText();\n            }\n        }, {\n            key: 'copyText',\n            value: function copyText() {\n                var succeeded = void 0;\n\n                try {\n                    succeeded = document.execCommand(this.action);\n                } catch (err) {\n                    succeeded = false;\n                }\n\n                this.handleResult(succeeded);\n            }\n        }, {\n            key: 'handleResult',\n            value: function handleResult(succeeded) {\n                this.emitter.emit(succeeded ? 'success' : 'error', {\n                    action: this.action,\n                    text: this.selectedText,\n                    trigger: this.trigger,\n                    clearSelection: this.clearSelection.bind(this)\n                });\n            }\n        }, {\n            key: 'clearSelection',\n            value: function clearSelection() {\n                if (this.target) {\n                    this.target.blur();\n                }\n\n                window.getSelection().removeAllRanges();\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.removeFake();\n            }\n        }, {\n            key: 'action',\n            set: function set() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n                this._action = action;\n\n                if (this._action !== 'copy' && this._action !== 'cut') {\n                    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n                }\n            },\n            get: function get() {\n                return this._action;\n            }\n        }, {\n            key: 'target',\n            set: function set(target) {\n                if (target !== undefined) {\n                    if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n                        if (this.action === 'copy' && target.hasAttribute('disabled')) {\n                            throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n                        }\n\n                        if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n                            throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n                        }\n\n                        this._target = target;\n                    } else {\n                        throw new Error('Invalid \"target\" value, use a valid Element');\n                    }\n                }\n            },\n            get: function get() {\n                return this._target;\n            }\n        }]);\n\n        return ClipboardAction;\n    }();\n\n    module.exports = ClipboardAction;\n});","function select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","var is = require('./is');\nvar delegate = require('delegate');\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n","/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n","/*! Player.js - v0.0.11 - 2015-07-24\n* http://github.com/embedly/player.js\n* Copyright (c) 2015 Embedly; Licensed BSD */\n(function(window, document){\nvar playerjs = {};\n\nplayerjs.DEBUG = false;\nplayerjs.VERSION = '0.0.11';\nplayerjs.CONTEXT = 'player.js';\nplayerjs.POST_MESSAGE = !!window.postMessage;\n\n/*\n* Utils.\n*/\nplayerjs.origin = function(url){\n  // Grab the origin of a URL\n  if (url.substr(0, 2) === '//'){\n    url = window.location.protocol + url;\n  }\n\n  return url.split('/').slice(0,3).join('/');\n};\n\nplayerjs.addEvent = function(elem, type, eventHandle) {\n  if (!elem) { return; }\n  if ( elem.addEventListener ) {\n    elem.addEventListener( type, eventHandle, false );\n  } else if ( elem.attachEvent ) {\n    elem.attachEvent( \"on\" + type, eventHandle );\n  } else {\n    elem[\"on\"+type]=eventHandle;\n  }\n};\n\n// usage: log('inside coolFunc',this,arguments);\n// http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/\nplayerjs.log = function(){\n  playerjs.log.history = playerjs.log.history || [];   // store logs to an array for reference\n  playerjs.log.history.push(arguments);\n  if(window.console && playerjs.DEBUG){\n    window.console.log( Array.prototype.slice.call(arguments) );\n  }\n};\n\n// isFunctions\nplayerjs.isString = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object String]';\n};\n\nplayerjs.isObject = function(obj){\n  return Object.prototype.toString.call(obj) === \"[object Object]\";\n};\n\nplayerjs.isArray = function(obj){\n  return Object.prototype.toString.call(obj) === \"[object Array]\";\n};\n\nplayerjs.isNone = function(obj){\n  return (obj === null || obj === undefined);\n};\n\nplayerjs.has = function(obj, key){\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\n// ie8 doesn't support indexOf in arrays, based on underscore.\nplayerjs.indexOf = function(array, item) {\n  if (array == null){ return -1; }\n  var i = 0, length = array.length;\n  if (Array.prototype.IndexOf && array.indexOf === Array.prototype.IndexOf) {\n    return array.indexOf(item);\n  }\n  for (; i < length; i++) {\n    if (array[i] === item) { return i; }\n  }\n  return -1;\n};\n\n// Assert\nplayerjs.assert = function(test, msg) {\n  if (!test) {\n    throw msg || \"Player.js Assert Failed\";\n  }\n};\n/*\n* Keeper is just a method for keeping track of all the callbacks.\n*/\n\nplayerjs.Keeper = function(){\n  this.init();\n};\n\nplayerjs.Keeper.prototype.init = function(){\n  this.data = {};\n};\n\nplayerjs.Keeper.prototype.getUUID = function(){\n  // Create a random id. #http://stackoverflow.com/a/2117523/564191\n  return 'listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n  });\n};\n\nplayerjs.Keeper.prototype.has = function(event, id){\n  if (!this.data.hasOwnProperty(event)){\n    return false;\n  }\n\n  if (playerjs.isNone(id)){\n    return true;\n  }\n\n  // Figure out if we have the event.\n  var events = this.data[event];\n\n  for (var i = 0; i < events.length; i++){\n    if (events[i].id === id){\n      return true;\n    }\n  }\n\n  return false;\n};\n\nplayerjs.Keeper.prototype.add = function(id, event, cb, ctx, one){\n  var d = {\n    id: id,\n    event: event,\n    cb: cb,\n    ctx: ctx,\n    one: one\n  };\n\n  if (this.has(event)){\n    this.data[event].push(d);\n  } else {\n    this.data[event] = [d];\n  }\n};\n\nplayerjs.Keeper.prototype.execute = function(event, id, data, ctx){\n  if (!this.has(event, id)){\n    return false;\n  }\n\n  var keep = [],\n    execute = [];\n\n  for (var i=0; i< this.data[event].length; i++){\n    var d = this.data[event][i];\n\n    // There are omni events, in that they do not have an id. i.e \"ready\".\n    // Or there is an ID and we only want to execute the right id'd method.\n    if (playerjs.isNone(id) || (!playerjs.isNone(id) && d.id === id )){\n\n      execute.push({\n        cb: d.cb,\n        ctx: d.ctx? d.ctx: ctx,\n        data: data\n      });\n\n      // If we only wanted to execute this once.\n      if (d.one === false){\n        keep.push(d);\n      }\n    } else {\n      keep.push(d);\n    }\n  }\n\n  if (keep.length === 0){\n    delete this.data[event];\n  } else {\n    this.data[event] = keep;\n  }\n\n  // We need to execute everything after we deal with the one stuff. otherwise\n  // we have issues to order of operations.\n  for (var n=0; n < execute.length; n++){\n    var e = execute[n];\n    e.cb.call(e.ctx, e.data);\n  }\n};\n\nplayerjs.Keeper.prototype.on = function(id, event, cb, ctx){\n  this.add(id, event, cb, ctx, false);\n};\n\nplayerjs.Keeper.prototype.one = function(id, event, cb, ctx){\n  this.add(id, event, cb, ctx, true);\n};\n\nplayerjs.Keeper.prototype.off = function(event, cb){\n  // We should probably restructure so this is a bit less of a pain.\n  var listeners = [];\n\n  if (!this.data.hasOwnProperty(event)){\n    return listeners;\n  }\n\n  var keep = [];\n\n  // Loop through everything.\n  for (var i=0; i< this.data[event].length; i++){\n    var data = this.data[event][i];\n    // If we only keep if there was a CB and the CB is there.\n    if (!playerjs.isNone(cb) && data.cb !== cb) {\n      keep.push(data);\n    } else if (!playerjs.isNone(data.id)) {\n      listeners.push(data.id);\n    }\n  }\n\n  if (keep.length === 0){\n    delete this.data[event];\n  } else {\n    this.data[event] = keep;\n  }\n\n  return listeners;\n};\n\n/*\n* Player.js is a javascript library for interacting with iframes via\n* postMessage that use an Open Player Spec\n*\n*/\n\nplayerjs.Player = function(elem, options){\n  if (!(this instanceof playerjs.Player)) {\n    return new playerjs.Player(elem, options);\n  }\n  this.init(elem, options);\n};\n\nplayerjs.EVENTS = {\n  READY: 'ready',\n  PLAY: 'play',\n  PAUSE: 'pause',\n  ENDED: 'ended',\n  TIMEUPDATE: 'timeupdate',\n  PROGRESS: 'progress',\n  ERROR: 'error'\n};\n\nplayerjs.EVENTS.all = function(){\n  var all = [];\n  for (var key in playerjs.EVENTS) {\n    if (playerjs.has(playerjs.EVENTS, key) && playerjs.isString(playerjs.EVENTS[key])) {\n      all.push(playerjs.EVENTS[key]);\n    }\n  }\n  return all;\n};\n\nplayerjs.METHODS = {\n  PLAY: 'play',\n  PAUSE: 'pause',\n  GETPAUSED: 'getPaused',\n  MUTE: 'mute',\n  UNMUTE: 'unmute',\n  GETMUTED: 'getMuted',\n  SETVOLUME: 'setVolume',\n  GETVOLUME: 'getVolume',\n  GETDURATION: 'getDuration',\n  SETCURRENTTIME: 'setCurrentTime',\n  GETCURRENTTIME:'getCurrentTime',\n  SETLOOP: 'setLoop',\n  GETLOOP: 'getLoop',\n  REMOVEEVENTLISTENER: 'removeEventListener',\n  ADDEVENTLISTENER: 'addEventListener'\n};\n\nplayerjs.METHODS.all = function(){\n  var all = [];\n  for (var key in playerjs.METHODS) {\n    if (playerjs.has(playerjs.METHODS, key) && playerjs.isString(playerjs.METHODS[key])) {\n      all.push(playerjs.METHODS[key]);\n    }\n  }\n  return all;\n};\n\nplayerjs.READIED = [];\n\nplayerjs.Player.prototype.init = function(elem, options){\n\n  var self = this;\n\n  if (playerjs.isString(elem)){\n    elem = document.getElementById(elem);\n  }\n\n  this.elem = elem;\n\n  // Figure out the origin of where we are sending messages.\n  this.origin = playerjs.origin(elem.src);\n\n  // Event handling.\n  this.keeper = new playerjs.Keeper();\n\n  // Queuing before ready.\n  this.isReady = false;\n  this.queue = [];\n\n  // Assume that everything is supported, unless we know otherwise.\n  this.events = playerjs.EVENTS.all();\n  this.methods = playerjs.METHODS.all();\n\n  if (playerjs.POST_MESSAGE){\n    // Set up the reciever.\n    playerjs.addEvent(window, 'message', function(e){\n      self.receive(e);\n    });\n  } else {\n    playerjs.log('Post Message is not Available.');\n  }\n\n  // See if we caught the src event first, otherwise assume we haven't loaded\n  if (playerjs.indexOf(playerjs.READIED, elem.src) > -1){\n    self.loaded = true;\n  } else {\n    // Try the onload event, just lets us give another test.\n    this.elem.onload = function(){\n      self.loaded = true;\n    };\n  }\n};\n\nplayerjs.Player.prototype.send = function(data, callback, ctx){\n  // Add the context and version to the data.\n  data.context = playerjs.CONTEXT;\n  data.version = playerjs.VERSION;\n\n  // We are expecting a response.\n  if (callback) {\n    // Create a UUID\n    var id = this.keeper.getUUID();\n\n    // Set the listener.\n    data.listener = id;\n\n    // Only hang on to this listener once.\n    this.keeper.one(id, data.method, callback, ctx);\n  }\n\n  if (!this.isReady && data.value !== 'ready'){\n    playerjs.log('Player.queue', data);\n    this.queue.push(data);\n    return false;\n  }\n\n  playerjs.log('Player.send', data, this.origin);\n\n  if (this.loaded === true){\n    this.elem.contentWindow.postMessage(JSON.stringify(data), this.origin);\n  }\n\n  return true;\n};\n\nplayerjs.Player.prototype.receive = function(e){\n  playerjs.log('Player.receive', e);\n\n  if (e.origin !== this.origin){\n    return false;\n  }\n\n  var data;\n  try {\n    data = JSON.parse(e.data);\n  } catch (err){\n    // Not a valid response.\n    return false;\n  }\n\n  // abort if this message wasn't a player.js message\n  if (data.context !== playerjs.CONTEXT) {\n    return false;\n  }\n\n  // We need to determine if we are ready.\n  if (data.event === 'ready' && data.value && data.value.src === this.elem.src){\n    this.ready(data);\n  }\n\n  if (this.keeper.has(data.event, data.listener)){\n    this.keeper.execute(data.event, data.listener, data.value, this);\n  }\n};\n\n\nplayerjs.Player.prototype.ready = function(data){\n\n  if (this.isReady === true){\n    return false;\n  }\n\n  // If we got a list of supported methods, we should set them.\n  if (data.value.events){\n    this.events = data.value.events;\n  }\n  if (data.value.methods){\n    this.methods = data.value.methods;\n  }\n\n  // set ready.\n  this.isReady = true;\n  this.loaded = true;\n\n  // Clear the queue\n  for (var i=0; i<this.queue.length; i++){\n    var obj = this.queue[i];\n\n    playerjs.log('Player.dequeue', obj);\n\n    if (data.event === 'ready'){\n      this.keeper.execute(obj.event, obj.listener, true, this);\n    }\n    this.send(obj);\n  }\n  this.queue = [];\n};\n\nplayerjs.Player.prototype.on = function(event, callback, ctx){\n  var id = this.keeper.getUUID();\n\n  if (event === 'ready'){\n    // We only want to call ready once.\n    this.keeper.one(id, event, callback, ctx);\n  } else {\n    this.keeper.on(id, event, callback, ctx);\n  }\n\n  this.send({\n    method: 'addEventListener',\n    value: event,\n    listener: id\n  });\n\n  return true;\n};\n\nplayerjs.Player.prototype.off = function(event, callback){\n\n  var listeners = this.keeper.off(event, callback);\n  playerjs.log('Player.off', listeners);\n\n  if (listeners.length > 0) {\n    for (var i in listeners){\n      this.send({\n        method: 'removeEventListener',\n        value: event,\n        listener: listeners[i]\n      });\n      return true;\n    }\n  }\n\n  return false;\n};\n\n// Based on what ready passed back, we can determine if the events/method are\n// supported by the player.\nplayerjs.Player.prototype.supports = function(evtOrMethod, names){\n\n  playerjs.assert(playerjs.indexOf(['method', 'event'], evtOrMethod) > -1,\n    'evtOrMethod needs to be either \"event\" or \"method\" got ' + evtOrMethod);\n\n  // Make everything an array.\n  names = playerjs.isArray(names) ? names : [names];\n\n  var all = evtOrMethod === 'event' ? this.events : this.methods;\n\n  for (var i=0; i < names.length; i++){\n    if (playerjs.indexOf(all, names[i]) === -1){\n      return false;\n    }\n  }\n\n  return true;\n};\n\n//create function to add to the Player prototype\nfunction createPrototypeFunction(name) {\n\n  return function() {\n\n    var data = {\n      method: name\n    };\n\n    var args = Array.prototype.slice.call(arguments);\n\n    //for getters add the passed parameters to the arguments for the send call\n    if (/^get/.test(name)) {\n      playerjs.assert(args.length > 0, 'Get methods require a callback.');\n      args.unshift(data);\n    } else {\n      //for setter add the first arg to the value field\n      if (/^set/.test(name)) {\n        playerjs.assert(args.length !== 0, 'Set methods require a value.');\n        data.value = args[0];\n      }\n      args = [data];\n    }\n\n    this.send.apply(this, args);\n  };\n}\n\n// Loop through the methods to add them to the prototype.\nfor (var i = 0, l = playerjs.METHODS.all().length; i < l; i++) {\n  var methodName = playerjs.METHODS.all()[i];\n\n  // We don't want to overwrite existing methods.\n  if (!playerjs.Player.prototype.hasOwnProperty(methodName)){\n    playerjs.Player.prototype[methodName] = createPrototypeFunction(methodName);\n  }\n}\n\nwindow.playerjs = playerjs;\n\n// We need to catch all ready events in case the iframe is ready before the\n// player is invoked.\nplayerjs.addEvent(window, 'message', function(e){\n  var data;\n  try {\n    data = JSON.parse(e.data);\n  } catch (err){\n    return false;\n  }\n\n  // abort if this message wasn't a player.js message\n  if (data.context !== playerjs.CONTEXT) {\n    return false;\n  }\n\n  // We need to determine if we are ready.\n  if (data.event === 'ready' && data.value && data.value.src){\n    playerjs.READIED.push(data.value.src);\n  }\n});\n\n/*\n* Does all the wiring up for the backend.\n*\n* var receiver = new playerjs.Receiver();\n* receiver.on('play', function(){ video.play() });\n* receiver.on('getDuration', function(callback){ callback(video.duration) });\n* receiver.emit('timeupdate', {});\n*/\n\nplayerjs.Receiver = function(events, methods){\n  this.init(events, methods);\n};\n\nplayerjs.Receiver.prototype.init = function(events, methods){\n  var self = this;\n\n  // Deal with the ready crap.\n  this.isReady = false;\n\n  // Bind the window message.\n  this.origin = playerjs.origin(document.referrer);\n\n  //Create a holder for all the methods.\n  this.methods = {};\n\n  // holds all the information about what's supported\n  this.supported = {\n    events: events ? events : playerjs.EVENTS.all(),\n    methods: methods ? methods : playerjs.METHODS.all()\n  };\n\n  // Deals with the adding and removing of event listeners.\n  this.eventListeners = {};\n\n  // We can't send any messages.\n  this.reject = !(window.self !== window.top && playerjs.POST_MESSAGE);\n\n  // We aren't in an iframe, don't listen.\n  if (!this.reject){\n    playerjs.addEvent(window, 'message', function(e){\n      self.receive(e);\n    });\n  }\n};\n\nplayerjs.Receiver.prototype.receive = function(e){\n  // Only want to listen to events that came from our origin.\n  if (e.origin !== this.origin){\n    return false;\n  }\n\n  // Browsers that support postMessage also support JSON.\n  var data = {};\n  if (playerjs.isObject(e.data)){\n    data = e.data;\n  } else {\n    try {\n      data = window.JSON.parse(e.data);\n    } catch (err){\n      playerjs.log('JSON Parse Error', err);\n    }\n  }\n\n  playerjs.log('Receiver.receive', e, data);\n\n  // Nothing for us to do.\n  if (!data.method){\n    return false;\n  }\n\n  // make sure the context is correct.\n  if (data.context !== playerjs.CONTEXT){\n    return false;\n  }\n\n  // Make sure we have a valid method.\n  if (playerjs.indexOf(playerjs.METHODS.all(), data.method) === -1){\n    this.emit('error', {\n      code: 2,\n      msg: 'Invalid Method \"'+data.method+'\"'\n    });\n    return false;\n  }\n\n  // See if we added a listener\n  var listener = !playerjs.isNone(data.listener) ? data.listener : null;\n\n  // Add Event Listener.\n  if (data.method === 'addEventListener') {\n    if (this.eventListeners.hasOwnProperty(data.value)) {\n      //If the listener is the same, i.e. null only add it once.\n      if (playerjs.indexOf(this.eventListeners[data.value], listener) === -1){\n        this.eventListeners[data.value].push(listener);\n      }\n    } else {\n      this.eventListeners[data.value] = [listener];\n    }\n\n    if (data.value === 'ready' && this.isReady){\n      this.ready();\n    }\n  }\n  // Remove the event listener.\n  else if (data.method === 'removeEventListener') {\n    if (this.eventListeners.hasOwnProperty(data.value)) {\n      var index = playerjs.indexOf(this.eventListeners[data.value], listener);\n\n      // if we find the element, remove it.\n      if (index > -1){\n        this.eventListeners[data.value].splice(index, 1);\n      }\n\n      if (this.eventListeners[data.value].length === 0){\n        delete this.eventListeners[data.value];\n      }\n    }\n  }\n  // Go get it.\n  else {\n    this.get(data.method, data.value, listener);\n  }\n};\n\nplayerjs.Receiver.prototype.get = function(method, value, listener){\n  var self = this;\n\n  // Now lets do it.\n  if (!this.methods.hasOwnProperty(method)){\n    this.emit('error', {\n      code: 3,\n      msg: 'Method Not Supported\"'+method+'\"'\n    });\n    return false;\n  }\n\n  var func = this.methods[method];\n\n  if (method.substr(0,3) === 'get') {\n    var callback = function(val){\n      self.send(method, val, listener);\n    };\n    func.call(this, callback);\n  } else {\n    func.call(this, value);\n  }\n};\n\nplayerjs.Receiver.prototype.on = function(event, callback){\n  this.methods[event] = callback;\n};\n\nplayerjs.Receiver.prototype.send = function(event, value, listener){\n\n  playerjs.log('Receiver.send', event, value, listener);\n\n  if (this.reject){\n    // We are not in a frame, or we don't support POST_MESSAGE\n    playerjs.log('Receiver.send.reject', event, value, listener);\n    return false;\n  }\n\n  var data = {\n    context: playerjs.CONTEXT,\n    version: playerjs.VERSION,\n    event: event\n  };\n\n  if (!playerjs.isNone(value)){\n    data.value = value;\n  }\n\n  if (!playerjs.isNone(listener)){\n    data.listener = listener;\n  }\n\n  var msg = JSON.stringify(data);\n  window.parent.postMessage(msg, this.origin === \"\" ? '*' : this.origin);\n};\n\nplayerjs.Receiver.prototype.emit = function(event, value){\n\n  if (!this.eventListeners.hasOwnProperty(event)){\n    return false;\n  }\n\n  playerjs.log('Instance.emit', event, value, this.eventListeners[event]);\n\n  for (var i=0; i < this.eventListeners[event].length; i++){\n    var listener = this.eventListeners[event][i];\n    this.send(event, value, listener);\n  }\n\n  return true;\n};\n\nplayerjs.Receiver.prototype.ready = function(){\n  playerjs.log('Receiver.ready');\n  this.isReady = true;\n\n  var data = {\n    src: window.location.toString(),\n    events: this.supported.events,\n    methods: this.supported.methods\n  };\n\n  if (!this.emit('ready', data)){\n    this.send('ready', data);\n  }\n\n};\n\nplayerjs.HTML5Adapter = function(video){\n  if (!(this instanceof playerjs.HTML5Adapter)) {\n    return new playerjs.HTML5Adapter(video);\n  }\n  this.init(video);\n};\n\nplayerjs.HTML5Adapter.prototype.init = function(video){\n\n  playerjs.assert(video, 'playerjs.VideoJSReceiver requires a video element');\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver();\n\n  /* EVENTS */\n  video.addEventListener('playing', function(){\n    receiver.emit('play');\n  });\n\n  video.addEventListener('pause', function(){\n    receiver.emit('pause');\n  });\n\n  video.addEventListener('ended', function(){\n    receiver.emit('ended');\n  });\n\n  video.addEventListener('timeupdate', function(){\n    receiver.emit('timeupdate', {\n      seconds: video.currentTime,\n      duration: video.duration\n    });\n  });\n\n  video.addEventListener('progress', function(){\n    receiver.emit('buffered', {\n      percent: video.buffered.length\n    });\n  });\n\n  /* Methods */\n  receiver.on('play', function(){\n    video.play();\n  });\n\n  receiver.on('pause', function(){\n    video.pause();\n  });\n\n  receiver.on('getPaused', function(callback){\n    callback(video.paused);\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(video.currentTime);\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    video.currentTime = value;\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(video.duration);\n  });\n\n  receiver.on('getVolume', function(callback){\n    callback(video.volume * 100);\n  });\n\n  receiver.on('setVolume', function(value){\n    video.volume = value/100;\n  });\n\n  receiver.on('mute', function(){\n    video.muted = true;\n  });\n\n  receiver.on('unmute', function(){\n    video.muted = false;\n  });\n\n  receiver.on('getMuted', function(callback){\n    callback(video.muted);\n  });\n\n  receiver.on('getLoop', function(callback){\n    callback(video.loop);\n  });\n\n  receiver.on('setLoop', function(value){\n    video.loop = value;\n  });\n};\n\n/* Call when the video has loaded */\nplayerjs.HTML5Adapter.prototype.ready = function(){\n  this.receiver.ready();\n};\n//http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference\nplayerjs.JWPlayerAdapter = function(player){\n  if (!(this instanceof playerjs.JWPlayerAdapter)) {\n    return new playerjs.JWPlayerAdapter(player);\n  }\n  this.init(player);\n};\n\nplayerjs.JWPlayerAdapter.prototype.init = function(player){\n\n  playerjs.assert(player, 'playerjs.JWPlayerAdapter requires a player object');\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver();\n\n  // JWPlayer doesn't have a seLoop, so we can do it ourself.\n  this.looped = false;\n\n  /* EVENTS */\n  player.onPause(function(){\n    receiver.emit('pause');\n  });\n\n  player.onPlay(function(){\n    receiver.emit('play');\n  });\n\n  player.onTime(function(e){\n    var seconds = e.position,\n      duration = e.duration;\n\n    if (!seconds || !duration){\n      return false;\n    }\n\n    var value = {\n      seconds: seconds,\n      duration: duration\n    };\n    receiver.emit('timeupdate', value);\n  });\n\n  var self = this;\n  player.onComplete(function(){\n    // Fake the looping\n    if (self.looped === true){\n      // By default jwplayer seeks after play.\n      player.seek(0);\n    } else {\n      // Else throw the ended event.\n      receiver.emit('ended');\n    }\n  });\n\n  player.onError(function(){\n    receiver.emit('error');\n  });\n\n\n  /* METHODS */\n  receiver.on('play', function(){\n    player.play(true);\n  });\n\n  receiver.on('pause', function(){\n    player.pause(true);\n  });\n\n  receiver.on('getPaused', function(callback){\n    callback(player.getState() !== 'PLAYING');\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(player.getPosition());\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    player.seek(value);\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(player.getDuration());\n  });\n\n  receiver.on('getVolume', function(callback){\n    callback(player.getVolume());\n  });\n\n  receiver.on('setVolume', function(value){\n    player.setVolume(value);\n  });\n\n  receiver.on('mute', function(){\n    player.setMute(true);\n  });\n\n  receiver.on('unmute', function(){\n    player.setMute(false);\n  });\n\n  receiver.on('getMuted', function(callback){\n    callback(player.getMute() === true);\n  });\n\n  receiver.on('getLoop', function(callback){\n    callback(this.looped);\n  }, this);\n\n  receiver.on('setLoop', function(value){\n    this.looped = value;\n  }, this);\n};\n\n/* Call when the video.js is ready */\nplayerjs.JWPlayerAdapter.prototype.ready = function(){\n  this.receiver.ready();\n};\n\nplayerjs.MockAdapter = function(){\n  if (!(this instanceof playerjs.MockAdapter)) {\n    return new playerjs.MockAdapter();\n  }\n  this.init();\n};\n\nplayerjs.MockAdapter.prototype.init = function(){\n\n  // Our mock video\n  var video = {\n    duration: 20,\n    currentTime: 0,\n    interval: null,\n    timeupdate: function(){},\n    volume: 100,\n    mute: false,\n    playing: false,\n    loop : false,\n    play: function(){\n      video.interval = setInterval(function(){\n        video.currentTime += 0.25;\n        video.timeupdate({\n          seconds: video.currentTime,\n          duration: video.duration\n        });\n      }, 250);\n      video.playing = true;\n    },\n    pause: function(){\n      clearInterval(video.interval);\n      video.playing = false;\n    }\n  };\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver();\n\n  receiver.on('play', function(){\n    var self = this;\n    video.play();\n    this.emit('play');\n    video.timeupdate = function(data){\n      self.emit('timeupdate', data);\n    };\n  });\n\n  receiver.on('pause', function(){\n    video.pause();\n    this.emit('pause');\n  });\n\n  receiver.on('getPaused', function(callback){\n    callback(!video.playing);\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(video.currentTime);\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    video.currentTime = value;\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(video.duration);\n  });\n\n  receiver.on('getVolume', function(callback){\n    callback(video.volume);\n  });\n\n  receiver.on('setVolume', function(value){\n    video.volume = value;\n  });\n\n  receiver.on('mute', function(){\n    video.mute = true;\n  });\n\n  receiver.on('unmute', function(){\n    video.mute = false;\n  });\n\n  receiver.on('getMuted', function(callback){\n    callback(video.mute);\n  });\n\n  receiver.on('getLoop', function(callback){\n    callback(video.loop);\n  });\n\n  receiver.on('setLoop', function(value){\n    video.loop = value;\n  });\n};\n\n/* Call when the video has loaded */\nplayerjs.MockAdapter.prototype.ready = function(){\n  this.receiver.ready();\n};\nplayerjs.SublimeAdapter = function(player){\n  if (!(this instanceof playerjs.SublimeAdapter)) {\n    return new playerjs.SublimeAdapter(player);\n  }\n  this.init(player);\n};\n\n// Subset of methods available.\nplayerjs.SublimeAdapter.prototype.events = [\n  playerjs.EVENTS.READY,\n  playerjs.EVENTS.PLAY,\n  playerjs.EVENTS.PAUSE,\n  playerjs.EVENTS.ENDED,\n  playerjs.EVENTS.TIMEUPDATE,\n  playerjs.EVENTS.ERROR\n];\n\nplayerjs.SublimeAdapter.prototype.methods = [\n  playerjs.METHODS.PLAY,\n  playerjs.METHODS.PAUSE,\n  playerjs.METHODS.GETDURATION,\n  playerjs.METHODS.SETCURRENTTIME,\n  playerjs.METHODS.GETCURRENTTIME,\n  playerjs.METHODS.REMOVEEVENTLISTENER,\n  playerjs.METHODS.ADDEVENTLISTENER\n];\n\nplayerjs.SublimeAdapter.prototype.init = function(player){\n\n  playerjs.assert(player, 'playerjs.SublimeAdapter requires a player object');\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver(this.events, this.methods);\n\n  /* EVENTS */\n  player.on(\"pause\", function(){\n    receiver.emit('pause');\n  });\n\n  player.on(\"play\", function(){\n    receiver.emit('play');\n  });\n\n  player.on(\"timeUpdate\", function(player, seconds){\n    var duration = player.duration();\n\n    if (!seconds || !duration){\n      return false;\n    }\n\n    var value = {\n      seconds: seconds,\n      duration: duration\n    };\n    receiver.emit('timeupdate', value);\n  });\n\n  player.on(\"end\", function(){\n    receiver.emit('ended');\n  });\n\n  /* METHODS */\n  receiver.on('play', function(){\n    player.play();\n  });\n\n  receiver.on('pause', function(){\n    player.pause();\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(player.playbackTime());\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    player.seekTo(value);\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(player.duration());\n  });\n};\n\n/* Call when the video.js is ready */\nplayerjs.SublimeAdapter.prototype.ready = function(){\n  this.receiver.ready();\n};\n\nplayerjs.VideoJSAdapter = function(player){\n  if (!(this instanceof playerjs.VideoJSAdapter)) {\n    return new playerjs.VideoJSAdapter(player);\n  }\n  this.init(player);\n};\n\nplayerjs.VideoJSAdapter.prototype.init = function(player){\n\n  playerjs.assert(player, 'playerjs.VideoJSReceiver requires a player object');\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver();\n\n  /* EVENTS */\n  player.on(\"pause\", function(){\n    receiver.emit('pause');\n  });\n\n  player.on(\"play\", function(){\n    receiver.emit('play');\n  });\n\n  player.on(\"timeupdate\", function(e){\n    var seconds = player.currentTime(),\n      duration = player.duration();\n\n    if (!seconds || !duration){\n      return false;\n    }\n\n    var value = {\n      seconds: seconds,\n      duration: duration\n    };\n    receiver.emit('timeupdate', value);\n  });\n\n  player.on(\"ended\", function(){\n    receiver.emit('ended');\n  });\n\n  player.on(\"error\", function(){\n    receiver.emit('error');\n  });\n\n\n  /* METHODS */\n  receiver.on('play', function(){\n    player.play();\n  });\n\n  receiver.on('pause', function(){\n    player.pause();\n  });\n\n  receiver.on('getPaused', function(callback){\n    callback(player.paused());\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(player.currentTime());\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    player.currentTime(value);\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(player.duration());\n  });\n\n  receiver.on('getVolume', function(callback){\n    callback(player.volume() * 100);\n  });\n\n  receiver.on('setVolume', function(value){\n    player.volume(value/100);\n  });\n\n  receiver.on('mute', function(){\n    player.volume(0);\n  });\n\n  receiver.on('unmute', function(){\n    player.volume(1);\n  });\n\n  receiver.on('getMuted', function(callback){\n    callback(player.volume() === 0);\n  });\n\n  receiver.on('getLoop', function(callback){\n    callback(player.loop());\n  });\n\n  receiver.on('setLoop', function(value){\n    player.loop(value);\n  });\n};\n\n/* Call when the video.js is ready */\nplayerjs.VideoJSAdapter.prototype.ready = function(){\n  this.receiver.ready();\n};\n\n})(window, document);","export function playerEvent(action) {\n  window.ga('send', {\n    hitType: 'event',\n    eventCategory: 'Player',\n    eventAction: action\n  });\n}\n","import { playerEvent } from './utils';\n\nfunction formatTime(secs) {\n  var hours = Math.floor(secs / 3600) % 24;\n  var minutes = Math.floor(secs / 60) % 60;\n  var seconds = secs % 60;\n\n  hours = hours < 10 ? `0${hours}` : hours;\n  minutes = minutes < 10 ? `0${minutes}` : minutes;\n  seconds = seconds < 10 ? `0${seconds}` : seconds;\n\n  return hours + ':' + minutes + ':' + seconds;\n}\n\nfunction initializeEventListeners(player) {\n  // play button\n  this.playBtn.addEventListener('click', () => {\n    if (player.playing) {\n      player.pause();\n      this.progressLock = false;\n    } else {\n      player.play();\n    }\n  });\n\n  // waveform controls\n  this.caddy.addEventListener('click', ({ pageX }) => {\n    const waveformRect = this.waveform.getBoundingClientRect();\n    const waveformWidth = waveformRect.width;\n    const waveformLeft = waveformRect.left;\n    // using pageX because of offsetX bug\n    const offsetX = pageX - waveformLeft;\n\n    player.seek(offsetX / waveformWidth);\n  });\n\n  this.caddy.addEventListener('mousemove', ({ pageX }) => {\n    const waveformRect = this.waveform.getBoundingClientRect();\n    const waveformWidth = waveformRect.width;\n    const waveformLeft = waveformRect.left;\n    // using pageX because of offsetX bug\n    const offsetX = pageX - waveformLeft;\n\n    this.setScrubberWidth(offsetX);\n    const seconds = Math.round((offsetX / waveformWidth) * player.duration);\n    this.renderTime(seconds);\n  });\n\n  this.caddy.addEventListener('mouseout', () => {\n    this.setScrubberWidth(0);\n    this.renderTime(player.position);\n  });\n\n  // Slide up overlay and show subscription options\n  this.subscribeToggle.addEventListener('click', ({ target }) => {\n    this.subscriptionsTab.classList.add('is-visible');\n    this.sharingTab.classList.remove('is-visible');\n    this.cookieTab.classList.remove('is-visible');\n    this.overlay.classList.toggle('is-up');\n\n    if (target.offsetParent.classList.contains('is-up')) {\n      playerEvent('subscribe');\n      this.setSubscribeText('&#xe209 Hide');\n      this.shareToggle.classList.add('is-hidden');\n      this.cookieToggle.classList.add('is-hidden');\n    } else {\n      this.setSubscribeText('Subscribe');\n      this.shareToggle.classList.remove('is-hidden');\n      this.cookieToggle.classList.remove('is-hidden');\n    }\n  });\n\n  // slide up overlay and show share tab\n  this.shareToggle.addEventListener('click', ({ target }) => {\n    this.sharingTab.classList.add('is-visible');\n    this.subscriptionsTab.classList.remove('is-visible');\n    this.cookieTab.classList.remove('is-visible');\n    this.overlay.classList.toggle('is-up');\n\n    if (target.offsetParent.classList.contains('is-up')) {\n      playerEvent('share');\n      this.setShareText('&#xe209 Hide');\n      this.subscribeToggle.classList.add('is-hidden');\n      this.cookieToggle.classList.add('is-hidden');\n    } else {\n      this.setShareText('Share');\n      this.subscribeToggle.classList.remove('is-hidden');\n      this.cookieToggle.classList.remove('is-hidden');\n    }\n  });\n\n  // slide up overlay and show cookie info\n  this.cookieToggle.addEventListener('click', ({ target }) => {\n    this.cookieTab.classList.add('is-visible');\n    this.subscriptionsTab.classList.remove('is-visible');\n    this.sharingTab.classList.remove('is-visible');\n    this.overlay.classList.toggle('is-up');\n\n    if (target.offsetParent.classList.contains('is-up')) {\n      playerEvent('cookie');\n      this.setCookieText('&#xe209 Hide');\n      this.subscribeToggle.classList.add('is-hidden');\n      this.shareToggle.classList.add('is-hidden');\n    } else {\n      this.setCookieText('Cookie Policy');\n      this.subscribeToggle.classList.remove('is-hidden');\n      this.shareToggle.classList.remove('is-hidden');\n    }\n  });\n\n  // Toggle copy text switch on click\n  this.embedBtn.addEventListener('click', ({ target }) => {\n    playerEvent('embed');\n    this.embedBtn.classList.add('is-copied');\n    setTimeout(() => {\n      this.embedBtn.classList.remove('is-copied');\n    }, 1500);\n  });\n}\n\nexport default class PlayerDOM {\n  timer = document.getElementById('timer');\n  playBtn = document.getElementById('play');\n  caddy = document.getElementById('caddy');\n  waveform = document.getElementById('waveform');\n  progress = document.getElementById('progress');\n  scrubber = document.getElementById('scrubber');\n  subscribeToggle = document.getElementById('subscribe-toggle');\n  subscriptionsTab = document.getElementById('subscriptions-tab');\n  overlay = document.getElementById('overlay-container');\n  shareToggle = document.getElementById('share-toggle');\n  sharingTab = document.getElementById('sharing-tab');\n  cookieToggle = document.getElementById('cookie-toggle');\n  cookieTab = document.getElementById('cookie-tab');\n  controls = document.getElementById('controls');\n  episodeInfo = document.getElementById('episode-info');\n  embedBtn = document.getElementById('embed');\n  loader = document.getElementById('loader');\n  logo = document.getElementById('logo');\n\n  constructor(player, { hideBranding }) {\n    initializeEventListeners.call(this, player);\n    this.renderTime(player.duration);\n\n    if (hideBranding) {\n      this.logo.parentNode.removeChild(this.logo);\n    }\n  }\n\n  setScrubberWidth(num) {\n    this.scrubber.style.width = `${num}px`;\n  }\n\n  setSubscribeText(text) {\n    this.subscribeToggle.innerHTML = text;\n  }\n\n  setShareText(text) {\n    this.shareToggle.innerHTML = text;\n  }\n\n  setCookieText(text) {\n    this.cookieToggle.innerHTML = text;\n  }\n\n  setProgress(progress) {\n    const percentage = (progress * 100).toFixed(1);\n    if (!this.progressLock && percentage !== this.currentPercentage) {\n      this.currentPercentage = percentage;\n      this.progress.style.width = `${percentage}%`;\n\n      this.progressLock = true;\n      setTimeout(() => {\n        this.progressLock = false;\n        // timeout time is smoothed out by progress css transition\n      }, 200);\n    }\n  }\n\n  setLoading(bool) {\n    bool\n      ? this.loader.classList.add('is-loading')\n      : this.loader.classList.remove('is-loading');\n  }\n\n  setPlaying(bool) {\n    bool\n      ? this.playBtn.classList.add('is-playing')\n      : this.playBtn.classList.remove('is-playing');\n  }\n\n  renderTime(secs) {\n    const roundedSeconds = Math.round(secs);\n    // only render if changed\n    if (roundedSeconds !== this.currentSeconds) {\n      this.currentSeconds = roundedSeconds;\n      this.timer.innerHTML = formatTime(roundedSeconds);\n    }\n  }\n\n  disableSharing() {\n    this.shareToggle.classList.add('is-hidden');\n    this.subscribeToggle.classList.add('is-hidden');\n  }\n\n  renderAudioPosition(seekPos, duration) {\n    this.renderTime(Math.round(seekPos));\n    this.setProgress(seekPos / duration);\n  }\n}\n","import SVG from 'svg.js';\nimport debounce from 'debounce';\nimport defaultData from './default_waveform.json';\n\nconst waveformHeight = 60;\n// needs to match constant in waveforms controller\nconst arcDiam = 4.5;\n\nfunction sampleData(data, width) {\n  if (width < arcDiam) {\n    return data;\n  }\n  let factor = data.length / (width / arcDiam);\n  factor = Math.round(factor / 2) * 2;\n\n  if (factor === 0) {\n    return data;\n  }\n\n  let ctr = 0;\n  let sumA = 0;\n  let sumB = 0;\n  const sampled = [0, 0]; // prepend silence\n  for (let a = 0, b = 1; b < data.length; a += 2, b += 2) {\n    sumA += data[a];\n    sumB += data[b];\n    ctr++;\n\n    if (ctr !== 0 && ctr % factor === 0) {\n      sampled.push(sumA / factor);\n      sampled.push(sumB / factor);\n      sumA = 0;\n      sumB = 0;\n    }\n  }\n  // append silence\n  sampled.push(0);\n  sampled.push(0);\n\n  return sampled;\n}\n\nexport default class Waveform {\n  waveformNode = document.getElementById('waveform');\n  progressNode = document.getElementById('progress');\n\n  constructor({ isLightPlayer, isTilePlayer }) {\n    this.arcDir = 0;\n    this.centerLine = 30;\n    this.waveformStrokeColor = '#eaeaef';\n    this.progressStrokeColor = '#7474ec';\n    this.isTilePlayer = isTilePlayer;\n    this.data = this.randomizeWaveform(defaultData);\n    if (isTilePlayer) {\n      this.waveformStrokeColor = '#3b3f4d';\n    }\n    if (isLightPlayer) {\n      this.waveformStrokeColor = '#555555';\n    }\n\n    // Redraw on resize\n    window.addEventListener('resize', debounce(this.redraw.bind(this), 200));\n  }\n\n  draw() {\n    this.width = this.waveformNode.offsetWidth;\n    this.height = this.waveformNode.offsetHeight;\n\n    if (this.isTilePlayer) {\n      this.drawLine();\n    } else {\n      this.drawWave();\n    }\n  }\n\n  drawLine() {\n    const wform = SVG('waveform').size(this.width, this.height);\n\n    wform.rect(this.width, this.height).attr({\n      fill: 'none',\n      'stroke-width': this.height,\n      stroke: this.waveformStrokeColor\n    });\n\n    wform.viewbox(0, 0, wform.bbox().width, this.height);\n\n    const prog = SVG('progress').size(this.width, this.height);\n\n    prog.viewbox(0, 0, wform.bbox().width, this.height);\n\n    prog.rect(this.width, this.height).attr({\n      fill: 'none',\n      'stroke-width': this.height,\n      stroke: this.progressStrokeColor\n    });\n  }\n\n  drawWave() {\n    const sampledData = sampleData(this.data, this.width);\n    this.buildPath(sampledData);\n\n    const wform = SVG('waveform').size(this.width, this.height);\n\n    wform.path(this.path).attr({\n      fill: 'none',\n      'stroke-width': 1.2,\n      stroke: this.waveformStrokeColor\n    });\n\n    wform.viewbox(0, 0, wform.bbox().width, waveformHeight);\n\n    const prog = SVG('progress').size(this.width, this.height);\n\n    prog.viewbox(0, 0, wform.bbox().width, waveformHeight);\n\n    prog.path(this.path).attr({\n      fill: 'none',\n      'stroke-width': 1.6,\n      stroke: this.progressStrokeColor\n    });\n  }\n\n  redraw() {\n    this.waveformNode.innerHTML = '';\n    this.progressNode.innerHTML = '';\n    this.draw();\n  }\n\n  buildPath(data) {\n    this.path = 'M 0 30';\n    // Generate SVG path from waveform data\n    const maxWave = Math.max.apply(null, data);\n    const minWave = Math.min.apply(null, data);\n    const scaleFactor =\n      (this.height - 10) / 2 / Math.max(maxWave, Math.abs(minWave));\n    data\n      .map(element => element * scaleFactor)\n      .forEach((element, index) => {\n        if (data[index - 1] === element) {\n          this.path += `${this.arcPath()}${(index + 1) * arcDiam} ${\n            this.centerLine - element\n          }`;\n        } else {\n          this.path += ` L ${index * arcDiam} ${\n            this.centerLine - element\n          }${this.arcPath()}${(index + 1) * arcDiam} ${\n            this.centerLine - element\n          }`;\n        }\n      });\n  }\n\n  arcPath() {\n    if (this.arcDir === 1) {\n      this.arcDir = 0;\n      return ' A 2.25 2.25 0 0 1 ';\n    } else {\n      this.arcDir = 1;\n      return ' A 2.25 2.25 0 0 0 ';\n    }\n  }\n\n  randomizeWaveform(data) {\n    data = data.map(point => {\n      if (!point) return 0;\n      let add = Math.random() >= 0.5;\n      let value = Math.round(Math.random(1, 50) * 100);\n      let newPoint = add ? point + value : point - value;\n      return newPoint;\n    });\n    return data;\n  }\n\n  setError() {\n    const container = document.getElementsByClassName('player-container')[0];\n    const errContainer = document.createElement('div');\n    const msgContainer = document.createElement('div');\n    const msg = document.createTextNode(\n      'Episode currently unavailable. Try refreshing the page.'\n    );\n    const logo = document.createElement('div');\n    const copyrightContainer = document.createElement('div');\n    const copyright = document.createTextNode(\n      'Copyright © 2019 Megaphone, LLC. All rights reserved'\n    );\n    logo.classList.add('megaphone-icon', 'waveform-error__logo');\n    copyrightContainer.classList.add('waveform-error__copyright');\n    msgContainer.classList.add('waveform-error__message');\n    msgContainer.appendChild(msg);\n    copyrightContainer.appendChild(copyright);\n    errContainer.appendChild(msgContainer);\n    errContainer.appendChild(logo);\n    errContainer.appendChild(copyrightContainer);\n    errContainer.classList.add('waveform-error');\n    container.insertBefore(errContainer, container.firstChild);\n\n    const scrubber = document.getElementById('scrubber');\n    scrubber.parentNode.removeChild(scrubber);\n  }\n}\n","import 'player.js';\nconst Receiver = window.playerjs.Receiver;\n\n// embedly receiver via player.js library\nexport default function playerReceiver(player) {\n  const receiver = new Receiver();\n  receiver.on('play', () => {\n    player.play();\n    receiver.emit('play');\n  });\n\n  receiver.on('pause', () => {\n    player.pause();\n    receiver.emit('pause');\n  });\n\n  receiver.on('getPaused', callback => {\n    callback(!player.playing);\n  });\n\n  receiver.on('mute', () => {\n    player.mute(true);\n  });\n\n  receiver.on('unmute', () => {\n    player.mute(false);\n  });\n\n  receiver.on('getMuted', callback => {\n    callback(!!player.muted);\n  });\n\n  receiver.on('setVolume', vol => {\n    player.setVolume(vol / 100);\n  });\n\n  receiver.on('getVolume', callback => {\n    callback(player.volume * 100);\n  });\n\n  receiver.on('getDuration', callback => {\n    callback(player.duration);\n  });\n\n  receiver.on('setCurrentTime', time => {\n    player.seek(time / player.duration);\n  });\n\n  receiver.on('getCurrentTime', callback => {\n    callback(player.position);\n  });\n\n  receiver.on('setLoop', shouldLoop => {\n    player.toggleLoop(shouldLoop);\n  });\n\n  receiver.on('getLoop', callback => {\n    callback(!!player.looping);\n  });\n\n  receiver.ready();\n  return receiver;\n}\n","import PlayerDOM from 'player/PlayerDOM';\nimport Waveform from 'player/Waveform';\nimport playerReceiver from 'player/playerReceiver';\nimport { playerEvent } from 'player/utils';\nimport { Howl } from 'howler';\nimport Clipboard from 'clipboard';\n\nfunction parseQueryParameters() {\n  const queryString = window.location.search;\n  const disableSharing = /sharing=false/.test(queryString);\n  const isLightPlayer = /light=true/.test(queryString);\n  const isTilePlayer = /tile=true/.test(queryString);\n  const startTime = (queryString.match(/start=(\\d*\\.?\\d*)(&|$)/) || [])[1];\n  return { disableSharing, startTime, isLightPlayer, isTilePlayer };\n}\n\nexport default class Player {\n  constructor(episode, { hideBranding }) {\n    this.episode = episode;\n    this.volume = 1.0;\n    this.sound = new Howl({\n      src: [episode.mediaUrl],\n      html5: true,\n      preload: false,\n      volume: this.volume,\n      onplay: () => {\n        window.requestAnimationFrame(this.step.bind(this));\n        playerEvent('play');\n        this.DOM.setPlaying(true);\n      },\n      onload: () => {\n        playerEvent('load.sound');\n        // start from position selected by user\n        this.duration = this.sound._duration;\n        this.sound.seek(this.position);\n        this.DOM.setLoading(false);\n      },\n      onend: () => {\n        playerEvent('finish');\n        if (!this.looping) {\n          this.DOM.setPlaying(false);\n          this.receiver.emit('ended');\n        } else {\n          playerEvent('loop');\n        }\n      },\n      onpause: () => {\n        this.DOM.setPlaying(false);\n        playerEvent('pause');\n      }\n    });\n\n    const { disableSharing, startTime, isLightPlayer, isTilePlayer } =\n      parseQueryParameters.apply(this);\n    this.duration = episode.duration;\n    // render view\n    this.waveform = new Waveform({\n      isLightPlayer,\n      isTilePlayer\n    });\n    this.waveform.draw();\n    this.DOM = new PlayerDOM(this, { hideBranding });\n\n    if (disableSharing) {\n      this.DOM.disableSharing();\n    } else {\n      new Clipboard('#embed'); // eslint-disable-line no-new\n    }\n    if (startTime) {\n      this.position = Math.max(0, Math.min(startTime, episode.duration));\n      this.DOM.renderAudioPosition(this.position, this.duration);\n    } else {\n      this.position = 0;\n    }\n    this.receiver = playerReceiver(this);\n  }\n\n  play() {\n    if (this.sound.state() !== 'loaded') {\n      this.DOM.setLoading(true);\n    }\n    this.sound.play();\n    parent.postMessage(\n      JSON.stringify({\n        context: 'player.js',\n        version: '0.0.11',\n        event: 'play'\n      }),\n      '*'\n    );\n  }\n\n  get playing() {\n    return this.sound.playing();\n  }\n\n  pause() {\n    this.sound.pause();\n    parent.postMessage(\n      JSON.stringify({\n        context: 'player.js',\n        version: '0.0.11',\n        event: 'pause'\n      }),\n      '*'\n    );\n  }\n\n  mute(shouldMute) {\n    this.muted = shouldMute;\n    this.sound.mute(shouldMute);\n  }\n\n  setVolume(vol) {\n    this.volume = vol;\n    this.sound.volume(vol);\n  }\n\n  toggleLoop(shouldLoop) {\n    this.looping = shouldLoop;\n    this.sound.loop(shouldLoop);\n  }\n\n  seek(percentage) {\n    const newSeekPos = this.duration * percentage;\n    this.position = newSeekPos;\n    if (this.sound.state() === 'loaded') {\n      this.sound.seek(newSeekPos);\n    }\n    this.DOM.renderAudioPosition(newSeekPos, this.duration);\n  }\n\n  step() {\n    const seekPos = this.sound.seek();\n    this.position = seekPos;\n    this.DOM.renderAudioPosition(seekPos, this.duration);\n\n    this.receiver.emit('timeupdate', {\n      seconds: Math.round(seekPos),\n      duration: this.duration\n    });\n    if (this.sound.playing()) {\n      window.requestAnimationFrame(this.step.bind(this));\n    }\n  }\n}\n","import Player from './Player';\n\nwindow.Player = Player;\n","/*!\n *  howler.js v2.0.4\n *  howlerjs.com\n *\n *  (c) 2013-2017, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto iOS enabler.\n      self.mobileAutoEnable = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.value = vol;\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.value = muted ? 0 : self._volume;\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'running' : 'running';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Mobile browsers will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _enableMobileAudio: function() {\n      var self = this || Howler;\n\n      // Only run this on mobile devices if audio isn't already eanbled.\n      var isMobile = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(self._navigator && self._navigator.userAgent);\n      var isTouch = !!(('ontouchend' in window) || (self._navigator && self._navigator.maxTouchPoints > 0) || (self._navigator && self._navigator.msMaxTouchPoints > 0));\n      if (self._mobileEnabled || !self.ctx || (!isMobile && !isTouch)) {\n        return;\n      }\n\n      self._mobileEnabled = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function() {\n        // Fix Android can not play in suspend state.\n        Howler._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._mobileEnabled = true;\n          self.mobileAutoEnable = false;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchend', unlock, true);\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchend', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio on iOS.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.mobileAutoEnable) {\n        Howler._enableMobileAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        var num = 0;\n        for (var i=0; i<self._sounds.length; i++) {\n          if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n            num++;\n            id = self._sounds[i]._id;\n          }\n        }\n\n        if (num === 1) {\n          sprite = null;\n        } else {\n          id = null;\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Makr this sounded as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          setTimeout(function() {\n            self._emit('play', sound._id);\n          }, 0);\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n      // Update the parameters of the sound\n      sound._paused = false;\n      sound._ended = false;\n      sound._sprite = sprite;\n      sound._seek = seek;\n      sound._start = self._sprite[sprite][0] / 1000;\n      sound._stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n            }, 0);\n          }\n        };\n\n        var isRunning = (Howler.state === 'running');\n        if (self._state === 'loaded' && isRunning) {\n          playWebAudio();\n        } else {\n          // Wait for the audio to load and then begin playback.\n          var event = !isRunning && self._state === 'loaded' ? 'resume' : 'load';\n          self.once(event, playWebAudio, isRunning ? sound._id : null);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n          node.play();\n\n          // Setup the new end timer.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            self._emit('play', sound._id);\n          }\n        };\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (self._state === 'loaded' && (window && window.ejecta || !node.readyState && Howler._navigator.isCocoonJS));\n        if (node.readyState === 4 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passsed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n      var diff = Math.abs(from - to);\n      var dir = from > to ? 'out' : 'in';\n      var steps = diff / 0.01;\n      var stepLen = (steps > 0) ? len / steps : len;\n\n      // Since browsers clamp timeouts to 4ms, we need to clamp our steps to that too.\n      if (stepLen < 4) {\n        steps = Math.ceil(steps / (4 / stepLen));\n        stepLen = 4;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          var vol = from;\n          sound._interval = setInterval(function(soundId, sound) {\n            // Update the volume amount, but only if the volume should change.\n            if (steps > 0) {\n              vol += (dir === 'in' ? 0.01 : -0.01);\n            }\n\n            // Make sure the volume is in the right bounds.\n            vol = Math.max(0, vol);\n            vol = Math.min(1, vol);\n\n            // Round to within 2 decimal points.\n            vol = Math.round(vol * 100) / 100;\n\n            // Change the volume.\n            if (self._webAudio) {\n              if (typeof id === 'undefined') {\n                self._volume = vol;\n              }\n\n              sound._volume = vol;\n            } else {\n              self.volume(vol, soundId, true);\n            }\n\n            // When the fade is complete, stop it and fire event.\n            if ((to < from && vol <= to) || (to > from && vol >= to)) {\n              clearInterval(sound._interval);\n              sound._interval = null;\n              self.volume(to, soundId);\n              self._emit('fade', soundId);\n            }\n          }.bind(self, ids[i], sound), stepLen);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            sound._rateSeek = self.seek(id[i]);\n            sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.value = rate;\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Restart the playback if the sound was playing.\n          if (playing) {\n            self.play(id, true);\n          }\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node) {\n            sound._node.currentTime = seek;\n          }\n\n          self._emit('seek', id);\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n          if (!checkIE) {\n            sounds[i]._node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n          }\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n\n        // Remove the references in the global Howler object.\n        var index = Howler._howls.indexOf(self);\n        if (index >= 0) {\n          Howler._howls.splice(index, 1);\n        }\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function() {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // don't move onto the next task until this one is done\n        self.once(task.event, function() {\n          self._queue.shift();\n          self._loadQueue();\n        });\n\n        task.action();\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && self._node && !self._node.ended) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        clearTimeout(self._endTimers[id]);\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop;\n      }\n      sound._node.bufferSource.playbackRate.value = sound._rate;\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n\n      if (self._scratchBuffer) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        try { node.bufferSource.buffer = self._scratchBuffer; } catch(e) {}\n      }\n      node.bufferSource = null;\n\n      return self;\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else {\n        self._node = new Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Decode the buffer into an audio source.\n    Howler.ctx.decodeAudioData(arraybuffer, function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      }\n    }, function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    });\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && Howler._navigator.standalone && !safari || Howler._navigator && !Howler._navigator.standalone && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.value = Howler._muted ? 0 : 1;\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.0.4\n *  howlerjs.com\n *\n *  (c) 2013-2017, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n  \n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n      self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n      self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              sound._panner.setPosition(pan, 0, 0);\n            } else {\n              sound._panner.pan.value = pan;\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or\n   * all in the group. The most common usage is to set the 'x' position for\n   * left/right panning. Setting any value higher than 1.0 will begin to\n   * decrease the volume of the sound as it moves further away.\n   * @param  {Number} x  The x-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} y  The y-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} z  The z-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setPosition(x, y, z);\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setOrientation(x, y, z);\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) There will be no volume reduction inside this angle.\n   *     coneOuterAngle - (360 by default) The volume will be reduced to a constant value of\n   *                      `coneOuterGain` outside this angle.\n   *     coneOuterGain - (0 by default) The amount of volume reduction outside of `coneOuterAngle`.\n   *     distanceModel - ('inverse' by default) Determines algorithm to use to reduce volume as audio moves\n   *                      away from listener. Can be `linear`, `inverse` or `exponential`.\n   *     maxDistance - (10000 by default) Volume won't reduce between source/listener beyond this distance.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *     refDistance - (1 by default) A reference distance for reducing volume as the source\n   *                    moves away from the listener.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener.\n   * \n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : self._distanceModel,\n            maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : self._maxDistance,\n            panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : self._panningModel,\n            refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : self._refDistance,\n            rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : self._rolloffFactor\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.panningModel = pa.panningModel;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.value = sound._stereo;\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id);\n    }\n  };\n})();\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['module', './clipboard-action', 'tiny-emitter', 'good-listener'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(module, require('./clipboard-action'), require('tiny-emitter'), require('good-listener'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\n        global.clipboard = mod.exports;\n    }\n})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\n    'use strict';\n\n    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\n    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\n    var _goodListener2 = _interopRequireDefault(_goodListener);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    function _possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n\n    var Clipboard = function (_Emitter) {\n        _inherits(Clipboard, _Emitter);\n\n        /**\n         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n         * @param {Object} options\n         */\n        function Clipboard(trigger, options) {\n            _classCallCheck(this, Clipboard);\n\n            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\n\n            _this.resolveOptions(options);\n            _this.listenClick(trigger);\n            return _this;\n        }\n\n        /**\n         * Defines if attributes would be resolved using internal setter functions\n         * or custom functions that were passed in the constructor.\n         * @param {Object} options\n         */\n\n\n        _createClass(Clipboard, [{\n            key: 'resolveOptions',\n            value: function resolveOptions() {\n                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n                this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n                this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n                this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n            }\n        }, {\n            key: 'listenClick',\n            value: function listenClick(trigger) {\n                var _this2 = this;\n\n                this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n                    return _this2.onClick(e);\n                });\n            }\n        }, {\n            key: 'onClick',\n            value: function onClick(e) {\n                var trigger = e.delegateTarget || e.currentTarget;\n\n                if (this.clipboardAction) {\n                    this.clipboardAction = null;\n                }\n\n                this.clipboardAction = new _clipboardAction2.default({\n                    action: this.action(trigger),\n                    target: this.target(trigger),\n                    text: this.text(trigger),\n                    trigger: trigger,\n                    emitter: this\n                });\n            }\n        }, {\n            key: 'defaultAction',\n            value: function defaultAction(trigger) {\n                return getAttributeValue('action', trigger);\n            }\n        }, {\n            key: 'defaultTarget',\n            value: function defaultTarget(trigger) {\n                var selector = getAttributeValue('target', trigger);\n\n                if (selector) {\n                    return document.querySelector(selector);\n                }\n            }\n        }, {\n            key: 'defaultText',\n            value: function defaultText(trigger) {\n                return getAttributeValue('text', trigger);\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.listener.destroy();\n\n                if (this.clipboardAction) {\n                    this.clipboardAction.destroy();\n                    this.clipboardAction = null;\n                }\n            }\n        }], [{\n            key: 'isSupported',\n            value: function isSupported() {\n                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n                var actions = typeof action === 'string' ? [action] : action;\n                var support = !!document.queryCommandSupported;\n\n                actions.forEach(function (action) {\n                    support = support && !!document.queryCommandSupported(action);\n                });\n\n                return support;\n            }\n        }]);\n\n        return Clipboard;\n    }(_tinyEmitter2.default);\n\n    /**\n     * Helper function to retrieve attribute value.\n     * @param {String} suffix\n     * @param {Element} element\n     */\n    function getAttributeValue(suffix, element) {\n        var attribute = 'data-clipboard-' + suffix;\n\n        if (!element.hasAttribute(attribute)) {\n            return;\n        }\n\n        return element.getAttribute(attribute);\n    }\n\n    module.exports = Clipboard;\n});","/*!\n* svg.js - A lightweight library for manipulating and animating SVG.\n* @version 2.6.2\n* https://svgdotjs.github.io/\n*\n* @copyright Wout Fierens <wout@mick-wout.com>\n* @license MIT\n*\n* BUILT: Mon Jun 05 2017 11:33:23 GMT+0200 (Mitteleuropäische Sommerzeit)\n*/;\n(function(root, factory) {\r\n  /* istanbul ignore next */\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(function(){\r\n      return factory(root, root.document)\r\n    })\r\n  } else if (typeof exports === 'object') {\r\n    module.exports = root.document ? factory(root, root.document) : function(w){ return factory(w, w.document) }\r\n  } else {\r\n    root.SVG = factory(root, root.document)\r\n  }\r\n}(typeof window !== \"undefined\" ? window : this, function(window, document) {\r\n\r\n// The main wrapping element\r\nvar SVG = this.SVG = function(element) {\r\n  if (SVG.supported) {\r\n    element = new SVG.Doc(element)\r\n\r\n    if(!SVG.parser.draw)\r\n      SVG.prepare()\r\n\r\n    return element\r\n  }\r\n}\r\n\r\n// Default namespaces\r\nSVG.ns    = 'http://www.w3.org/2000/svg'\r\nSVG.xmlns = 'http://www.w3.org/2000/xmlns/'\r\nSVG.xlink = 'http://www.w3.org/1999/xlink'\r\nSVG.svgjs = 'http://svgjs.com/svgjs'\r\n\r\n// Svg support test\r\nSVG.supported = (function() {\r\n  return !! document.createElementNS &&\r\n         !! document.createElementNS(SVG.ns,'svg').createSVGRect\r\n})()\r\n\r\n// Don't bother to continue if SVG is not supported\r\nif (!SVG.supported) return false\r\n\r\n// Element id sequence\r\nSVG.did  = 1000\r\n\r\n// Get next named element id\r\nSVG.eid = function(name) {\r\n  return 'Svgjs' + capitalize(name) + (SVG.did++)\r\n}\r\n\r\n// Method for element creation\r\nSVG.create = function(name) {\r\n  // create element\r\n  var element = document.createElementNS(this.ns, name)\r\n\r\n  // apply unique id\r\n  element.setAttribute('id', this.eid(name))\r\n\r\n  return element\r\n}\r\n\r\n// Method for extending objects\r\nSVG.extend = function() {\r\n  var modules, methods, key, i\r\n\r\n  // Get list of modules\r\n  modules = [].slice.call(arguments)\r\n\r\n  // Get object with extensions\r\n  methods = modules.pop()\r\n\r\n  for (i = modules.length - 1; i >= 0; i--)\r\n    if (modules[i])\r\n      for (key in methods)\r\n        modules[i].prototype[key] = methods[key]\r\n\r\n  // Make sure SVG.Set inherits any newly added methods\r\n  if (SVG.Set && SVG.Set.inherit)\r\n    SVG.Set.inherit()\r\n}\r\n\r\n// Invent new element\r\nSVG.invent = function(config) {\r\n  // Create element initializer\r\n  var initializer = typeof config.create == 'function' ?\r\n    config.create :\r\n    function() {\r\n      this.constructor.call(this, SVG.create(config.create))\r\n    }\r\n\r\n  // Inherit prototype\r\n  if (config.inherit)\r\n    initializer.prototype = new config.inherit\r\n\r\n  // Extend with methods\r\n  if (config.extend)\r\n    SVG.extend(initializer, config.extend)\r\n\r\n  // Attach construct method to parent\r\n  if (config.construct)\r\n    SVG.extend(config.parent || SVG.Container, config.construct)\r\n\r\n  return initializer\r\n}\r\n\r\n// Adopt existing svg elements\r\nSVG.adopt = function(node) {\r\n  // check for presence of node\r\n  if (!node) return null\r\n\r\n  // make sure a node isn't already adopted\r\n  if (node.instance) return node.instance\r\n\r\n  // initialize variables\r\n  var element\r\n\r\n  // adopt with element-specific settings\r\n  if (node.nodeName == 'svg')\r\n    element = node.parentNode instanceof window.SVGElement ? new SVG.Nested : new SVG.Doc\r\n  else if (node.nodeName == 'linearGradient')\r\n    element = new SVG.Gradient('linear')\r\n  else if (node.nodeName == 'radialGradient')\r\n    element = new SVG.Gradient('radial')\r\n  else if (SVG[capitalize(node.nodeName)])\r\n    element = new SVG[capitalize(node.nodeName)]\r\n  else\r\n    element = new SVG.Element(node)\r\n\r\n  // ensure references\r\n  element.type  = node.nodeName\r\n  element.node  = node\r\n  node.instance = element\r\n\r\n  // SVG.Class specific preparations\r\n  if (element instanceof SVG.Doc)\r\n    element.namespace().defs()\r\n\r\n  // pull svgjs data from the dom (getAttributeNS doesn't work in html5)\r\n  element.setData(JSON.parse(node.getAttribute('svgjs:data')) || {})\r\n\r\n  return element\r\n}\r\n\r\n// Initialize parsing element\r\nSVG.prepare = function() {\r\n  // Select document body and create invisible svg element\r\n  var body = document.getElementsByTagName('body')[0]\r\n    , draw = (body ? new SVG.Doc(body) : SVG.adopt(document.documentElement).nested()).size(2, 0)\r\n\r\n  // Create parser object\r\n  SVG.parser = {\r\n    body: body || document.documentElement\r\n  , draw: draw.style('opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden').node\r\n  , poly: draw.polyline().node\r\n  , path: draw.path().node\r\n  , native: SVG.create('svg')\r\n  }\r\n}\r\n\r\nSVG.parser = {\r\n  native: SVG.create('svg')\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  if(!SVG.parser.draw)\r\n    SVG.prepare()\r\n}, false)\r\n\n// Storage for regular expressions\r\nSVG.regex = {\r\n  // Parse unit value\r\n  numberAndUnit:    /^([+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?)([a-z%]*)$/i\r\n\r\n  // Parse hex value\r\n, hex:              /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i\r\n\r\n  // Parse rgb value\r\n, rgb:              /rgb\\((\\d+),(\\d+),(\\d+)\\)/\r\n\r\n  // Parse reference id\r\n, reference:        /#([a-z0-9\\-_]+)/i\r\n\r\n  // splits a transformation chain\r\n, transforms:       /\\)\\s*,?\\s*/\r\n\r\n  // Whitespace\r\n, whitespace:       /\\s/g\r\n\r\n  // Test hex value\r\n, isHex:            /^#[a-f0-9]{3,6}$/i\r\n\r\n  // Test rgb value\r\n, isRgb:            /^rgb\\(/\r\n\r\n  // Test css declaration\r\n, isCss:            /[^:]+:[^;]+;?/\r\n\r\n  // Test for blank string\r\n, isBlank:          /^(\\s+)?$/\r\n\r\n  // Test for numeric string\r\n, isNumber:         /^[+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i\r\n\r\n  // Test for percent value\r\n, isPercent:        /^-?[\\d\\.]+%$/\r\n\r\n  // Test for image url\r\n, isImage:          /\\.(jpg|jpeg|png|gif|svg)(\\?[^=]+.*)?/i\r\n\r\n  // split at whitespace and comma\r\n, delimiter:        /[\\s,]+/\r\n\r\n  // The following regex are used to parse the d attribute of a path\r\n\r\n  // Matches all hyphens which are not after an exponent\r\n, hyphen:           /([^e])\\-/gi\r\n\r\n  // Replaces and tests for all path letters\r\n, pathLetters:      /[MLHVCSQTAZ]/gi\r\n\r\n  // yes we need this one, too\r\n, isPathLetter:     /[MLHVCSQTAZ]/i\r\n\r\n  // matches 0.154.23.45\r\n, numbersWithDots:  /((\\d?\\.\\d+(?:e[+-]?\\d+)?)((?:\\.\\d+(?:e[+-]?\\d+)?)+))+/gi\r\n\r\n  // matches .\r\n, dots:             /\\./g\r\n}\r\n\nSVG.utils = {\r\n  // Map function\r\n  map: function(array, block) {\r\n    var i\r\n      , il = array.length\r\n      , result = []\r\n\r\n    for (i = 0; i < il; i++)\r\n      result.push(block(array[i]))\r\n\r\n    return result\r\n  }\r\n\r\n  // Filter function\r\n, filter: function(array, block) {\r\n    var i\r\n      , il = array.length\r\n      , result = []\r\n\r\n    for (i = 0; i < il; i++)\r\n      if (block(array[i]))\r\n        result.push(array[i])\r\n\r\n    return result\r\n  }\r\n\r\n  // Degrees to radians\r\n, radians: function(d) {\r\n    return d % 360 * Math.PI / 180\r\n  }\r\n\r\n  // Radians to degrees\r\n, degrees: function(r) {\r\n    return r * 180 / Math.PI % 360\r\n  }\r\n\r\n, filterSVGElements: function(nodes) {\r\n    return this.filter( nodes, function(el) { return el instanceof window.SVGElement })\r\n  }\r\n\r\n}\n\r\nSVG.defaults = {\r\n  // Default attribute values\r\n  attrs: {\r\n    // fill and stroke\r\n    'fill-opacity':     1\r\n  , 'stroke-opacity':   1\r\n  , 'stroke-width':     0\r\n  , 'stroke-linejoin':  'miter'\r\n  , 'stroke-linecap':   'butt'\r\n  , fill:               '#000000'\r\n  , stroke:             '#000000'\r\n  , opacity:            1\r\n    // position\r\n  , x:                  0\r\n  , y:                  0\r\n  , cx:                 0\r\n  , cy:                 0\r\n    // size\r\n  , width:              0\r\n  , height:             0\r\n    // radius\r\n  , r:                  0\r\n  , rx:                 0\r\n  , ry:                 0\r\n    // gradient\r\n  , offset:             0\r\n  , 'stop-opacity':     1\r\n  , 'stop-color':       '#000000'\r\n    // text\r\n  , 'font-size':        16\r\n  , 'font-family':      'Helvetica, Arial, sans-serif'\r\n  , 'text-anchor':      'start'\r\n  }\r\n\r\n}\n// Module for color convertions\r\nSVG.Color = function(color) {\r\n  var match\r\n\r\n  // initialize defaults\r\n  this.r = 0\r\n  this.g = 0\r\n  this.b = 0\r\n\r\n  if(!color) return\r\n\r\n  // parse color\r\n  if (typeof color === 'string') {\r\n    if (SVG.regex.isRgb.test(color)) {\r\n      // get rgb values\r\n      match = SVG.regex.rgb.exec(color.replace(SVG.regex.whitespace,''))\r\n\r\n      // parse numeric values\r\n      this.r = parseInt(match[1])\r\n      this.g = parseInt(match[2])\r\n      this.b = parseInt(match[3])\r\n\r\n    } else if (SVG.regex.isHex.test(color)) {\r\n      // get hex values\r\n      match = SVG.regex.hex.exec(fullHex(color))\r\n\r\n      // parse numeric values\r\n      this.r = parseInt(match[1], 16)\r\n      this.g = parseInt(match[2], 16)\r\n      this.b = parseInt(match[3], 16)\r\n\r\n    }\r\n\r\n  } else if (typeof color === 'object') {\r\n    this.r = color.r\r\n    this.g = color.g\r\n    this.b = color.b\r\n\r\n  }\r\n\r\n}\r\n\r\nSVG.extend(SVG.Color, {\r\n  // Default to hex conversion\r\n  toString: function() {\r\n    return this.toHex()\r\n  }\r\n  // Build hex value\r\n, toHex: function() {\r\n    return '#'\r\n      + compToHex(this.r)\r\n      + compToHex(this.g)\r\n      + compToHex(this.b)\r\n  }\r\n  // Build rgb value\r\n, toRgb: function() {\r\n    return 'rgb(' + [this.r, this.g, this.b].join() + ')'\r\n  }\r\n  // Calculate true brightness\r\n, brightness: function() {\r\n    return (this.r / 255 * 0.30)\r\n         + (this.g / 255 * 0.59)\r\n         + (this.b / 255 * 0.11)\r\n  }\r\n  // Make color morphable\r\n, morph: function(color) {\r\n    this.destination = new SVG.Color(color)\r\n\r\n    return this\r\n  }\r\n  // Get morphed color at given position\r\n, at: function(pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    // normalise pos\r\n    pos = pos < 0 ? 0 : pos > 1 ? 1 : pos\r\n\r\n    // generate morphed color\r\n    return new SVG.Color({\r\n      r: ~~(this.r + (this.destination.r - this.r) * pos)\r\n    , g: ~~(this.g + (this.destination.g - this.g) * pos)\r\n    , b: ~~(this.b + (this.destination.b - this.b) * pos)\r\n    })\r\n  }\r\n\r\n})\r\n\r\n// Testers\r\n\r\n// Test if given value is a color string\r\nSVG.Color.test = function(color) {\r\n  color += ''\r\n  return SVG.regex.isHex.test(color)\r\n      || SVG.regex.isRgb.test(color)\r\n}\r\n\r\n// Test if given value is a rgb object\r\nSVG.Color.isRgb = function(color) {\r\n  return color && typeof color.r == 'number'\r\n               && typeof color.g == 'number'\r\n               && typeof color.b == 'number'\r\n}\r\n\r\n// Test if given value is a color\r\nSVG.Color.isColor = function(color) {\r\n  return SVG.Color.isRgb(color) || SVG.Color.test(color)\r\n}\n// Module for array conversion\r\nSVG.Array = function(array, fallback) {\r\n  array = (array || []).valueOf()\r\n\r\n  // if array is empty and fallback is provided, use fallback\r\n  if (array.length == 0 && fallback)\r\n    array = fallback.valueOf()\r\n\r\n  // parse array\r\n  this.value = this.parse(array)\r\n}\r\n\r\nSVG.extend(SVG.Array, {\r\n  // Make array morphable\r\n  morph: function(array) {\r\n    this.destination = this.parse(array)\r\n\r\n    // normalize length of arrays\r\n    if (this.value.length != this.destination.length) {\r\n      var lastValue       = this.value[this.value.length - 1]\r\n        , lastDestination = this.destination[this.destination.length - 1]\r\n\r\n      while(this.value.length > this.destination.length)\r\n        this.destination.push(lastDestination)\r\n      while(this.value.length < this.destination.length)\r\n        this.value.push(lastValue)\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Clean up any duplicate points\r\n, settle: function() {\r\n    // find all unique values\r\n    for (var i = 0, il = this.value.length, seen = []; i < il; i++)\r\n      if (seen.indexOf(this.value[i]) == -1)\r\n        seen.push(this.value[i])\r\n\r\n    // set new value\r\n    return this.value = seen\r\n  }\r\n  // Get morphed array at given position\r\n, at: function(pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    // generate morphed array\r\n    for (var i = 0, il = this.value.length, array = []; i < il; i++)\r\n      array.push(this.value[i] + (this.destination[i] - this.value[i]) * pos)\r\n\r\n    return new SVG.Array(array)\r\n  }\r\n  // Convert array to string\r\n, toString: function() {\r\n    return this.value.join(' ')\r\n  }\r\n  // Real value\r\n, valueOf: function() {\r\n    return this.value\r\n  }\r\n  // Parse whitespace separated string\r\n, parse: function(array) {\r\n    array = array.valueOf()\r\n\r\n    // if already is an array, no need to parse it\r\n    if (Array.isArray(array)) return array\r\n\r\n    return this.split(array)\r\n  }\r\n  // Strip unnecessary whitespace\r\n, split: function(string) {\r\n    return string.trim().split(SVG.regex.delimiter).map(parseFloat)\r\n  }\r\n  // Reverse array\r\n, reverse: function() {\r\n    this.value.reverse()\r\n\r\n    return this\r\n  }\r\n, clone: function() {\r\n    var clone = new this.constructor()\r\n    clone.value = array_clone(this.value)\r\n    return clone\r\n  }\r\n})\n// Poly points array\r\nSVG.PointArray = function(array, fallback) {\r\n  SVG.Array.call(this, array, fallback || [[0,0]])\r\n}\r\n\r\n// Inherit from SVG.Array\r\nSVG.PointArray.prototype = new SVG.Array\r\nSVG.PointArray.prototype.constructor = SVG.PointArray\r\n\r\nSVG.extend(SVG.PointArray, {\r\n  // Convert array to string\r\n  toString: function() {\r\n    // convert to a poly point string\r\n    for (var i = 0, il = this.value.length, array = []; i < il; i++)\r\n      array.push(this.value[i].join(','))\r\n\r\n    return array.join(' ')\r\n  }\r\n  // Convert array to line object\r\n, toLine: function() {\r\n    return {\r\n      x1: this.value[0][0]\r\n    , y1: this.value[0][1]\r\n    , x2: this.value[1][0]\r\n    , y2: this.value[1][1]\r\n    }\r\n  }\r\n  // Get morphed array at given position\r\n, at: function(pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    // generate morphed point string\r\n    for (var i = 0, il = this.value.length, array = []; i < il; i++)\r\n      array.push([\r\n        this.value[i][0] + (this.destination[i][0] - this.value[i][0]) * pos\r\n      , this.value[i][1] + (this.destination[i][1] - this.value[i][1]) * pos\r\n      ])\r\n\r\n    return new SVG.PointArray(array)\r\n  }\r\n  // Parse point string and flat array\r\n, parse: function(array) {\r\n    var points = []\r\n\r\n    array = array.valueOf()\r\n\r\n    // if it is an array\r\n    if (Array.isArray(array)) {\r\n      // and it is not flat, there is no need to parse it\r\n      if(Array.isArray(array[0])) {\r\n        return array\r\n      }\r\n    } else { // Else, it is considered as a string\r\n      // parse points\r\n      array = array.trim().split(SVG.regex.delimiter).map(parseFloat)\r\n    }\r\n\r\n    // validate points - https://svgwg.org/svg2-draft/shapes.html#DataTypePoints\r\n    // Odd number of coordinates is an error. In such cases, drop the last odd coordinate.\r\n    if (array.length % 2 !== 0) array.pop()\r\n\r\n    // wrap points in two-tuples and parse points as floats\r\n    for(var i = 0, len = array.length; i < len; i = i + 2)\r\n      points.push([ array[i], array[i+1] ])\r\n\r\n    return points\r\n  }\r\n  // Move point string\r\n, move: function(x, y) {\r\n    var box = this.bbox()\r\n\r\n    // get relative offset\r\n    x -= box.x\r\n    y -= box.y\r\n\r\n    // move every point\r\n    if (!isNaN(x) && !isNaN(y))\r\n      for (var i = this.value.length - 1; i >= 0; i--)\r\n        this.value[i] = [this.value[i][0] + x, this.value[i][1] + y]\r\n\r\n    return this\r\n  }\r\n  // Resize poly string\r\n, size: function(width, height) {\r\n    var i, box = this.bbox()\r\n\r\n    // recalculate position of all points according to new size\r\n    for (i = this.value.length - 1; i >= 0; i--) {\r\n      if(box.width) this.value[i][0] = ((this.value[i][0] - box.x) * width)  / box.width  + box.x\r\n      if(box.height) this.value[i][1] = ((this.value[i][1] - box.y) * height) / box.height + box.y\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Get bounding box of points\r\n, bbox: function() {\r\n    SVG.parser.poly.setAttribute('points', this.toString())\r\n\r\n    return SVG.parser.poly.getBBox()\r\n  }\r\n})\r\n\nvar pathHandlers = {\r\n  M: function(c, p, p0) {\r\n    p.x = p0.x = c[0]\r\n    p.y = p0.y = c[1]\r\n\r\n    return ['M', p.x, p.y]\r\n  },\r\n  L: function(c, p) {\r\n    p.x = c[0]\r\n    p.y = c[1]\r\n    return ['L', c[0], c[1]]\r\n  },\r\n  H: function(c, p) {\r\n    p.x = c[0]\r\n    return ['H', c[0]]\r\n  },\r\n  V: function(c, p) {\r\n    p.y = c[0]\r\n    return ['V', c[0]]\r\n  },\r\n  C: function(c, p) {\r\n    p.x = c[4]\r\n    p.y = c[5]\r\n    return ['C', c[0], c[1], c[2], c[3], c[4], c[5]]\r\n  },\r\n  S: function(c, p) {\r\n    p.x = c[2]\r\n    p.y = c[3]\r\n    return ['S', c[0], c[1], c[2], c[3]]\r\n  },\r\n  Q: function(c, p) {\r\n    p.x = c[2]\r\n    p.y = c[3]\r\n    return ['Q', c[0], c[1], c[2], c[3]]\r\n  },\r\n  T: function(c, p) {\r\n    p.x = c[0]\r\n    p.y = c[1]\r\n    return ['T', c[0], c[1]]\r\n  },\r\n  Z: function(c, p, p0) {\r\n    p.x = p0.x\r\n    p.y = p0.y\r\n    return ['Z']\r\n  },\r\n  A: function(c, p) {\r\n    p.x = c[5]\r\n    p.y = c[6]\r\n    return ['A', c[0], c[1], c[2], c[3], c[4], c[5], c[6]]\r\n  }\r\n}\r\n\r\nvar mlhvqtcsa = 'mlhvqtcsaz'.split('')\r\n\r\nfor(var i = 0, il = mlhvqtcsa.length; i < il; ++i){\r\n  pathHandlers[mlhvqtcsa[i]] = (function(i){\r\n    return function(c, p, p0) {\r\n      if(i == 'H') c[0] = c[0] + p.x\r\n      else if(i == 'V') c[0] = c[0] + p.y\r\n      else if(i == 'A'){\r\n        c[5] = c[5] + p.x,\r\n        c[6] = c[6] + p.y\r\n      }\r\n      else\r\n        for(var j = 0, jl = c.length; j < jl; ++j) {\r\n          c[j] = c[j] + (j%2 ? p.y : p.x)\r\n        }\r\n\r\n      return pathHandlers[i](c, p, p0)\r\n    }\r\n  })(mlhvqtcsa[i].toUpperCase())\r\n}\r\n\r\n// Path points array\r\nSVG.PathArray = function(array, fallback) {\r\n  SVG.Array.call(this, array, fallback || [['M', 0, 0]])\r\n}\r\n\r\n// Inherit from SVG.Array\r\nSVG.PathArray.prototype = new SVG.Array\r\nSVG.PathArray.prototype.constructor = SVG.PathArray\r\n\r\nSVG.extend(SVG.PathArray, {\r\n  // Convert array to string\r\n  toString: function() {\r\n    return arrayToString(this.value)\r\n  }\r\n  // Move path string\r\n, move: function(x, y) {\r\n    // get bounding box of current situation\r\n    var box = this.bbox()\r\n\r\n    // get relative offset\r\n    x -= box.x\r\n    y -= box.y\r\n\r\n    if (!isNaN(x) && !isNaN(y)) {\r\n      // move every point\r\n      for (var l, i = this.value.length - 1; i >= 0; i--) {\r\n        l = this.value[i][0]\r\n\r\n        if (l == 'M' || l == 'L' || l == 'T')  {\r\n          this.value[i][1] += x\r\n          this.value[i][2] += y\r\n\r\n        } else if (l == 'H')  {\r\n          this.value[i][1] += x\r\n\r\n        } else if (l == 'V')  {\r\n          this.value[i][1] += y\r\n\r\n        } else if (l == 'C' || l == 'S' || l == 'Q')  {\r\n          this.value[i][1] += x\r\n          this.value[i][2] += y\r\n          this.value[i][3] += x\r\n          this.value[i][4] += y\r\n\r\n          if (l == 'C')  {\r\n            this.value[i][5] += x\r\n            this.value[i][6] += y\r\n          }\r\n\r\n        } else if (l == 'A')  {\r\n          this.value[i][6] += x\r\n          this.value[i][7] += y\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Resize path string\r\n, size: function(width, height) {\r\n    // get bounding box of current situation\r\n    var i, l, box = this.bbox()\r\n\r\n    // recalculate position of all points according to new size\r\n    for (i = this.value.length - 1; i >= 0; i--) {\r\n      l = this.value[i][0]\r\n\r\n      if (l == 'M' || l == 'L' || l == 'T')  {\r\n        this.value[i][1] = ((this.value[i][1] - box.x) * width)  / box.width  + box.x\r\n        this.value[i][2] = ((this.value[i][2] - box.y) * height) / box.height + box.y\r\n\r\n      } else if (l == 'H')  {\r\n        this.value[i][1] = ((this.value[i][1] - box.x) * width)  / box.width  + box.x\r\n\r\n      } else if (l == 'V')  {\r\n        this.value[i][1] = ((this.value[i][1] - box.y) * height) / box.height + box.y\r\n\r\n      } else if (l == 'C' || l == 'S' || l == 'Q')  {\r\n        this.value[i][1] = ((this.value[i][1] - box.x) * width)  / box.width  + box.x\r\n        this.value[i][2] = ((this.value[i][2] - box.y) * height) / box.height + box.y\r\n        this.value[i][3] = ((this.value[i][3] - box.x) * width)  / box.width  + box.x\r\n        this.value[i][4] = ((this.value[i][4] - box.y) * height) / box.height + box.y\r\n\r\n        if (l == 'C')  {\r\n          this.value[i][5] = ((this.value[i][5] - box.x) * width)  / box.width  + box.x\r\n          this.value[i][6] = ((this.value[i][6] - box.y) * height) / box.height + box.y\r\n        }\r\n\r\n      } else if (l == 'A')  {\r\n        // resize radii\r\n        this.value[i][1] = (this.value[i][1] * width)  / box.width\r\n        this.value[i][2] = (this.value[i][2] * height) / box.height\r\n\r\n        // move position values\r\n        this.value[i][6] = ((this.value[i][6] - box.x) * width)  / box.width  + box.x\r\n        this.value[i][7] = ((this.value[i][7] - box.y) * height) / box.height + box.y\r\n      }\r\n\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Test if the passed path array use the same path data commands as this path array\r\n, equalCommands: function(pathArray) {\r\n    var i, il, equalCommands\r\n\r\n    pathArray = new SVG.PathArray(pathArray)\r\n\r\n    equalCommands = this.value.length === pathArray.value.length\r\n    for(i = 0, il = this.value.length; equalCommands && i < il; i++) {\r\n      equalCommands = this.value[i][0] === pathArray.value[i][0]\r\n    }\r\n\r\n    return equalCommands\r\n  }\r\n  // Make path array morphable\r\n, morph: function(pathArray) {\r\n    pathArray = new SVG.PathArray(pathArray)\r\n\r\n    if(this.equalCommands(pathArray)) {\r\n      this.destination = pathArray\r\n    } else {\r\n      this.destination = null\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Get morphed path array at given position\r\n, at: function(pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    var sourceArray = this.value\r\n      , destinationArray = this.destination.value\r\n      , array = [], pathArray = new SVG.PathArray()\r\n      , i, il, j, jl\r\n\r\n    // Animate has specified in the SVG spec\r\n    // See: https://www.w3.org/TR/SVG11/paths.html#PathElement\r\n    for (i = 0, il = sourceArray.length; i < il; i++) {\r\n      array[i] = [sourceArray[i][0]]\r\n      for(j = 1, jl = sourceArray[i].length; j < jl; j++) {\r\n        array[i][j] = sourceArray[i][j] + (destinationArray[i][j] - sourceArray[i][j]) * pos\r\n      }\r\n      // For the two flags of the elliptical arc command, the SVG spec say:\r\n      // Flags and booleans are interpolated as fractions between zero and one, with any non-zero value considered to be a value of one/true\r\n      // Elliptical arc command as an array followed by corresponding indexes:\r\n      // ['A', rx, ry, x-axis-rotation, large-arc-flag, sweep-flag, x, y]\r\n      //   0    1   2        3                 4             5      6  7\r\n      if(array[i][0] === 'A') {\r\n        array[i][4] = +(array[i][4] != 0)\r\n        array[i][5] = +(array[i][5] != 0)\r\n      }\r\n    }\r\n\r\n    // Directly modify the value of a path array, this is done this way for performance\r\n    pathArray.value = array\r\n    return pathArray\r\n  }\r\n  // Absolutize and parse path to array\r\n, parse: function(array) {\r\n    // if it's already a patharray, no need to parse it\r\n    if (array instanceof SVG.PathArray) return array.valueOf()\r\n\r\n    // prepare for parsing\r\n    var i, x0, y0, s, seg, arr\r\n      , x = 0\r\n      , y = 0\r\n      , paramCnt = { 'M':2, 'L':2, 'H':1, 'V':1, 'C':6, 'S':4, 'Q':4, 'T':2, 'A':7, 'Z':0 }\r\n\r\n    if(typeof array == 'string'){\r\n\r\n      array = array\r\n        .replace(SVG.regex.numbersWithDots, pathRegReplace) // convert 45.123.123 to 45.123 .123\r\n        .replace(SVG.regex.pathLetters, ' $& ') // put some room between letters and numbers\r\n        .replace(SVG.regex.hyphen, '$1 -')      // add space before hyphen\r\n        .trim()                                 // trim\r\n        .split(SVG.regex.delimiter)   // split into array\r\n\r\n    }else{\r\n      array = array.reduce(function(prev, curr){\r\n        return [].concat.call(prev, curr)\r\n      }, [])\r\n    }\r\n\r\n    // array now is an array containing all parts of a path e.g. ['M', '0', '0', 'L', '30', '30' ...]\r\n    var arr = []\r\n      , p = new SVG.Point()\r\n      , p0 = new SVG.Point()\r\n      , index = 0\r\n      , len = array.length\r\n\r\n    do{\r\n      // Test if we have a path letter\r\n      if(SVG.regex.isPathLetter.test(array[index])){\r\n        s = array[index]\r\n        ++index\r\n      // If last letter was a move command and we got no new, it defaults to [L]ine\r\n      }else if(s == 'M'){\r\n        s = 'L'\r\n      }else if(s == 'm'){\r\n        s = 'l'\r\n      }\r\n\r\n      arr.push(pathHandlers[s].call(null,\r\n          array.slice(index, (index = index + paramCnt[s.toUpperCase()])).map(parseFloat),\r\n          p, p0\r\n        )\r\n      )\r\n\r\n    }while(len > index)\r\n\r\n    return arr\r\n\r\n  }\r\n  // Get bounding box of path\r\n, bbox: function() {\r\n    SVG.parser.path.setAttribute('d', this.toString())\r\n\r\n    return SVG.parser.path.getBBox()\r\n  }\r\n\r\n})\r\n\n// Module for unit convertions\r\nSVG.Number = SVG.invent({\r\n  // Initialize\r\n  create: function(value, unit) {\r\n    // initialize defaults\r\n    this.value = 0\r\n    this.unit  = unit || ''\r\n\r\n    // parse value\r\n    if (typeof value === 'number') {\r\n      // ensure a valid numeric value\r\n      this.value = isNaN(value) ? 0 : !isFinite(value) ? (value < 0 ? -3.4e+38 : +3.4e+38) : value\r\n\r\n    } else if (typeof value === 'string') {\r\n      unit = value.match(SVG.regex.numberAndUnit)\r\n\r\n      if (unit) {\r\n        // make value numeric\r\n        this.value = parseFloat(unit[1])\r\n\r\n        // normalize\r\n        if (unit[5] == '%')\r\n          this.value /= 100\r\n        else if (unit[5] == 's')\r\n          this.value *= 1000\r\n\r\n        // store unit\r\n        this.unit = unit[5]\r\n      }\r\n\r\n    } else {\r\n      if (value instanceof SVG.Number) {\r\n        this.value = value.valueOf()\r\n        this.unit  = value.unit\r\n      }\r\n    }\r\n\r\n  }\r\n  // Add methods\r\n, extend: {\r\n    // Stringalize\r\n    toString: function() {\r\n      return (\r\n        this.unit == '%' ?\r\n          ~~(this.value * 1e8) / 1e6:\r\n        this.unit == 's' ?\r\n          this.value / 1e3 :\r\n          this.value\r\n      ) + this.unit\r\n    }\r\n  , toJSON: function() {\r\n      return this.toString()\r\n    }\r\n  , // Convert to primitive\r\n    valueOf: function() {\r\n      return this.value\r\n    }\r\n    // Add number\r\n  , plus: function(number) {\r\n      number = new SVG.Number(number)\r\n      return new SVG.Number(this + number, this.unit || number.unit)\r\n    }\r\n    // Subtract number\r\n  , minus: function(number) {\r\n      number = new SVG.Number(number)\r\n      return new SVG.Number(this - number, this.unit || number.unit)\r\n    }\r\n    // Multiply number\r\n  , times: function(number) {\r\n      number = new SVG.Number(number)\r\n      return new SVG.Number(this * number, this.unit || number.unit)\r\n    }\r\n    // Divide number\r\n  , divide: function(number) {\r\n      number = new SVG.Number(number)\r\n      return new SVG.Number(this / number, this.unit || number.unit)\r\n    }\r\n    // Convert to different unit\r\n  , to: function(unit) {\r\n      var number = new SVG.Number(this)\r\n\r\n      if (typeof unit === 'string')\r\n        number.unit = unit\r\n\r\n      return number\r\n    }\r\n    // Make number morphable\r\n  , morph: function(number) {\r\n      this.destination = new SVG.Number(number)\r\n\r\n      if(number.relative) {\r\n        this.destination.value += this.value\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Get morphed number at given position\r\n  , at: function(pos) {\r\n      // Make sure a destination is defined\r\n      if (!this.destination) return this\r\n\r\n      // Generate new morphed number\r\n      return new SVG.Number(this.destination)\r\n          .minus(this)\r\n          .times(pos)\r\n          .plus(this)\r\n    }\r\n\r\n  }\r\n})\r\n\n\r\nSVG.Element = SVG.invent({\r\n  // Initialize node\r\n  create: function(node) {\r\n    // make stroke value accessible dynamically\r\n    this._stroke = SVG.defaults.attrs.stroke\r\n    this._event = null\r\n\r\n    // initialize data object\r\n    this.dom = {}\r\n\r\n    // create circular reference\r\n    if (this.node = node) {\r\n      this.type = node.nodeName\r\n      this.node.instance = this\r\n\r\n      // store current attribute value\r\n      this._stroke = node.getAttribute('stroke') || this._stroke\r\n    }\r\n  }\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Move over x-axis\r\n    x: function(x) {\r\n      return this.attr('x', x)\r\n    }\r\n    // Move over y-axis\r\n  , y: function(y) {\r\n      return this.attr('y', y)\r\n    }\r\n    // Move by center over x-axis\r\n  , cx: function(x) {\r\n      return x == null ? this.x() + this.width() / 2 : this.x(x - this.width() / 2)\r\n    }\r\n    // Move by center over y-axis\r\n  , cy: function(y) {\r\n      return y == null ? this.y() + this.height() / 2 : this.y(y - this.height() / 2)\r\n    }\r\n    // Move element to given x and y values\r\n  , move: function(x, y) {\r\n      return this.x(x).y(y)\r\n    }\r\n    // Move element by its center\r\n  , center: function(x, y) {\r\n      return this.cx(x).cy(y)\r\n    }\r\n    // Set width of element\r\n  , width: function(width) {\r\n      return this.attr('width', width)\r\n    }\r\n    // Set height of element\r\n  , height: function(height) {\r\n      return this.attr('height', height)\r\n    }\r\n    // Set element size to given width and height\r\n  , size: function(width, height) {\r\n      var p = proportionalSize(this, width, height)\r\n\r\n      return this\r\n        .width(new SVG.Number(p.width))\r\n        .height(new SVG.Number(p.height))\r\n    }\r\n    // Clone element\r\n  , clone: function(parent, withData) {\r\n      // write dom data to the dom so the clone can pickup the data\r\n      this.writeDataToDom()\r\n\r\n      // clone element and assign new id\r\n      var clone = assignNewId(this.node.cloneNode(true))\r\n\r\n      // insert the clone in the given parent or after myself\r\n      if(parent) parent.add(clone)\r\n      else this.after(clone)\r\n\r\n      return clone\r\n    }\r\n    // Remove element\r\n  , remove: function() {\r\n      if (this.parent())\r\n        this.parent().removeElement(this)\r\n\r\n      return this\r\n    }\r\n    // Replace element\r\n  , replace: function(element) {\r\n      this.after(element).remove()\r\n\r\n      return element\r\n    }\r\n    // Add element to given container and return self\r\n  , addTo: function(parent) {\r\n      return parent.put(this)\r\n    }\r\n    // Add element to given container and return container\r\n  , putIn: function(parent) {\r\n      return parent.add(this)\r\n    }\r\n    // Get / set id\r\n  , id: function(id) {\r\n      return this.attr('id', id)\r\n    }\r\n    // Checks whether the given point inside the bounding box of the element\r\n  , inside: function(x, y) {\r\n      var box = this.bbox()\r\n\r\n      return x > box.x\r\n          && y > box.y\r\n          && x < box.x + box.width\r\n          && y < box.y + box.height\r\n    }\r\n    // Show element\r\n  , show: function() {\r\n      return this.style('display', '')\r\n    }\r\n    // Hide element\r\n  , hide: function() {\r\n      return this.style('display', 'none')\r\n    }\r\n    // Is element visible?\r\n  , visible: function() {\r\n      return this.style('display') != 'none'\r\n    }\r\n    // Return id on string conversion\r\n  , toString: function() {\r\n      return this.attr('id')\r\n    }\r\n    // Return array of classes on the node\r\n  , classes: function() {\r\n      var attr = this.attr('class')\r\n\r\n      return attr == null ? [] : attr.trim().split(SVG.regex.delimiter)\r\n    }\r\n    // Return true if class exists on the node, false otherwise\r\n  , hasClass: function(name) {\r\n      return this.classes().indexOf(name) != -1\r\n    }\r\n    // Add class to the node\r\n  , addClass: function(name) {\r\n      if (!this.hasClass(name)) {\r\n        var array = this.classes()\r\n        array.push(name)\r\n        this.attr('class', array.join(' '))\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Remove class from the node\r\n  , removeClass: function(name) {\r\n      if (this.hasClass(name)) {\r\n        this.attr('class', this.classes().filter(function(c) {\r\n          return c != name\r\n        }).join(' '))\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Toggle the presence of a class on the node\r\n  , toggleClass: function(name) {\r\n      return this.hasClass(name) ? this.removeClass(name) : this.addClass(name)\r\n    }\r\n    // Get referenced element form attribute value\r\n  , reference: function(attr) {\r\n      return SVG.get(this.attr(attr))\r\n    }\r\n    // Returns the parent element instance\r\n  , parent: function(type) {\r\n      var parent = this\r\n\r\n      // check for parent\r\n      if(!parent.node.parentNode) return null\r\n\r\n      // get parent element\r\n      parent = SVG.adopt(parent.node.parentNode)\r\n\r\n      if(!type) return parent\r\n\r\n      // loop trough ancestors if type is given\r\n      while(parent && parent.node instanceof window.SVGElement){\r\n        if(typeof type === 'string' ? parent.matches(type) : parent instanceof type) return parent\r\n        parent = SVG.adopt(parent.node.parentNode)\r\n      }\r\n    }\r\n    // Get parent document\r\n  , doc: function() {\r\n      return this instanceof SVG.Doc ? this : this.parent(SVG.Doc)\r\n    }\r\n    // return array of all ancestors of given type up to the root svg\r\n  , parents: function(type) {\r\n      var parents = [], parent = this\r\n\r\n      do{\r\n        parent = parent.parent(type)\r\n        if(!parent || !parent.node) break\r\n\r\n        parents.push(parent)\r\n      } while(parent.parent)\r\n\r\n      return parents\r\n    }\r\n    // matches the element vs a css selector\r\n  , matches: function(selector){\r\n      return matches(this.node, selector)\r\n    }\r\n    // Returns the svg node to call native svg methods on it\r\n  , native: function() {\r\n      return this.node\r\n    }\r\n    // Import raw svg\r\n  , svg: function(svg) {\r\n      // create temporary holder\r\n      var well = document.createElement('svg')\r\n\r\n      // act as a setter if svg is given\r\n      if (svg && this instanceof SVG.Parent) {\r\n        // dump raw svg\r\n        well.innerHTML = '<svg>' + svg.replace(/\\n/, '').replace(/<(\\w+)([^<]+?)\\/>/g, '<$1$2></$1>') + '</svg>'\r\n\r\n        // transplant nodes\r\n        for (var i = 0, il = well.firstChild.childNodes.length; i < il; i++)\r\n          this.node.appendChild(well.firstChild.firstChild)\r\n\r\n      // otherwise act as a getter\r\n      } else {\r\n        // create a wrapping svg element in case of partial content\r\n        well.appendChild(svg = document.createElement('svg'))\r\n\r\n        // write svgjs data to the dom\r\n        this.writeDataToDom()\r\n\r\n        // insert a copy of this node\r\n        svg.appendChild(this.node.cloneNode(true))\r\n\r\n        // return target element\r\n        return well.innerHTML.replace(/^<svg>/, '').replace(/<\\/svg>$/, '')\r\n      }\r\n\r\n      return this\r\n    }\r\n  // write svgjs data to the dom\r\n  , writeDataToDom: function() {\r\n\r\n      // dump variables recursively\r\n      if(this.each || this.lines){\r\n        var fn = this.each ? this : this.lines();\r\n        fn.each(function(){\r\n          this.writeDataToDom()\r\n        })\r\n      }\r\n\r\n      // remove previously set data\r\n      this.node.removeAttribute('svgjs:data')\r\n\r\n      if(Object.keys(this.dom).length)\r\n        this.node.setAttribute('svgjs:data', JSON.stringify(this.dom)) // see #428\r\n\r\n      return this\r\n    }\r\n  // set given data to the elements data property\r\n  , setData: function(o){\r\n      this.dom = o\r\n      return this\r\n    }\r\n  , is: function(obj){\r\n      return is(this, obj)\r\n    }\r\n  }\r\n})\r\n\nSVG.easing = {\r\n  '-': function(pos){return pos}\r\n, '<>':function(pos){return -Math.cos(pos * Math.PI) / 2 + 0.5}\r\n, '>': function(pos){return  Math.sin(pos * Math.PI / 2)}\r\n, '<': function(pos){return -Math.cos(pos * Math.PI / 2) + 1}\r\n}\r\n\r\nSVG.morph = function(pos){\r\n  return function(from, to) {\r\n    return new SVG.MorphObj(from, to).at(pos)\r\n  }\r\n}\r\n\r\nSVG.Situation = SVG.invent({\r\n\r\n  create: function(o){\r\n    this.init = false\r\n    this.reversed = false\r\n    this.reversing = false\r\n\r\n    this.duration = new SVG.Number(o.duration).valueOf()\r\n    this.delay = new SVG.Number(o.delay).valueOf()\r\n\r\n    this.start = +new Date() + this.delay\r\n    this.finish = this.start + this.duration\r\n    this.ease = o.ease\r\n\r\n    // this.loop is incremented from 0 to this.loops\r\n    // it is also incremented when in an infinite loop (when this.loops is true)\r\n    this.loop = 0\r\n    this.loops = false\r\n\r\n    this.animations = {\r\n      // functionToCall: [list of morphable objects]\r\n      // e.g. move: [SVG.Number, SVG.Number]\r\n    }\r\n\r\n    this.attrs = {\r\n      // holds all attributes which are not represented from a function svg.js provides\r\n      // e.g. someAttr: SVG.Number\r\n    }\r\n\r\n    this.styles = {\r\n      // holds all styles which should be animated\r\n      // e.g. fill-color: SVG.Color\r\n    }\r\n\r\n    this.transforms = [\r\n      // holds all transformations as transformation objects\r\n      // e.g. [SVG.Rotate, SVG.Translate, SVG.Matrix]\r\n    ]\r\n\r\n    this.once = {\r\n      // functions to fire at a specific position\r\n      // e.g. \"0.5\": function foo(){}\r\n    }\r\n\r\n  }\r\n\r\n})\r\n\r\n\r\nSVG.FX = SVG.invent({\r\n\r\n  create: function(element) {\r\n    this._target = element\r\n    this.situations = []\r\n    this.active = false\r\n    this.situation = null\r\n    this.paused = false\r\n    this.lastPos = 0\r\n    this.pos = 0\r\n    // The absolute position of an animation is its position in the context of its complete duration (including delay and loops)\r\n    // When performing a delay, absPos is below 0 and when performing a loop, its value is above 1\r\n    this.absPos = 0\r\n    this._speed = 1\r\n  }\r\n\r\n, extend: {\r\n\r\n    /**\r\n     * sets or returns the target of this animation\r\n     * @param o object || number In case of Object it holds all parameters. In case of number its the duration of the animation\r\n     * @param ease function || string Function which should be used for easing or easing keyword\r\n     * @param delay Number indicating the delay before the animation starts\r\n     * @return target || this\r\n     */\r\n    animate: function(o, ease, delay){\r\n\r\n      if(typeof o == 'object'){\r\n        ease = o.ease\r\n        delay = o.delay\r\n        o = o.duration\r\n      }\r\n\r\n      var situation = new SVG.Situation({\r\n        duration: o || 1000,\r\n        delay: delay || 0,\r\n        ease: SVG.easing[ease || '-'] || ease\r\n      })\r\n\r\n      this.queue(situation)\r\n\r\n      return this\r\n    }\r\n\r\n    /**\r\n     * sets a delay before the next element of the queue is called\r\n     * @param delay Duration of delay in milliseconds\r\n     * @return this.target()\r\n     */\r\n  , delay: function(delay){\r\n      // The delay is performed by an empty situation with its duration\r\n      // attribute set to the duration of the delay\r\n      var situation = new SVG.Situation({\r\n        duration: delay,\r\n        delay: 0,\r\n        ease: SVG.easing['-']\r\n      })\r\n\r\n      return this.queue(situation)\r\n    }\r\n\r\n    /**\r\n     * sets or returns the target of this animation\r\n     * @param null || target SVG.Element which should be set as new target\r\n     * @return target || this\r\n     */\r\n  , target: function(target){\r\n      if(target && target instanceof SVG.Element){\r\n        this._target = target\r\n        return this\r\n      }\r\n\r\n      return this._target\r\n    }\r\n\r\n    // returns the absolute position at a given time\r\n  , timeToAbsPos: function(timestamp){\r\n      return (timestamp - this.situation.start) / (this.situation.duration/this._speed)\r\n    }\r\n\r\n    // returns the timestamp from a given absolute positon\r\n  , absPosToTime: function(absPos){\r\n      return this.situation.duration/this._speed * absPos + this.situation.start\r\n    }\r\n\r\n    // starts the animationloop\r\n  , startAnimFrame: function(){\r\n      this.stopAnimFrame()\r\n      this.animationFrame = window.requestAnimationFrame(function(){ this.step() }.bind(this))\r\n    }\r\n\r\n    // cancels the animationframe\r\n  , stopAnimFrame: function(){\r\n      window.cancelAnimationFrame(this.animationFrame)\r\n    }\r\n\r\n    // kicks off the animation - only does something when the queue is currently not active and at least one situation is set\r\n  , start: function(){\r\n      // dont start if already started\r\n      if(!this.active && this.situation){\r\n        this.active = true\r\n        this.startCurrent()\r\n      }\r\n\r\n      return this\r\n    }\r\n\r\n    // start the current situation\r\n  , startCurrent: function(){\r\n      this.situation.start = +new Date + this.situation.delay/this._speed\r\n      this.situation.finish = this.situation.start + this.situation.duration/this._speed\r\n      return this.initAnimations().step()\r\n    }\r\n\r\n    /**\r\n     * adds a function / Situation to the animation queue\r\n     * @param fn function / situation to add\r\n     * @return this\r\n     */\r\n  , queue: function(fn){\r\n      if(typeof fn == 'function' || fn instanceof SVG.Situation)\r\n        this.situations.push(fn)\r\n\r\n      if(!this.situation) this.situation = this.situations.shift()\r\n\r\n      return this\r\n    }\r\n\r\n    /**\r\n     * pulls next element from the queue and execute it\r\n     * @return this\r\n     */\r\n  , dequeue: function(){\r\n      // stop current animation\r\n      this.stop()\r\n\r\n      // get next animation from queue\r\n      this.situation = this.situations.shift()\r\n\r\n      if(this.situation){\r\n        if(this.situation instanceof SVG.Situation) {\r\n          this.start()\r\n        } else {\r\n          // If it is not a SVG.Situation, then it is a function, we execute it\r\n          this.situation.call(this)\r\n        }\r\n      }\r\n\r\n      return this\r\n    }\r\n\r\n    // updates all animations to the current state of the element\r\n    // this is important when one property could be changed from another property\r\n  , initAnimations: function() {\r\n      var i, j, source\r\n      var s = this.situation\r\n\r\n      if(s.init) return this\r\n\r\n      for(i in s.animations){\r\n        source = this.target()[i]()\r\n\r\n        if(!Array.isArray(source)) {\r\n          source = [source]\r\n        }\r\n\r\n        if(!Array.isArray(s.animations[i])) {\r\n          s.animations[i] = [s.animations[i]]\r\n        }\r\n\r\n        //if(s.animations[i].length > source.length) {\r\n        //  source.concat = source.concat(s.animations[i].slice(source.length, s.animations[i].length))\r\n        //}\r\n\r\n        for(j = source.length; j--;) {\r\n          // The condition is because some methods return a normal number instead\r\n          // of a SVG.Number\r\n          if(s.animations[i][j] instanceof SVG.Number)\r\n            source[j] = new SVG.Number(source[j])\r\n\r\n          s.animations[i][j] = source[j].morph(s.animations[i][j])\r\n        }\r\n      }\r\n\r\n      for(i in s.attrs){\r\n        s.attrs[i] = new SVG.MorphObj(this.target().attr(i), s.attrs[i])\r\n      }\r\n\r\n      for(i in s.styles){\r\n        s.styles[i] = new SVG.MorphObj(this.target().style(i), s.styles[i])\r\n      }\r\n\r\n      s.initialTransformation = this.target().matrixify()\r\n\r\n      s.init = true\r\n      return this\r\n    }\r\n  , clearQueue: function(){\r\n      this.situations = []\r\n      return this\r\n    }\r\n  , clearCurrent: function(){\r\n      this.situation = null\r\n      return this\r\n    }\r\n    /** stops the animation immediately\r\n     * @param jumpToEnd A Boolean indicating whether to complete the current animation immediately.\r\n     * @param clearQueue A Boolean indicating whether to remove queued animation as well.\r\n     * @return this\r\n     */\r\n  , stop: function(jumpToEnd, clearQueue){\r\n      var active = this.active\r\n      this.active = false\r\n\r\n      if(clearQueue){\r\n        this.clearQueue()\r\n      }\r\n\r\n      if(jumpToEnd && this.situation){\r\n        // initialize the situation if it was not\r\n        !active && this.startCurrent()\r\n        this.atEnd()\r\n      }\r\n\r\n      this.stopAnimFrame()\r\n\r\n      return this.clearCurrent()\r\n    }\r\n\r\n    /** resets the element to the state where the current element has started\r\n     * @return this\r\n     */\r\n  , reset: function(){\r\n      if(this.situation){\r\n        var temp = this.situation\r\n        this.stop()\r\n        this.situation = temp\r\n        this.atStart()\r\n      }\r\n      return this\r\n    }\r\n\r\n    // Stop the currently-running animation, remove all queued animations, and complete all animations for the element.\r\n  , finish: function(){\r\n\r\n      this.stop(true, false)\r\n\r\n      while(this.dequeue().situation && this.stop(true, false));\r\n\r\n      this.clearQueue().clearCurrent()\r\n\r\n      return this\r\n    }\r\n\r\n    // set the internal animation pointer at the start position, before any loops, and updates the visualisation\r\n  , atStart: function() {\r\n      return this.at(0, true)\r\n    }\r\n\r\n    // set the internal animation pointer at the end position, after all the loops, and updates the visualisation\r\n  , atEnd: function() {\r\n      if (this.situation.loops === true) {\r\n        // If in a infinite loop, we end the current iteration\r\n        this.situation.loops = this.situation.loop + 1\r\n      }\r\n\r\n      if(typeof this.situation.loops == 'number') {\r\n        // If performing a finite number of loops, we go after all the loops\r\n        return this.at(this.situation.loops, true)\r\n      } else {\r\n        // If no loops, we just go at the end\r\n        return this.at(1, true)\r\n      }\r\n    }\r\n\r\n    // set the internal animation pointer to the specified position and updates the visualisation\r\n    // if isAbsPos is true, pos is treated as an absolute position\r\n  , at: function(pos, isAbsPos){\r\n      var durDivSpd = this.situation.duration/this._speed\r\n\r\n      this.absPos = pos\r\n      // If pos is not an absolute position, we convert it into one\r\n      if (!isAbsPos) {\r\n        if (this.situation.reversed) this.absPos = 1 - this.absPos\r\n        this.absPos += this.situation.loop\r\n      }\r\n\r\n      this.situation.start = +new Date - this.absPos * durDivSpd\r\n      this.situation.finish = this.situation.start + durDivSpd\r\n\r\n      return this.step(true)\r\n    }\r\n\r\n    /**\r\n     * sets or returns the speed of the animations\r\n     * @param speed null || Number The new speed of the animations\r\n     * @return Number || this\r\n     */\r\n  , speed: function(speed){\r\n      if (speed === 0) return this.pause()\r\n\r\n      if (speed) {\r\n        this._speed = speed\r\n        // We use an absolute position here so that speed can affect the delay before the animation\r\n        return this.at(this.absPos, true)\r\n      } else return this._speed\r\n    }\r\n\r\n    // Make loopable\r\n  , loop: function(times, reverse) {\r\n      var c = this.last()\r\n\r\n      // store total loops\r\n      c.loops = (times != null) ? times : true\r\n      c.loop = 0\r\n\r\n      if(reverse) c.reversing = true\r\n      return this\r\n    }\r\n\r\n    // pauses the animation\r\n  , pause: function(){\r\n      this.paused = true\r\n      this.stopAnimFrame()\r\n\r\n      return this\r\n    }\r\n\r\n    // unpause the animation\r\n  , play: function(){\r\n      if(!this.paused) return this\r\n      this.paused = false\r\n      // We use an absolute position here so that the delay before the animation can be paused\r\n      return this.at(this.absPos, true)\r\n    }\r\n\r\n    /**\r\n     * toggle or set the direction of the animation\r\n     * true sets direction to backwards while false sets it to forwards\r\n     * @param reversed Boolean indicating whether to reverse the animation or not (default: toggle the reverse status)\r\n     * @return this\r\n     */\r\n  , reverse: function(reversed){\r\n      var c = this.last()\r\n\r\n      if(typeof reversed == 'undefined') c.reversed = !c.reversed\r\n      else c.reversed = reversed\r\n\r\n      return this\r\n    }\r\n\r\n\r\n    /**\r\n     * returns a float from 0-1 indicating the progress of the current animation\r\n     * @param eased Boolean indicating whether the returned position should be eased or not\r\n     * @return number\r\n     */\r\n  , progress: function(easeIt){\r\n      return easeIt ? this.situation.ease(this.pos) : this.pos\r\n    }\r\n\r\n    /**\r\n     * adds a callback function which is called when the current animation is finished\r\n     * @param fn Function which should be executed as callback\r\n     * @return number\r\n     */\r\n  , after: function(fn){\r\n      var c = this.last()\r\n        , wrapper = function wrapper(e){\r\n            if(e.detail.situation == c){\r\n              fn.call(this, c)\r\n              this.off('finished.fx', wrapper) // prevent memory leak\r\n            }\r\n          }\r\n\r\n      this.target().on('finished.fx', wrapper)\r\n\r\n      return this._callStart()\r\n    }\r\n\r\n    // adds a callback which is called whenever one animation step is performed\r\n  , during: function(fn){\r\n      var c = this.last()\r\n        , wrapper = function(e){\r\n            if(e.detail.situation == c){\r\n              fn.call(this, e.detail.pos, SVG.morph(e.detail.pos), e.detail.eased, c)\r\n            }\r\n          }\r\n\r\n      // see above\r\n      this.target().off('during.fx', wrapper).on('during.fx', wrapper)\r\n\r\n      this.after(function(){\r\n        this.off('during.fx', wrapper)\r\n      })\r\n\r\n      return this._callStart()\r\n    }\r\n\r\n    // calls after ALL animations in the queue are finished\r\n  , afterAll: function(fn){\r\n      var wrapper = function wrapper(e){\r\n            fn.call(this)\r\n            this.off('allfinished.fx', wrapper)\r\n          }\r\n\r\n      // see above\r\n      this.target().off('allfinished.fx', wrapper).on('allfinished.fx', wrapper)\r\n\r\n      return this._callStart()\r\n    }\r\n\r\n    // calls on every animation step for all animations\r\n  , duringAll: function(fn){\r\n      var wrapper = function(e){\r\n            fn.call(this, e.detail.pos, SVG.morph(e.detail.pos), e.detail.eased, e.detail.situation)\r\n          }\r\n\r\n      this.target().off('during.fx', wrapper).on('during.fx', wrapper)\r\n\r\n      this.afterAll(function(){\r\n        this.off('during.fx', wrapper)\r\n      })\r\n\r\n      return this._callStart()\r\n    }\r\n\r\n  , last: function(){\r\n      return this.situations.length ? this.situations[this.situations.length-1] : this.situation\r\n    }\r\n\r\n    // adds one property to the animations\r\n  , add: function(method, args, type){\r\n      this.last()[type || 'animations'][method] = args\r\n      return this._callStart()\r\n    }\r\n\r\n    /** perform one step of the animation\r\n     *  @param ignoreTime Boolean indicating whether to ignore time and use position directly or recalculate position based on time\r\n     *  @return this\r\n     */\r\n  , step: function(ignoreTime){\r\n\r\n      // convert current time to an absolute position\r\n      if(!ignoreTime) this.absPos = this.timeToAbsPos(+new Date)\r\n\r\n      // This part convert an absolute position to a position\r\n      if(this.situation.loops !== false) {\r\n        var absPos, absPosInt, lastLoop\r\n\r\n        // If the absolute position is below 0, we just treat it as if it was 0\r\n        absPos = Math.max(this.absPos, 0)\r\n        absPosInt = Math.floor(absPos)\r\n\r\n        if(this.situation.loops === true || absPosInt < this.situation.loops) {\r\n          this.pos = absPos - absPosInt\r\n          lastLoop = this.situation.loop\r\n          this.situation.loop = absPosInt\r\n        } else {\r\n          this.absPos = this.situation.loops\r\n          this.pos = 1\r\n          // The -1 here is because we don't want to toggle reversed when all the loops have been completed\r\n          lastLoop = this.situation.loop - 1\r\n          this.situation.loop = this.situation.loops\r\n        }\r\n\r\n        if(this.situation.reversing) {\r\n          // Toggle reversed if an odd number of loops as occured since the last call of step\r\n          this.situation.reversed = this.situation.reversed != Boolean((this.situation.loop - lastLoop) % 2)\r\n        }\r\n\r\n      } else {\r\n        // If there are no loop, the absolute position must not be above 1\r\n        this.absPos = Math.min(this.absPos, 1)\r\n        this.pos = this.absPos\r\n      }\r\n\r\n      // while the absolute position can be below 0, the position must not be below 0\r\n      if(this.pos < 0) this.pos = 0\r\n\r\n      if(this.situation.reversed) this.pos = 1 - this.pos\r\n\r\n\r\n      // apply easing\r\n      var eased = this.situation.ease(this.pos)\r\n\r\n      // call once-callbacks\r\n      for(var i in this.situation.once){\r\n        if(i > this.lastPos && i <= eased){\r\n          this.situation.once[i].call(this.target(), this.pos, eased)\r\n          delete this.situation.once[i]\r\n        }\r\n      }\r\n\r\n      // fire during callback with position, eased position and current situation as parameter\r\n      if(this.active) this.target().fire('during', {pos: this.pos, eased: eased, fx: this, situation: this.situation})\r\n\r\n      // the user may call stop or finish in the during callback\r\n      // so make sure that we still have a valid situation\r\n      if(!this.situation){\r\n        return this\r\n      }\r\n\r\n      // apply the actual animation to every property\r\n      this.eachAt()\r\n\r\n      // do final code when situation is finished\r\n      if((this.pos == 1 && !this.situation.reversed) || (this.situation.reversed && this.pos == 0)){\r\n\r\n        // stop animation callback\r\n        this.stopAnimFrame()\r\n\r\n        // fire finished callback with current situation as parameter\r\n        this.target().fire('finished', {fx:this, situation: this.situation})\r\n\r\n        if(!this.situations.length){\r\n          this.target().fire('allfinished')\r\n\r\n          // Recheck the length since the user may call animate in the afterAll callback\r\n          if(!this.situations.length){\r\n            this.target().off('.fx') // there shouldnt be any binding left, but to make sure...\r\n            this.active = false\r\n          }\r\n        }\r\n\r\n        // start next animation\r\n        if(this.active) this.dequeue()\r\n        else this.clearCurrent()\r\n\r\n      }else if(!this.paused && this.active){\r\n        // we continue animating when we are not at the end\r\n        this.startAnimFrame()\r\n      }\r\n\r\n      // save last eased position for once callback triggering\r\n      this.lastPos = eased\r\n      return this\r\n\r\n    }\r\n\r\n    // calculates the step for every property and calls block with it\r\n  , eachAt: function(){\r\n      var i, len, at, self = this, target = this.target(), s = this.situation\r\n\r\n      // apply animations which can be called trough a method\r\n      for(i in s.animations){\r\n\r\n        at = [].concat(s.animations[i]).map(function(el){\r\n          return typeof el !== 'string' && el.at ? el.at(s.ease(self.pos), self.pos) : el\r\n        })\r\n\r\n        target[i].apply(target, at)\r\n\r\n      }\r\n\r\n      // apply animation which has to be applied with attr()\r\n      for(i in s.attrs){\r\n\r\n        at = [i].concat(s.attrs[i]).map(function(el){\r\n          return typeof el !== 'string' && el.at ? el.at(s.ease(self.pos), self.pos) : el\r\n        })\r\n\r\n        target.attr.apply(target, at)\r\n\r\n      }\r\n\r\n      // apply animation which has to be applied with style()\r\n      for(i in s.styles){\r\n\r\n        at = [i].concat(s.styles[i]).map(function(el){\r\n          return typeof el !== 'string' && el.at ? el.at(s.ease(self.pos), self.pos) : el\r\n        })\r\n\r\n        target.style.apply(target, at)\r\n\r\n      }\r\n\r\n      // animate initialTransformation which has to be chained\r\n      if(s.transforms.length){\r\n\r\n        // get initial initialTransformation\r\n        at = s.initialTransformation\r\n        for(i = 0, len = s.transforms.length; i < len; i++){\r\n\r\n          // get next transformation in chain\r\n          var a = s.transforms[i]\r\n\r\n          // multiply matrix directly\r\n          if(a instanceof SVG.Matrix){\r\n\r\n            if(a.relative){\r\n              at = at.multiply(new SVG.Matrix().morph(a).at(s.ease(this.pos)))\r\n            }else{\r\n              at = at.morph(a).at(s.ease(this.pos))\r\n            }\r\n            continue\r\n          }\r\n\r\n          // when transformation is absolute we have to reset the needed transformation first\r\n          if(!a.relative)\r\n            a.undo(at.extract())\r\n\r\n          // and reapply it after\r\n          at = at.multiply(a.at(s.ease(this.pos)))\r\n\r\n        }\r\n\r\n        // set new matrix on element\r\n        target.matrix(at)\r\n      }\r\n\r\n      return this\r\n\r\n    }\r\n\r\n\r\n    // adds an once-callback which is called at a specific position and never again\r\n  , once: function(pos, fn, isEased){\r\n      var c = this.last()\r\n      if(!isEased) pos = c.ease(pos)\r\n\r\n      c.once[pos] = fn\r\n\r\n      return this\r\n    }\r\n\r\n  , _callStart: function() {\r\n      setTimeout(function(){this.start()}.bind(this), 0)\r\n      return this\r\n    }\r\n\r\n  }\r\n\r\n, parent: SVG.Element\r\n\r\n  // Add method to parent elements\r\n, construct: {\r\n    // Get fx module or create a new one, then animate with given duration and ease\r\n    animate: function(o, ease, delay) {\r\n      return (this.fx || (this.fx = new SVG.FX(this))).animate(o, ease, delay)\r\n    }\r\n  , delay: function(delay){\r\n      return (this.fx || (this.fx = new SVG.FX(this))).delay(delay)\r\n    }\r\n  , stop: function(jumpToEnd, clearQueue) {\r\n      if (this.fx)\r\n        this.fx.stop(jumpToEnd, clearQueue)\r\n\r\n      return this\r\n    }\r\n  , finish: function() {\r\n      if (this.fx)\r\n        this.fx.finish()\r\n\r\n      return this\r\n    }\r\n    // Pause current animation\r\n  , pause: function() {\r\n      if (this.fx)\r\n        this.fx.pause()\r\n\r\n      return this\r\n    }\r\n    // Play paused current animation\r\n  , play: function() {\r\n      if (this.fx)\r\n        this.fx.play()\r\n\r\n      return this\r\n    }\r\n    // Set/Get the speed of the animations\r\n  , speed: function(speed) {\r\n      if (this.fx)\r\n        if (speed == null)\r\n          return this.fx.speed()\r\n        else\r\n          this.fx.speed(speed)\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n})\r\n\r\n// MorphObj is used whenever no morphable object is given\r\nSVG.MorphObj = SVG.invent({\r\n\r\n  create: function(from, to){\r\n    // prepare color for morphing\r\n    if(SVG.Color.isColor(to)) return new SVG.Color(from).morph(to)\r\n    // prepare number for morphing\r\n    if(SVG.regex.numberAndUnit.test(to)) return new SVG.Number(from).morph(to)\r\n\r\n    // prepare for plain morphing\r\n    this.value = from\r\n    this.destination = to\r\n  }\r\n\r\n, extend: {\r\n    at: function(pos, real){\r\n      return real < 1 ? this.value : this.destination\r\n    },\r\n\r\n    valueOf: function(){\r\n      return this.value\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.FX, {\r\n  // Add animatable attributes\r\n  attr: function(a, v, relative) {\r\n    // apply attributes individually\r\n    if (typeof a == 'object') {\r\n      for (var key in a)\r\n        this.attr(key, a[key])\r\n\r\n    } else {\r\n      this.add(a, v, 'attrs')\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Add animatable styles\r\n, style: function(s, v) {\r\n    if (typeof s == 'object')\r\n      for (var key in s)\r\n        this.style(key, s[key])\r\n\r\n    else\r\n      this.add(s, v, 'styles')\r\n\r\n    return this\r\n  }\r\n  // Animatable x-axis\r\n, x: function(x, relative) {\r\n    if(this.target() instanceof SVG.G){\r\n      this.transform({x:x}, relative)\r\n      return this\r\n    }\r\n\r\n    var num = new SVG.Number(x)\r\n    num.relative = relative\r\n    return this.add('x', num)\r\n  }\r\n  // Animatable y-axis\r\n, y: function(y, relative) {\r\n    if(this.target() instanceof SVG.G){\r\n      this.transform({y:y}, relative)\r\n      return this\r\n    }\r\n\r\n    var num = new SVG.Number(y)\r\n    num.relative = relative\r\n    return this.add('y', num)\r\n  }\r\n  // Animatable center x-axis\r\n, cx: function(x) {\r\n    return this.add('cx', new SVG.Number(x))\r\n  }\r\n  // Animatable center y-axis\r\n, cy: function(y) {\r\n    return this.add('cy', new SVG.Number(y))\r\n  }\r\n  // Add animatable move\r\n, move: function(x, y) {\r\n    return this.x(x).y(y)\r\n  }\r\n  // Add animatable center\r\n, center: function(x, y) {\r\n    return this.cx(x).cy(y)\r\n  }\r\n  // Add animatable size\r\n, size: function(width, height) {\r\n    if (this.target() instanceof SVG.Text) {\r\n      // animate font size for Text elements\r\n      this.attr('font-size', width)\r\n\r\n    } else {\r\n      // animate bbox based size for all other elements\r\n      var box\r\n\r\n      if(!width || !height){\r\n        box = this.target().bbox()\r\n      }\r\n\r\n      if(!width){\r\n        width = box.width / box.height  * height\r\n      }\r\n\r\n      if(!height){\r\n        height = box.height / box.width  * width\r\n      }\r\n\r\n      this.add('width' , new SVG.Number(width))\r\n          .add('height', new SVG.Number(height))\r\n\r\n    }\r\n\r\n    return this\r\n  }\r\n  // Add animatable width\r\n, width: function(width) {\r\n    return this.add('width', new SVG.Number(width))\r\n  }\r\n  // Add animatable height\r\n, height: function(height) {\r\n    return this.add('height', new SVG.Number(height))\r\n  }\r\n  // Add animatable plot\r\n, plot: function(a, b, c, d) {\r\n    // Lines can be plotted with 4 arguments\r\n    if(arguments.length == 4) {\r\n      return this.plot([a, b, c, d])\r\n    }\r\n\r\n    return this.add('plot', new (this.target().morphArray)(a))\r\n  }\r\n  // Add leading method\r\n, leading: function(value) {\r\n    return this.target().leading ?\r\n      this.add('leading', new SVG.Number(value)) :\r\n      this\r\n  }\r\n  // Add animatable viewbox\r\n, viewbox: function(x, y, width, height) {\r\n    if (this.target() instanceof SVG.Container) {\r\n      this.add('viewbox', new SVG.ViewBox(x, y, width, height))\r\n    }\r\n\r\n    return this\r\n  }\r\n, update: function(o) {\r\n    if (this.target() instanceof SVG.Stop) {\r\n      if (typeof o == 'number' || o instanceof SVG.Number) {\r\n        return this.update({\r\n          offset:  arguments[0]\r\n        , color:   arguments[1]\r\n        , opacity: arguments[2]\r\n        })\r\n      }\r\n\r\n      if (o.opacity != null) this.attr('stop-opacity', o.opacity)\r\n      if (o.color   != null) this.attr('stop-color', o.color)\r\n      if (o.offset  != null) this.attr('offset', o.offset)\r\n    }\r\n\r\n    return this\r\n  }\r\n})\r\n\nSVG.Box = SVG.invent({\r\n  create: function(x, y, width, height) {\r\n    if (typeof x == 'object' && !(x instanceof SVG.Element)) {\r\n      // chromes getBoundingClientRect has no x and y property\r\n      return SVG.Box.call(this, x.left != null ? x.left : x.x , x.top != null ? x.top : x.y, x.width, x.height)\r\n    } else if (arguments.length == 4) {\r\n      this.x = x\r\n      this.y = y\r\n      this.width = width\r\n      this.height = height\r\n    }\r\n\r\n    // add center, right, bottom...\r\n    fullBox(this)\r\n  }\r\n, extend: {\r\n    // Merge rect box with another, return a new instance\r\n    merge: function(box) {\r\n      var b = new this.constructor()\r\n\r\n      // merge boxes\r\n      b.x      = Math.min(this.x, box.x)\r\n      b.y      = Math.min(this.y, box.y)\r\n      b.width  = Math.max(this.x + this.width,  box.x + box.width)  - b.x\r\n      b.height = Math.max(this.y + this.height, box.y + box.height) - b.y\r\n\r\n      return fullBox(b)\r\n    }\r\n\r\n  , transform: function(m) {\r\n      var xMin = Infinity, xMax = -Infinity, yMin = Infinity, yMax = -Infinity, p, bbox\r\n\r\n      var pts = [\r\n        new SVG.Point(this.x, this.y),\r\n        new SVG.Point(this.x2, this.y),\r\n        new SVG.Point(this.x, this.y2),\r\n        new SVG.Point(this.x2, this.y2)\r\n      ]\r\n\r\n      pts.forEach(function(p) {\r\n        p = p.transform(m)\r\n        xMin = Math.min(xMin,p.x)\r\n        xMax = Math.max(xMax,p.x)\r\n        yMin = Math.min(yMin,p.y)\r\n        yMax = Math.max(yMax,p.y)\r\n      })\r\n\r\n      bbox = new this.constructor()\r\n      bbox.x = xMin\r\n      bbox.width = xMax-xMin\r\n      bbox.y = yMin\r\n      bbox.height = yMax-yMin\r\n\r\n      fullBox(bbox)\r\n\r\n      return bbox\r\n    }\r\n  }\r\n})\r\n\r\nSVG.BBox = SVG.invent({\r\n  // Initialize\r\n  create: function(element) {\r\n    SVG.Box.apply(this, [].slice.call(arguments))\r\n\r\n    // get values if element is given\r\n    if (element instanceof SVG.Element) {\r\n      var box\r\n\r\n      // yes this is ugly, but Firefox can be a bitch when it comes to elements that are not yet rendered\r\n      try {\r\n\r\n        if (!document.documentElement.contains){\r\n          // This is IE - it does not support contains() for top-level SVGs\r\n          var topParent = element.node\r\n          while (topParent.parentNode){\r\n            topParent = topParent.parentNode\r\n          }\r\n          if (topParent != document) throw new Exception('Element not in the dom')\r\n        } else {\r\n          // the element is NOT in the dom, throw error\r\n          if(!document.documentElement.contains(element.node)) throw new Exception('Element not in the dom')\r\n        }\r\n\r\n        // find native bbox\r\n        box = element.node.getBBox()\r\n      } catch(e) {\r\n        if(element instanceof SVG.Shape){\r\n          var clone = element.clone(SVG.parser.draw.instance).show()\r\n          box = clone.node.getBBox()\r\n          clone.remove()\r\n        }else{\r\n          box = {\r\n            x:      element.node.clientLeft\r\n          , y:      element.node.clientTop\r\n          , width:  element.node.clientWidth\r\n          , height: element.node.clientHeight\r\n          }\r\n        }\r\n      }\r\n\r\n      SVG.Box.call(this, box)\r\n    }\r\n\r\n  }\r\n\r\n  // Define ancestor\r\n, inherit: SVG.Box\r\n\r\n  // Define Parent\r\n, parent: SVG.Element\r\n\r\n  // Constructor\r\n, construct: {\r\n    // Get bounding box\r\n    bbox: function() {\r\n      return new SVG.BBox(this)\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.BBox.prototype.constructor = SVG.BBox\r\n\r\n\r\nSVG.extend(SVG.Element, {\r\n  tbox: function(){\r\n    console.warn('Use of TBox is deprecated and mapped to RBox. Use .rbox() instead.')\r\n    return this.rbox(this.doc())\r\n  }\r\n})\r\n\r\nSVG.RBox = SVG.invent({\r\n  // Initialize\r\n  create: function(element) {\r\n    SVG.Box.apply(this, [].slice.call(arguments))\r\n\r\n    if (element instanceof SVG.Element) {\r\n      SVG.Box.call(this, element.node.getBoundingClientRect())\r\n    }\r\n  }\r\n\r\n, inherit: SVG.Box\r\n\r\n  // define Parent\r\n, parent: SVG.Element\r\n\r\n, extend: {\r\n    addOffset: function() {\r\n      // offset by window scroll position, because getBoundingClientRect changes when window is scrolled\r\n      this.x += window.pageXOffset\r\n      this.y += window.pageYOffset\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Constructor\r\n, construct: {\r\n    // Get rect box\r\n    rbox: function(el) {\r\n      if (el) return new SVG.RBox(this).transform(el.screenCTM().inverse())\r\n      return new SVG.RBox(this).addOffset()\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.RBox.prototype.constructor = SVG.RBox\r\n\nSVG.Matrix = SVG.invent({\r\n  // Initialize\r\n  create: function(source) {\r\n    var i, base = arrayToMatrix([1, 0, 0, 1, 0, 0])\r\n\r\n    // ensure source as object\r\n    source = source instanceof SVG.Element ?\r\n      source.matrixify() :\r\n    typeof source === 'string' ?\r\n      arrayToMatrix(source.split(SVG.regex.delimiter).map(parseFloat)) :\r\n    arguments.length == 6 ?\r\n      arrayToMatrix([].slice.call(arguments)) :\r\n    Array.isArray(source) ?\r\n      arrayToMatrix(source) :\r\n    typeof source === 'object' ?\r\n      source : base\r\n\r\n    // merge source\r\n    for (i = abcdef.length - 1; i >= 0; --i)\r\n      this[abcdef[i]] = source[abcdef[i]] != null ?\r\n        source[abcdef[i]] : base[abcdef[i]]\r\n  }\r\n\r\n  // Add methods\r\n, extend: {\r\n    // Extract individual transformations\r\n    extract: function() {\r\n      // find delta transform points\r\n      var px    = deltaTransformPoint(this, 0, 1)\r\n        , py    = deltaTransformPoint(this, 1, 0)\r\n        , skewX = 180 / Math.PI * Math.atan2(px.y, px.x) - 90\r\n\r\n      return {\r\n        // translation\r\n        x:        this.e\r\n      , y:        this.f\r\n      , transformedX:(this.e * Math.cos(skewX * Math.PI / 180) + this.f * Math.sin(skewX * Math.PI / 180)) / Math.sqrt(this.a * this.a + this.b * this.b)\r\n      , transformedY:(this.f * Math.cos(skewX * Math.PI / 180) + this.e * Math.sin(-skewX * Math.PI / 180)) / Math.sqrt(this.c * this.c + this.d * this.d)\r\n        // skew\r\n      , skewX:    -skewX\r\n      , skewY:    180 / Math.PI * Math.atan2(py.y, py.x)\r\n        // scale\r\n      , scaleX:   Math.sqrt(this.a * this.a + this.b * this.b)\r\n      , scaleY:   Math.sqrt(this.c * this.c + this.d * this.d)\r\n        // rotation\r\n      , rotation: skewX\r\n      , a: this.a\r\n      , b: this.b\r\n      , c: this.c\r\n      , d: this.d\r\n      , e: this.e\r\n      , f: this.f\r\n      , matrix: new SVG.Matrix(this)\r\n      }\r\n    }\r\n    // Clone matrix\r\n  , clone: function() {\r\n      return new SVG.Matrix(this)\r\n    }\r\n    // Morph one matrix into another\r\n  , morph: function(matrix) {\r\n      // store new destination\r\n      this.destination = new SVG.Matrix(matrix)\r\n\r\n      return this\r\n    }\r\n    // Get morphed matrix at a given position\r\n  , at: function(pos) {\r\n      // make sure a destination is defined\r\n      if (!this.destination) return this\r\n\r\n      // calculate morphed matrix at a given position\r\n      var matrix = new SVG.Matrix({\r\n        a: this.a + (this.destination.a - this.a) * pos\r\n      , b: this.b + (this.destination.b - this.b) * pos\r\n      , c: this.c + (this.destination.c - this.c) * pos\r\n      , d: this.d + (this.destination.d - this.d) * pos\r\n      , e: this.e + (this.destination.e - this.e) * pos\r\n      , f: this.f + (this.destination.f - this.f) * pos\r\n      })\r\n\r\n      return matrix\r\n    }\r\n    // Multiplies by given matrix\r\n  , multiply: function(matrix) {\r\n      return new SVG.Matrix(this.native().multiply(parseMatrix(matrix).native()))\r\n    }\r\n    // Inverses matrix\r\n  , inverse: function() {\r\n      return new SVG.Matrix(this.native().inverse())\r\n    }\r\n    // Translate matrix\r\n  , translate: function(x, y) {\r\n      return new SVG.Matrix(this.native().translate(x || 0, y || 0))\r\n    }\r\n    // Scale matrix\r\n  , scale: function(x, y, cx, cy) {\r\n      // support uniformal scale\r\n      if (arguments.length == 1) {\r\n        y = x\r\n      } else if (arguments.length == 3) {\r\n        cy = cx\r\n        cx = y\r\n        y = x\r\n      }\r\n\r\n      return this.around(cx, cy, new SVG.Matrix(x, 0, 0, y, 0, 0))\r\n    }\r\n    // Rotate matrix\r\n  , rotate: function(r, cx, cy) {\r\n      // convert degrees to radians\r\n      r = SVG.utils.radians(r)\r\n\r\n      return this.around(cx, cy, new SVG.Matrix(Math.cos(r), Math.sin(r), -Math.sin(r), Math.cos(r), 0, 0))\r\n    }\r\n    // Flip matrix on x or y, at a given offset\r\n  , flip: function(a, o) {\r\n      return a == 'x' ?\r\n          this.scale(-1, 1, o, 0) :\r\n        a == 'y' ?\r\n          this.scale(1, -1, 0, o) :\r\n          this.scale(-1, -1, a, o != null ? o : a)\r\n    }\r\n    // Skew\r\n  , skew: function(x, y, cx, cy) {\r\n      // support uniformal skew\r\n      if (arguments.length == 1) {\r\n        y = x\r\n      } else if (arguments.length == 3) {\r\n        cy = cx\r\n        cx = y\r\n        y = x\r\n      }\r\n\r\n      // convert degrees to radians\r\n      x = SVG.utils.radians(x)\r\n      y = SVG.utils.radians(y)\r\n\r\n      return this.around(cx, cy, new SVG.Matrix(1, Math.tan(y), Math.tan(x), 1, 0, 0))\r\n    }\r\n    // SkewX\r\n  , skewX: function(x, cx, cy) {\r\n      return this.skew(x, 0, cx, cy)\r\n    }\r\n    // SkewY\r\n  , skewY: function(y, cx, cy) {\r\n      return this.skew(0, y, cx, cy)\r\n    }\r\n    // Transform around a center point\r\n  , around: function(cx, cy, matrix) {\r\n      return this\r\n        .multiply(new SVG.Matrix(1, 0, 0, 1, cx || 0, cy || 0))\r\n        .multiply(matrix)\r\n        .multiply(new SVG.Matrix(1, 0, 0, 1, -cx || 0, -cy || 0))\r\n    }\r\n    // Convert to native SVGMatrix\r\n  , native: function() {\r\n      // create new matrix\r\n      var matrix = SVG.parser.native.createSVGMatrix()\r\n\r\n      // update with current values\r\n      for (var i = abcdef.length - 1; i >= 0; i--)\r\n        matrix[abcdef[i]] = this[abcdef[i]]\r\n\r\n      return matrix\r\n    }\r\n    // Convert matrix to string\r\n  , toString: function() {\r\n      return 'matrix(' + this.a + ',' + this.b + ',' + this.c + ',' + this.d + ',' + this.e + ',' + this.f + ')'\r\n    }\r\n  }\r\n\r\n  // Define parent\r\n, parent: SVG.Element\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Get current matrix\r\n    ctm: function() {\r\n      return new SVG.Matrix(this.node.getCTM())\r\n    },\r\n    // Get current screen matrix\r\n    screenCTM: function() {\r\n      /* https://bugzilla.mozilla.org/show_bug.cgi?id=1344537\r\n         This is needed because FF does not return the transformation matrix\r\n         for the inner coordinate system when getScreenCTM() is called on nested svgs.\r\n         However all other Browsers do that */\r\n      if(this instanceof SVG.Nested) {\r\n        var rect = this.rect(1,1)\r\n        var m = rect.node.getScreenCTM()\r\n        rect.remove()\r\n        return new SVG.Matrix(m)\r\n      }\r\n      return new SVG.Matrix(this.node.getScreenCTM())\r\n    }\r\n\r\n  }\r\n\r\n})\r\n\nSVG.Point = SVG.invent({\r\n  // Initialize\r\n  create: function(x,y) {\r\n    var i, source, base = {x:0, y:0}\r\n\r\n    // ensure source as object\r\n    source = Array.isArray(x) ?\r\n      {x:x[0], y:x[1]} :\r\n    typeof x === 'object' ?\r\n      {x:x.x, y:x.y} :\r\n    x != null ?\r\n      {x:x, y:(y != null ? y : x)} : base // If y has no value, then x is used has its value\r\n\r\n    // merge source\r\n    this.x = source.x\r\n    this.y = source.y\r\n  }\r\n\r\n  // Add methods\r\n, extend: {\r\n    // Clone point\r\n    clone: function() {\r\n      return new SVG.Point(this)\r\n    }\r\n    // Morph one point into another\r\n  , morph: function(x, y) {\r\n      // store new destination\r\n      this.destination = new SVG.Point(x, y)\r\n\r\n      return this\r\n    }\r\n    // Get morphed point at a given position\r\n  , at: function(pos) {\r\n      // make sure a destination is defined\r\n      if (!this.destination) return this\r\n\r\n      // calculate morphed matrix at a given position\r\n      var point = new SVG.Point({\r\n        x: this.x + (this.destination.x - this.x) * pos\r\n      , y: this.y + (this.destination.y - this.y) * pos\r\n      })\r\n\r\n      return point\r\n    }\r\n    // Convert to native SVGPoint\r\n  , native: function() {\r\n      // create new point\r\n      var point = SVG.parser.native.createSVGPoint()\r\n\r\n      // update with current values\r\n      point.x = this.x\r\n      point.y = this.y\r\n\r\n      return point\r\n    }\r\n    // transform point with matrix\r\n  , transform: function(matrix) {\r\n      return new SVG.Point(this.native().matrixTransform(matrix.native()))\r\n    }\r\n\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.Element, {\r\n\r\n  // Get point\r\n  point: function(x, y) {\r\n    return new SVG.Point(x,y).transform(this.screenCTM().inverse());\r\n  }\r\n\r\n})\r\n\nSVG.extend(SVG.Element, {\r\n  // Set svg element attribute\r\n  attr: function(a, v, n) {\r\n    // act as full getter\r\n    if (a == null) {\r\n      // get an object of attributes\r\n      a = {}\r\n      v = this.node.attributes\r\n      for (n = v.length - 1; n >= 0; n--)\r\n        a[v[n].nodeName] = SVG.regex.isNumber.test(v[n].nodeValue) ? parseFloat(v[n].nodeValue) : v[n].nodeValue\r\n\r\n      return a\r\n\r\n    } else if (typeof a == 'object') {\r\n      // apply every attribute individually if an object is passed\r\n      for (v in a) this.attr(v, a[v])\r\n\r\n    } else if (v === null) {\r\n        // remove value\r\n        this.node.removeAttribute(a)\r\n\r\n    } else if (v == null) {\r\n      // act as a getter if the first and only argument is not an object\r\n      v = this.node.getAttribute(a)\r\n      return v == null ?\r\n        SVG.defaults.attrs[a] :\r\n      SVG.regex.isNumber.test(v) ?\r\n        parseFloat(v) : v\r\n\r\n    } else {\r\n      // BUG FIX: some browsers will render a stroke if a color is given even though stroke width is 0\r\n      if (a == 'stroke-width')\r\n        this.attr('stroke', parseFloat(v) > 0 ? this._stroke : null)\r\n      else if (a == 'stroke')\r\n        this._stroke = v\r\n\r\n      // convert image fill and stroke to patterns\r\n      if (a == 'fill' || a == 'stroke') {\r\n        if (SVG.regex.isImage.test(v))\r\n          v = this.doc().defs().image(v, 0, 0)\r\n\r\n        if (v instanceof SVG.Image)\r\n          v = this.doc().defs().pattern(0, 0, function() {\r\n            this.add(v)\r\n          })\r\n      }\r\n\r\n      // ensure correct numeric values (also accepts NaN and Infinity)\r\n      if (typeof v === 'number')\r\n        v = new SVG.Number(v)\r\n\r\n      // ensure full hex color\r\n      else if (SVG.Color.isColor(v))\r\n        v = new SVG.Color(v)\r\n\r\n      // parse array values\r\n      else if (Array.isArray(v))\r\n        v = new SVG.Array(v)\r\n\r\n      // if the passed attribute is leading...\r\n      if (a == 'leading') {\r\n        // ... call the leading method instead\r\n        if (this.leading)\r\n          this.leading(v)\r\n      } else {\r\n        // set given attribute on node\r\n        typeof n === 'string' ?\r\n          this.node.setAttributeNS(n, a, v.toString()) :\r\n          this.node.setAttribute(a, v.toString())\r\n      }\r\n\r\n      // rebuild if required\r\n      if (this.rebuild && (a == 'font-size' || a == 'x'))\r\n        this.rebuild(a, v)\r\n    }\r\n\r\n    return this\r\n  }\r\n})\nSVG.extend(SVG.Element, {\r\n  // Add transformations\r\n  transform: function(o, relative) {\r\n    // get target in case of the fx module, otherwise reference this\r\n    var target = this\r\n      , matrix, bbox\r\n\r\n    // act as a getter\r\n    if (typeof o !== 'object') {\r\n      // get current matrix\r\n      matrix = new SVG.Matrix(target).extract()\r\n\r\n      return typeof o === 'string' ? matrix[o] : matrix\r\n    }\r\n\r\n    // get current matrix\r\n    matrix = new SVG.Matrix(target)\r\n\r\n    // ensure relative flag\r\n    relative = !!relative || !!o.relative\r\n\r\n    // act on matrix\r\n    if (o.a != null) {\r\n      matrix = relative ?\r\n        // relative\r\n        matrix.multiply(new SVG.Matrix(o)) :\r\n        // absolute\r\n        new SVG.Matrix(o)\r\n\r\n    // act on rotation\r\n    } else if (o.rotation != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // apply transformation\r\n      matrix = relative ?\r\n        // relative\r\n        matrix.rotate(o.rotation, o.cx, o.cy) :\r\n        // absolute\r\n        matrix.rotate(o.rotation - matrix.extract().rotation, o.cx, o.cy)\r\n\r\n    // act on scale\r\n    } else if (o.scale != null || o.scaleX != null || o.scaleY != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // ensure scale values on both axes\r\n      o.scaleX = o.scale != null ? o.scale : o.scaleX != null ? o.scaleX : 1\r\n      o.scaleY = o.scale != null ? o.scale : o.scaleY != null ? o.scaleY : 1\r\n\r\n      if (!relative) {\r\n        // absolute; multiply inversed values\r\n        var e = matrix.extract()\r\n        o.scaleX = o.scaleX * 1 / e.scaleX\r\n        o.scaleY = o.scaleY * 1 / e.scaleY\r\n      }\r\n\r\n      matrix = matrix.scale(o.scaleX, o.scaleY, o.cx, o.cy)\r\n\r\n    // act on skew\r\n    } else if (o.skew != null || o.skewX != null || o.skewY != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // ensure skew values on both axes\r\n      o.skewX = o.skew != null ? o.skew : o.skewX != null ? o.skewX : 0\r\n      o.skewY = o.skew != null ? o.skew : o.skewY != null ? o.skewY : 0\r\n\r\n      if (!relative) {\r\n        // absolute; reset skew values\r\n        var e = matrix.extract()\r\n        matrix = matrix.multiply(new SVG.Matrix().skew(e.skewX, e.skewY, o.cx, o.cy).inverse())\r\n      }\r\n\r\n      matrix = matrix.skew(o.skewX, o.skewY, o.cx, o.cy)\r\n\r\n    // act on flip\r\n    } else if (o.flip) {\r\n      if(o.flip == 'x' || o.flip == 'y') {\r\n        o.offset = o.offset == null ? target.bbox()['c' + o.flip] : o.offset\r\n      } else {\r\n        if(o.offset == null) {\r\n          bbox = target.bbox()\r\n          o.flip = bbox.cx\r\n          o.offset = bbox.cy\r\n        } else {\r\n          o.flip = o.offset\r\n        }\r\n      }\r\n\r\n      matrix = new SVG.Matrix().flip(o.flip, o.offset)\r\n\r\n    // act on translate\r\n    } else if (o.x != null || o.y != null) {\r\n      if (relative) {\r\n        // relative\r\n        matrix = matrix.translate(o.x, o.y)\r\n      } else {\r\n        // absolute\r\n        if (o.x != null) matrix.e = o.x\r\n        if (o.y != null) matrix.f = o.y\r\n      }\r\n    }\r\n\r\n    return this.attr('transform', matrix)\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.FX, {\r\n  transform: function(o, relative) {\r\n    // get target in case of the fx module, otherwise reference this\r\n    var target = this.target()\r\n      , matrix, bbox\r\n\r\n    // act as a getter\r\n    if (typeof o !== 'object') {\r\n      // get current matrix\r\n      matrix = new SVG.Matrix(target).extract()\r\n\r\n      return typeof o === 'string' ? matrix[o] : matrix\r\n    }\r\n\r\n    // ensure relative flag\r\n    relative = !!relative || !!o.relative\r\n\r\n    // act on matrix\r\n    if (o.a != null) {\r\n      matrix = new SVG.Matrix(o)\r\n\r\n    // act on rotation\r\n    } else if (o.rotation != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // apply transformation\r\n      matrix = new SVG.Rotate(o.rotation, o.cx, o.cy)\r\n\r\n    // act on scale\r\n    } else if (o.scale != null || o.scaleX != null || o.scaleY != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // ensure scale values on both axes\r\n      o.scaleX = o.scale != null ? o.scale : o.scaleX != null ? o.scaleX : 1\r\n      o.scaleY = o.scale != null ? o.scale : o.scaleY != null ? o.scaleY : 1\r\n\r\n      matrix = new SVG.Scale(o.scaleX, o.scaleY, o.cx, o.cy)\r\n\r\n    // act on skew\r\n    } else if (o.skewX != null || o.skewY != null) {\r\n      // ensure centre point\r\n      ensureCentre(o, target)\r\n\r\n      // ensure skew values on both axes\r\n      o.skewX = o.skewX != null ? o.skewX : 0\r\n      o.skewY = o.skewY != null ? o.skewY : 0\r\n\r\n      matrix = new SVG.Skew(o.skewX, o.skewY, o.cx, o.cy)\r\n\r\n    // act on flip\r\n    } else if (o.flip) {\r\n      if(o.flip == 'x' || o.flip == 'y') {\r\n        o.offset = o.offset == null ? target.bbox()['c' + o.flip] : o.offset\r\n      } else {\r\n        if(o.offset == null) {\r\n          bbox = target.bbox()\r\n          o.flip = bbox.cx\r\n          o.offset = bbox.cy\r\n        } else {\r\n          o.flip = o.offset\r\n        }\r\n      }\r\n\r\n      matrix = new SVG.Matrix().flip(o.flip, o.offset)\r\n\r\n    // act on translate\r\n    } else if (o.x != null || o.y != null) {\r\n      matrix = new SVG.Translate(o.x, o.y)\r\n    }\r\n\r\n    if(!matrix) return this\r\n\r\n    matrix.relative = relative\r\n\r\n    this.last().transforms.push(matrix)\r\n\r\n    return this._callStart()\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Element, {\r\n  // Reset all transformations\r\n  untransform: function() {\r\n    return this.attr('transform', null)\r\n  },\r\n  // merge the whole transformation chain into one matrix and returns it\r\n  matrixify: function() {\r\n\r\n    var matrix = (this.attr('transform') || '')\r\n      // split transformations\r\n      .split(SVG.regex.transforms).slice(0,-1).map(function(str){\r\n        // generate key => value pairs\r\n        var kv = str.trim().split('(')\r\n        return [kv[0], kv[1].split(SVG.regex.delimiter).map(function(str){ return parseFloat(str) })]\r\n      })\r\n      // merge every transformation into one matrix\r\n      .reduce(function(matrix, transform){\r\n\r\n        if(transform[0] == 'matrix') return matrix.multiply(arrayToMatrix(transform[1]))\r\n        return matrix[transform[0]].apply(matrix, transform[1])\r\n\r\n      }, new SVG.Matrix())\r\n\r\n    return matrix\r\n  },\r\n  // add an element to another parent without changing the visual representation on the screen\r\n  toParent: function(parent) {\r\n    if(this == parent) return this\r\n    var ctm = this.screenCTM()\r\n    var pCtm = parent.screenCTM().inverse()\r\n\r\n    this.addTo(parent).untransform().transform(pCtm.multiply(ctm))\r\n\r\n    return this\r\n  },\r\n  // same as above with parent equals root-svg\r\n  toDoc: function() {\r\n    return this.toParent(this.doc())\r\n  }\r\n\r\n})\r\n\r\nSVG.Transformation = SVG.invent({\r\n\r\n  create: function(source, inversed){\r\n\r\n    if(arguments.length > 1 && typeof inversed != 'boolean'){\r\n      return this.constructor.call(this, [].slice.call(arguments))\r\n    }\r\n\r\n    if(Array.isArray(source)){\r\n      for(var i = 0, len = this.arguments.length; i < len; ++i){\r\n        this[this.arguments[i]] = source[i]\r\n      }\r\n    } else if(typeof source == 'object'){\r\n      for(var i = 0, len = this.arguments.length; i < len; ++i){\r\n        this[this.arguments[i]] = source[this.arguments[i]]\r\n      }\r\n    }\r\n\r\n    this.inversed = false\r\n\r\n    if(inversed === true){\r\n      this.inversed = true\r\n    }\r\n\r\n  }\r\n\r\n, extend: {\r\n\r\n    arguments: []\r\n  , method: ''\r\n\r\n  , at: function(pos){\r\n\r\n      var params = []\r\n\r\n      for(var i = 0, len = this.arguments.length; i < len; ++i){\r\n        params.push(this[this.arguments[i]])\r\n      }\r\n\r\n      var m = this._undo || new SVG.Matrix()\r\n\r\n      m = new SVG.Matrix().morph(SVG.Matrix.prototype[this.method].apply(m, params)).at(pos)\r\n\r\n      return this.inversed ? m.inverse() : m\r\n\r\n    }\r\n\r\n  , undo: function(o){\r\n      for(var i = 0, len = this.arguments.length; i < len; ++i){\r\n        o[this.arguments[i]] = typeof this[this.arguments[i]] == 'undefined' ? 0 : o[this.arguments[i]]\r\n      }\r\n\r\n      // The method SVG.Matrix.extract which was used before calling this\r\n      // method to obtain a value for the parameter o doesn't return a cx and\r\n      // a cy so we use the ones that were provided to this object at its creation\r\n      o.cx = this.cx\r\n      o.cy = this.cy\r\n\r\n      this._undo = new SVG[capitalize(this.method)](o, true).at(1)\r\n\r\n      return this\r\n    }\r\n\r\n  }\r\n\r\n})\r\n\r\nSVG.Translate = SVG.invent({\r\n\r\n  parent: SVG.Matrix\r\n, inherit: SVG.Transformation\r\n\r\n, create: function(source, inversed){\r\n    this.constructor.apply(this, [].slice.call(arguments))\r\n  }\r\n\r\n, extend: {\r\n    arguments: ['transformedX', 'transformedY']\r\n  , method: 'translate'\r\n  }\r\n\r\n})\r\n\r\nSVG.Rotate = SVG.invent({\r\n\r\n  parent: SVG.Matrix\r\n, inherit: SVG.Transformation\r\n\r\n, create: function(source, inversed){\r\n    this.constructor.apply(this, [].slice.call(arguments))\r\n  }\r\n\r\n, extend: {\r\n    arguments: ['rotation', 'cx', 'cy']\r\n  , method: 'rotate'\r\n  , at: function(pos){\r\n      var m = new SVG.Matrix().rotate(new SVG.Number().morph(this.rotation - (this._undo ? this._undo.rotation : 0)).at(pos), this.cx, this.cy)\r\n      return this.inversed ? m.inverse() : m\r\n    }\r\n  , undo: function(o){\r\n      this._undo = o\r\n      return this\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.Scale = SVG.invent({\r\n\r\n  parent: SVG.Matrix\r\n, inherit: SVG.Transformation\r\n\r\n, create: function(source, inversed){\r\n    this.constructor.apply(this, [].slice.call(arguments))\r\n  }\r\n\r\n, extend: {\r\n    arguments: ['scaleX', 'scaleY', 'cx', 'cy']\r\n  , method: 'scale'\r\n  }\r\n\r\n})\r\n\r\nSVG.Skew = SVG.invent({\r\n\r\n  parent: SVG.Matrix\r\n, inherit: SVG.Transformation\r\n\r\n, create: function(source, inversed){\r\n    this.constructor.apply(this, [].slice.call(arguments))\r\n  }\r\n\r\n, extend: {\r\n    arguments: ['skewX', 'skewY', 'cx', 'cy']\r\n  , method: 'skew'\r\n  }\r\n\r\n})\r\n\nSVG.extend(SVG.Element, {\r\n  // Dynamic style generator\r\n  style: function(s, v) {\r\n    if (arguments.length == 0) {\r\n      // get full style\r\n      return this.node.style.cssText || ''\r\n\r\n    } else if (arguments.length < 2) {\r\n      // apply every style individually if an object is passed\r\n      if (typeof s == 'object') {\r\n        for (v in s) this.style(v, s[v])\r\n\r\n      } else if (SVG.regex.isCss.test(s)) {\r\n        // parse css string\r\n        s = s.split(/\\s*;\\s*/)\r\n          // filter out suffix ; and stuff like ;;\r\n          .filter(function(e) { return !!e })\r\n          .map(function(e){ return e.split(/\\s*:\\s*/) })\r\n\r\n        // apply every definition individually\r\n        while (v = s.pop()) {\r\n          this.style(v[0], v[1])\r\n        }\r\n      } else {\r\n        // act as a getter if the first and only argument is not an object\r\n        return this.node.style[camelCase(s)]\r\n      }\r\n\r\n    } else {\r\n      this.node.style[camelCase(s)] = v === null || SVG.regex.isBlank.test(v) ? '' : v\r\n    }\r\n\r\n    return this\r\n  }\r\n})\nSVG.Parent = SVG.invent({\r\n  // Initialize node\r\n  create: function(element) {\r\n    this.constructor.call(this, element)\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Element\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Returns all child elements\r\n    children: function() {\r\n      return SVG.utils.map(SVG.utils.filterSVGElements(this.node.childNodes), function(node) {\r\n        return SVG.adopt(node)\r\n      })\r\n    }\r\n    // Add given element at a position\r\n  , add: function(element, i) {\r\n      if (i == null)\r\n        this.node.appendChild(element.node)\r\n      else if (element.node != this.node.childNodes[i])\r\n        this.node.insertBefore(element.node, this.node.childNodes[i])\r\n\r\n      return this\r\n    }\r\n    // Basically does the same as `add()` but returns the added element instead\r\n  , put: function(element, i) {\r\n      this.add(element, i)\r\n      return element\r\n    }\r\n    // Checks if the given element is a child\r\n  , has: function(element) {\r\n      return this.index(element) >= 0\r\n    }\r\n    // Gets index of given element\r\n  , index: function(element) {\r\n      return [].slice.call(this.node.childNodes).indexOf(element.node)\r\n    }\r\n    // Get a element at the given index\r\n  , get: function(i) {\r\n      return SVG.adopt(this.node.childNodes[i])\r\n    }\r\n    // Get first child\r\n  , first: function() {\r\n      return this.get(0)\r\n    }\r\n    // Get the last child\r\n  , last: function() {\r\n      return this.get(this.node.childNodes.length - 1)\r\n    }\r\n    // Iterates over all children and invokes a given block\r\n  , each: function(block, deep) {\r\n      var i, il\r\n        , children = this.children()\r\n\r\n      for (i = 0, il = children.length; i < il; i++) {\r\n        if (children[i] instanceof SVG.Element)\r\n          block.apply(children[i], [i, children])\r\n\r\n        if (deep && (children[i] instanceof SVG.Container))\r\n          children[i].each(block, deep)\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Remove a given child\r\n  , removeElement: function(element) {\r\n      this.node.removeChild(element.node)\r\n\r\n      return this\r\n    }\r\n    // Remove all elements in this container\r\n  , clear: function() {\r\n      // remove children\r\n      while(this.node.hasChildNodes())\r\n        this.node.removeChild(this.node.lastChild)\r\n\r\n      // remove defs reference\r\n      delete this._defs\r\n\r\n      return this\r\n    }\r\n  , // Get defs\r\n    defs: function() {\r\n      return this.doc().defs()\r\n    }\r\n  }\r\n\r\n})\r\n\nSVG.extend(SVG.Parent, {\r\n\r\n  ungroup: function(parent, depth) {\r\n    if(depth === 0 || this instanceof SVG.Defs || this.node == SVG.parser.draw) return this\r\n\r\n    parent = parent || (this instanceof SVG.Doc ? this : this.parent(SVG.Parent))\r\n    depth = depth || Infinity\r\n\r\n    this.each(function(){\r\n      if(this instanceof SVG.Defs) return this\r\n      if(this instanceof SVG.Parent) return this.ungroup(parent, depth-1)\r\n      return this.toParent(parent)\r\n    })\r\n\r\n    this.node.firstChild || this.remove()\r\n\r\n    return this\r\n  },\r\n\r\n  flatten: function(parent, depth) {\r\n    return this.ungroup(parent, depth)\r\n  }\r\n\r\n})\nSVG.Container = SVG.invent({\r\n  // Initialize node\r\n  create: function(element) {\r\n    this.constructor.call(this, element)\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Parent\r\n\r\n})\n\r\nSVG.ViewBox = SVG.invent({\r\n\r\n  create: function(source) {\r\n    var i, base = [0, 0, 0, 0]\r\n\r\n    var x, y, width, height, box, view, we, he\r\n      , wm   = 1 // width multiplier\r\n      , hm   = 1 // height multiplier\r\n      , reg  = /[+-]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?/gi\r\n\r\n    if(source instanceof SVG.Element){\r\n\r\n      we = source\r\n      he = source\r\n      view = (source.attr('viewBox') || '').match(reg)\r\n      box = source.bbox\r\n\r\n      // get dimensions of current node\r\n      width  = new SVG.Number(source.width())\r\n      height = new SVG.Number(source.height())\r\n\r\n      // find nearest non-percentual dimensions\r\n      while (width.unit == '%') {\r\n        wm *= width.value\r\n        width = new SVG.Number(we instanceof SVG.Doc ? we.parent().offsetWidth : we.parent().width())\r\n        we = we.parent()\r\n      }\r\n      while (height.unit == '%') {\r\n        hm *= height.value\r\n        height = new SVG.Number(he instanceof SVG.Doc ? he.parent().offsetHeight : he.parent().height())\r\n        he = he.parent()\r\n      }\r\n\r\n      // ensure defaults\r\n      this.x      = 0\r\n      this.y      = 0\r\n      this.width  = width  * wm\r\n      this.height = height * hm\r\n      this.zoom   = 1\r\n\r\n      if (view) {\r\n        // get width and height from viewbox\r\n        x      = parseFloat(view[0])\r\n        y      = parseFloat(view[1])\r\n        width  = parseFloat(view[2])\r\n        height = parseFloat(view[3])\r\n\r\n        // calculate zoom accoring to viewbox\r\n        this.zoom = ((this.width / this.height) > (width / height)) ?\r\n          this.height / height :\r\n          this.width  / width\r\n\r\n        // calculate real pixel dimensions on parent SVG.Doc element\r\n        this.x      = x\r\n        this.y      = y\r\n        this.width  = width\r\n        this.height = height\r\n\r\n      }\r\n\r\n    }else{\r\n\r\n      // ensure source as object\r\n      source = typeof source === 'string' ?\r\n        source.match(reg).map(function(el){ return parseFloat(el) }) :\r\n      Array.isArray(source) ?\r\n        source :\r\n      typeof source == 'object' ?\r\n        [source.x, source.y, source.width, source.height] :\r\n      arguments.length == 4 ?\r\n        [].slice.call(arguments) :\r\n        base\r\n\r\n      this.x = source[0]\r\n      this.y = source[1]\r\n      this.width = source[2]\r\n      this.height = source[3]\r\n    }\r\n\r\n\r\n  }\r\n\r\n, extend: {\r\n\r\n    toString: function() {\r\n      return this.x + ' ' + this.y + ' ' + this.width + ' ' + this.height\r\n    }\r\n  , morph: function(x, y, width, height){\r\n      this.destination = new SVG.ViewBox(x, y, width, height)\r\n      return this\r\n    }\r\n\r\n  , at: function(pos) {\r\n\r\n      if(!this.destination) return this\r\n\r\n      return new SVG.ViewBox([\r\n          this.x + (this.destination.x - this.x) * pos\r\n        , this.y + (this.destination.y - this.y) * pos\r\n        , this.width + (this.destination.width - this.width) * pos\r\n        , this.height + (this.destination.height - this.height) * pos\r\n      ])\r\n\r\n    }\r\n\r\n  }\r\n\r\n  // Define parent\r\n, parent: SVG.Container\r\n\r\n  // Add parent method\r\n, construct: {\r\n\r\n    // get/set viewbox\r\n    viewbox: function(x, y, width, height) {\r\n      if (arguments.length == 0)\r\n        // act as a getter if there are no arguments\r\n        return new SVG.ViewBox(this)\r\n\r\n      // otherwise act as a setter\r\n      return this.attr('viewBox', new SVG.ViewBox(x, y, width, height))\r\n    }\r\n\r\n  }\r\n\r\n})\n// Add events to elements\r\n;[  'click'\r\n  , 'dblclick'\r\n  , 'mousedown'\r\n  , 'mouseup'\r\n  , 'mouseover'\r\n  , 'mouseout'\r\n  , 'mousemove'\r\n  // , 'mouseenter' -> not supported by IE\r\n  // , 'mouseleave' -> not supported by IE\r\n  , 'touchstart'\r\n  , 'touchmove'\r\n  , 'touchleave'\r\n  , 'touchend'\r\n  , 'touchcancel' ].forEach(function(event) {\r\n\r\n  // add event to SVG.Element\r\n  SVG.Element.prototype[event] = function(f) {\r\n    // bind event to element rather than element node\r\n    SVG.on(this.node, event, f)\r\n    return this\r\n  }\r\n})\r\n\r\n// Initialize listeners stack\r\nSVG.listeners = []\r\nSVG.handlerMap = []\r\nSVG.listenerId = 0\r\n\r\n// Add event binder in the SVG namespace\r\nSVG.on = function(node, event, listener, binding, options) {\r\n  // create listener, get object-index\r\n  var l     = listener.bind(binding || node.instance || node)\r\n    , index = (SVG.handlerMap.indexOf(node) + 1 || SVG.handlerMap.push(node)) - 1\r\n    , ev    = event.split('.')[0]\r\n    , ns    = event.split('.')[1] || '*'\r\n\r\n\r\n  // ensure valid object\r\n  SVG.listeners[index]         = SVG.listeners[index]         || {}\r\n  SVG.listeners[index][ev]     = SVG.listeners[index][ev]     || {}\r\n  SVG.listeners[index][ev][ns] = SVG.listeners[index][ev][ns] || {}\r\n\r\n  if(!listener._svgjsListenerId)\r\n    listener._svgjsListenerId = ++SVG.listenerId\r\n\r\n  // reference listener\r\n  SVG.listeners[index][ev][ns][listener._svgjsListenerId] = l\r\n\r\n  // add listener\r\n  node.addEventListener(ev, l, options || false)\r\n}\r\n\r\n// Add event unbinder in the SVG namespace\r\nSVG.off = function(node, event, listener) {\r\n  var index = SVG.handlerMap.indexOf(node)\r\n    , ev    = event && event.split('.')[0]\r\n    , ns    = event && event.split('.')[1]\r\n    , namespace = ''\r\n\r\n  if(index == -1) return\r\n\r\n  if (listener) {\r\n    if(typeof listener == 'function') listener = listener._svgjsListenerId\r\n    if(!listener) return\r\n\r\n    // remove listener reference\r\n    if (SVG.listeners[index][ev] && SVG.listeners[index][ev][ns || '*']) {\r\n      // remove listener\r\n      node.removeEventListener(ev, SVG.listeners[index][ev][ns || '*'][listener], false)\r\n\r\n      delete SVG.listeners[index][ev][ns || '*'][listener]\r\n    }\r\n\r\n  } else if (ns && ev) {\r\n    // remove all listeners for a namespaced event\r\n    if (SVG.listeners[index][ev] && SVG.listeners[index][ev][ns]) {\r\n      for (listener in SVG.listeners[index][ev][ns])\r\n        SVG.off(node, [ev, ns].join('.'), listener)\r\n\r\n      delete SVG.listeners[index][ev][ns]\r\n    }\r\n\r\n  } else if (ns){\r\n    // remove all listeners for a specific namespace\r\n    for(event in SVG.listeners[index]){\r\n        for(namespace in SVG.listeners[index][event]){\r\n            if(ns === namespace){\r\n                SVG.off(node, [event, ns].join('.'))\r\n            }\r\n        }\r\n    }\r\n\r\n  } else if (ev) {\r\n    // remove all listeners for the event\r\n    if (SVG.listeners[index][ev]) {\r\n      for (namespace in SVG.listeners[index][ev])\r\n        SVG.off(node, [ev, namespace].join('.'))\r\n\r\n      delete SVG.listeners[index][ev]\r\n    }\r\n\r\n  } else {\r\n    // remove all listeners on a given node\r\n    for (event in SVG.listeners[index])\r\n      SVG.off(node, event)\r\n\r\n    delete SVG.listeners[index]\r\n    delete SVG.handlerMap[index]\r\n\r\n  }\r\n}\r\n\r\n//\r\nSVG.extend(SVG.Element, {\r\n  // Bind given event to listener\r\n  on: function(event, listener, binding, options) {\r\n    SVG.on(this.node, event, listener, binding, options)\r\n\r\n    return this\r\n  }\r\n  // Unbind event from listener\r\n, off: function(event, listener) {\r\n    SVG.off(this.node, event, listener)\r\n\r\n    return this\r\n  }\r\n  // Fire given event\r\n, fire: function(event, data) {\r\n\r\n    // Dispatch event\r\n    if(event instanceof window.Event){\r\n        this.node.dispatchEvent(event)\r\n    }else{\r\n        this.node.dispatchEvent(event = new window.CustomEvent(event, {detail:data, cancelable: true}))\r\n    }\r\n\r\n    this._event = event\r\n    return this\r\n  }\r\n, event: function() {\r\n    return this._event\r\n  }\r\n})\r\n\n\r\nSVG.Defs = SVG.invent({\r\n  // Initialize node\r\n  create: 'defs'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n})\nSVG.G = SVG.invent({\r\n  // Initialize node\r\n  create: 'g'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Move over x-axis\r\n    x: function(x) {\r\n      return x == null ? this.transform('x') : this.transform({ x: x - this.x() }, true)\r\n    }\r\n    // Move over y-axis\r\n  , y: function(y) {\r\n      return y == null ? this.transform('y') : this.transform({ y: y - this.y() }, true)\r\n    }\r\n    // Move by center over x-axis\r\n  , cx: function(x) {\r\n      return x == null ? this.gbox().cx : this.x(x - this.gbox().width / 2)\r\n    }\r\n    // Move by center over y-axis\r\n  , cy: function(y) {\r\n      return y == null ? this.gbox().cy : this.y(y - this.gbox().height / 2)\r\n    }\r\n  , gbox: function() {\r\n\r\n      var bbox  = this.bbox()\r\n        , trans = this.transform()\r\n\r\n      bbox.x  += trans.x\r\n      bbox.x2 += trans.x\r\n      bbox.cx += trans.x\r\n\r\n      bbox.y  += trans.y\r\n      bbox.y2 += trans.y\r\n      bbox.cy += trans.y\r\n\r\n      return bbox\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a group element\r\n    group: function() {\r\n      return this.put(new SVG.G)\r\n    }\r\n  }\r\n})\r\n\n// ### This module adds backward / forward functionality to elements.\r\n\r\n//\r\nSVG.extend(SVG.Element, {\r\n  // Get all siblings, including myself\r\n  siblings: function() {\r\n    return this.parent().children()\r\n  }\r\n  // Get the curent position siblings\r\n, position: function() {\r\n    return this.parent().index(this)\r\n  }\r\n  // Get the next element (will return null if there is none)\r\n, next: function() {\r\n    return this.siblings()[this.position() + 1]\r\n  }\r\n  // Get the next element (will return null if there is none)\r\n, previous: function() {\r\n    return this.siblings()[this.position() - 1]\r\n  }\r\n  // Send given element one step forward\r\n, forward: function() {\r\n    var i = this.position() + 1\r\n      , p = this.parent()\r\n\r\n    // move node one step forward\r\n    p.removeElement(this).add(this, i)\r\n\r\n    // make sure defs node is always at the top\r\n    if (p instanceof SVG.Doc)\r\n      p.node.appendChild(p.defs().node)\r\n\r\n    return this\r\n  }\r\n  // Send given element one step backward\r\n, backward: function() {\r\n    var i = this.position()\r\n\r\n    if (i > 0)\r\n      this.parent().removeElement(this).add(this, i - 1)\r\n\r\n    return this\r\n  }\r\n  // Send given element all the way to the front\r\n, front: function() {\r\n    var p = this.parent()\r\n\r\n    // Move node forward\r\n    p.node.appendChild(this.node)\r\n\r\n    // Make sure defs node is always at the top\r\n    if (p instanceof SVG.Doc)\r\n      p.node.appendChild(p.defs().node)\r\n\r\n    return this\r\n  }\r\n  // Send given element all the way to the back\r\n, back: function() {\r\n    if (this.position() > 0)\r\n      this.parent().removeElement(this).add(this, 0)\r\n\r\n    return this\r\n  }\r\n  // Inserts a given element before the targeted element\r\n, before: function(element) {\r\n    element.remove()\r\n\r\n    var i = this.position()\r\n\r\n    this.parent().add(element, i)\r\n\r\n    return this\r\n  }\r\n  // Insters a given element after the targeted element\r\n, after: function(element) {\r\n    element.remove()\r\n\r\n    var i = this.position()\r\n\r\n    this.parent().add(element, i + 1)\r\n\r\n    return this\r\n  }\r\n\r\n})\nSVG.Mask = SVG.invent({\r\n  // Initialize node\r\n  create: function() {\r\n    this.constructor.call(this, SVG.create('mask'))\r\n\r\n    // keep references to masked elements\r\n    this.targets = []\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Unmask all masked elements and remove itself\r\n    remove: function() {\r\n      // unmask all targets\r\n      for (var i = this.targets.length - 1; i >= 0; i--)\r\n        if (this.targets[i])\r\n          this.targets[i].unmask()\r\n      this.targets = []\r\n\r\n      // remove mask from parent\r\n      this.parent().removeElement(this)\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create masking element\r\n    mask: function() {\r\n      return this.defs().put(new SVG.Mask)\r\n    }\r\n  }\r\n})\r\n\r\n\r\nSVG.extend(SVG.Element, {\r\n  // Distribute mask to svg element\r\n  maskWith: function(element) {\r\n    // use given mask or create a new one\r\n    this.masker = element instanceof SVG.Mask ? element : this.parent().mask().add(element)\r\n\r\n    // store reverence on self in mask\r\n    this.masker.targets.push(this)\r\n\r\n    // apply mask\r\n    return this.attr('mask', 'url(\"#' + this.masker.attr('id') + '\")')\r\n  }\r\n  // Unmask element\r\n, unmask: function() {\r\n    delete this.masker\r\n    return this.attr('mask', null)\r\n  }\r\n\r\n})\r\n\nSVG.ClipPath = SVG.invent({\r\n  // Initialize node\r\n  create: function() {\r\n    this.constructor.call(this, SVG.create('clipPath'))\r\n\r\n    // keep references to clipped elements\r\n    this.targets = []\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Unclip all clipped elements and remove itself\r\n    remove: function() {\r\n      // unclip all targets\r\n      for (var i = this.targets.length - 1; i >= 0; i--)\r\n        if (this.targets[i])\r\n          this.targets[i].unclip()\r\n      this.targets = []\r\n\r\n      // remove clipPath from parent\r\n      this.parent().removeElement(this)\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create clipping element\r\n    clip: function() {\r\n      return this.defs().put(new SVG.ClipPath)\r\n    }\r\n  }\r\n})\r\n\r\n//\r\nSVG.extend(SVG.Element, {\r\n  // Distribute clipPath to svg element\r\n  clipWith: function(element) {\r\n    // use given clip or create a new one\r\n    this.clipper = element instanceof SVG.ClipPath ? element : this.parent().clip().add(element)\r\n\r\n    // store reverence on self in mask\r\n    this.clipper.targets.push(this)\r\n\r\n    // apply mask\r\n    return this.attr('clip-path', 'url(\"#' + this.clipper.attr('id') + '\")')\r\n  }\r\n  // Unclip element\r\n, unclip: function() {\r\n    delete this.clipper\r\n    return this.attr('clip-path', null)\r\n  }\r\n\r\n})\nSVG.Gradient = SVG.invent({\r\n  // Initialize node\r\n  create: function(type) {\r\n    this.constructor.call(this, SVG.create(type + 'Gradient'))\r\n\r\n    // store type\r\n    this.type = type\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Add a color stop\r\n    at: function(offset, color, opacity) {\r\n      return this.put(new SVG.Stop).update(offset, color, opacity)\r\n    }\r\n    // Update gradient\r\n  , update: function(block) {\r\n      // remove all stops\r\n      this.clear()\r\n\r\n      // invoke passed block\r\n      if (typeof block == 'function')\r\n        block.call(this, this)\r\n\r\n      return this\r\n    }\r\n    // Return the fill id\r\n  , fill: function() {\r\n      return 'url(#' + this.id() + ')'\r\n    }\r\n    // Alias string convertion to fill\r\n  , toString: function() {\r\n      return this.fill()\r\n    }\r\n    // custom attr to handle transform\r\n  , attr: function(a, b, c) {\r\n      if(a == 'transform') a = 'gradientTransform'\r\n      return SVG.Container.prototype.attr.call(this, a, b, c)\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create gradient element in defs\r\n    gradient: function(type, block) {\r\n      return this.defs().gradient(type, block)\r\n    }\r\n  }\r\n})\r\n\r\n// Add animatable methods to both gradient and fx module\r\nSVG.extend(SVG.Gradient, SVG.FX, {\r\n  // From position\r\n  from: function(x, y) {\r\n    return (this._target || this).type == 'radial' ?\r\n      this.attr({ fx: new SVG.Number(x), fy: new SVG.Number(y) }) :\r\n      this.attr({ x1: new SVG.Number(x), y1: new SVG.Number(y) })\r\n  }\r\n  // To position\r\n, to: function(x, y) {\r\n    return (this._target || this).type == 'radial' ?\r\n      this.attr({ cx: new SVG.Number(x), cy: new SVG.Number(y) }) :\r\n      this.attr({ x2: new SVG.Number(x), y2: new SVG.Number(y) })\r\n  }\r\n})\r\n\r\n// Base gradient generation\r\nSVG.extend(SVG.Defs, {\r\n  // define gradient\r\n  gradient: function(type, block) {\r\n    return this.put(new SVG.Gradient(type)).update(block)\r\n  }\r\n\r\n})\r\n\r\nSVG.Stop = SVG.invent({\r\n  // Initialize node\r\n  create: 'stop'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Element\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // add color stops\r\n    update: function(o) {\r\n      if (typeof o == 'number' || o instanceof SVG.Number) {\r\n        o = {\r\n          offset:  arguments[0]\r\n        , color:   arguments[1]\r\n        , opacity: arguments[2]\r\n        }\r\n      }\r\n\r\n      // set attributes\r\n      if (o.opacity != null) this.attr('stop-opacity', o.opacity)\r\n      if (o.color   != null) this.attr('stop-color', o.color)\r\n      if (o.offset  != null) this.attr('offset', new SVG.Number(o.offset))\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n})\r\n\nSVG.Pattern = SVG.invent({\r\n  // Initialize node\r\n  create: 'pattern'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Return the fill id\r\n    fill: function() {\r\n      return 'url(#' + this.id() + ')'\r\n    }\r\n    // Update pattern by rebuilding\r\n  , update: function(block) {\r\n      // remove content\r\n      this.clear()\r\n\r\n      // invoke passed block\r\n      if (typeof block == 'function')\r\n        block.call(this, this)\r\n\r\n      return this\r\n    }\r\n    // Alias string convertion to fill\r\n  , toString: function() {\r\n      return this.fill()\r\n    }\r\n    // custom attr to handle transform\r\n  , attr: function(a, b, c) {\r\n      if(a == 'transform') a = 'patternTransform'\r\n      return SVG.Container.prototype.attr.call(this, a, b, c)\r\n    }\r\n\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create pattern element in defs\r\n    pattern: function(width, height, block) {\r\n      return this.defs().pattern(width, height, block)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Defs, {\r\n  // Define gradient\r\n  pattern: function(width, height, block) {\r\n    return this.put(new SVG.Pattern).update(block).attr({\r\n      x:            0\r\n    , y:            0\r\n    , width:        width\r\n    , height:       height\r\n    , patternUnits: 'userSpaceOnUse'\r\n    })\r\n  }\r\n\r\n})\nSVG.Doc = SVG.invent({\r\n  // Initialize node\r\n  create: function(element) {\r\n    if (element) {\r\n      // ensure the presence of a dom element\r\n      element = typeof element == 'string' ?\r\n        document.getElementById(element) :\r\n        element\r\n\r\n      // If the target is an svg element, use that element as the main wrapper.\r\n      // This allows svg.js to work with svg documents as well.\r\n      if (element.nodeName == 'svg') {\r\n        this.constructor.call(this, element)\r\n      } else {\r\n        this.constructor.call(this, SVG.create('svg'))\r\n        element.appendChild(this.node)\r\n        this.size('100%', '100%')\r\n      }\r\n\r\n      // set svg element attributes and ensure defs node\r\n      this.namespace().defs()\r\n    }\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Add namespaces\r\n    namespace: function() {\r\n      return this\r\n        .attr({ xmlns: SVG.ns, version: '1.1' })\r\n        .attr('xmlns:xlink', SVG.xlink, SVG.xmlns)\r\n        .attr('xmlns:svgjs', SVG.svgjs, SVG.xmlns)\r\n    }\r\n    // Creates and returns defs element\r\n  , defs: function() {\r\n      if (!this._defs) {\r\n        var defs\r\n\r\n        // Find or create a defs element in this instance\r\n        if (defs = this.node.getElementsByTagName('defs')[0])\r\n          this._defs = SVG.adopt(defs)\r\n        else\r\n          this._defs = new SVG.Defs\r\n\r\n        // Make sure the defs node is at the end of the stack\r\n        this.node.appendChild(this._defs.node)\r\n      }\r\n\r\n      return this._defs\r\n    }\r\n    // custom parent method\r\n  , parent: function() {\r\n      return this.node.parentNode.nodeName == '#document' ? null : this.node.parentNode\r\n    }\r\n    // Fix for possible sub-pixel offset. See:\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=608812\r\n  , spof: function(spof) {\r\n      var pos = this.node.getScreenCTM()\r\n\r\n      if (pos)\r\n        this\r\n          .style('left', (-pos.e % 1) + 'px')\r\n          .style('top',  (-pos.f % 1) + 'px')\r\n\r\n      return this\r\n    }\r\n\r\n      // Removes the doc from the DOM\r\n  , remove: function() {\r\n      if(this.parent()) {\r\n        this.parent().removeChild(this.node)\r\n      }\r\n\r\n      return this\r\n    }\r\n  , clear: function() {\r\n      // remove children\r\n      while(this.node.hasChildNodes())\r\n        this.node.removeChild(this.node.lastChild)\r\n\r\n      // remove defs reference\r\n      delete this._defs\r\n\r\n      // add back parser\r\n      if(!SVG.parser.draw.parentNode)\r\n        this.node.appendChild(SVG.parser.draw)\r\n\r\n      return this\r\n    }\r\n  }\r\n\r\n})\r\n\nSVG.Shape = SVG.invent({\r\n  // Initialize node\r\n  create: function(element) {\r\n    this.constructor.call(this, element)\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Element\r\n\r\n})\n\r\nSVG.Bare = SVG.invent({\r\n  // Initialize\r\n  create: function(element, inherit) {\r\n    // construct element\r\n    this.constructor.call(this, SVG.create(element))\r\n\r\n    // inherit custom methods\r\n    if (inherit)\r\n      for (var method in inherit.prototype)\r\n        if (typeof inherit.prototype[method] === 'function')\r\n          this[method] = inherit.prototype[method]\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Element\r\n\r\n  // Add methods\r\n, extend: {\r\n    // Insert some plain text\r\n    words: function(text) {\r\n      // remove contents\r\n      while (this.node.hasChildNodes())\r\n        this.node.removeChild(this.node.lastChild)\r\n\r\n      // create text node\r\n      this.node.appendChild(document.createTextNode(text))\r\n\r\n      return this\r\n    }\r\n  }\r\n})\r\n\r\n\r\nSVG.extend(SVG.Parent, {\r\n  // Create an element that is not described by SVG.js\r\n  element: function(element, inherit) {\r\n    return this.put(new SVG.Bare(element, inherit))\r\n  }\r\n})\r\n\nSVG.Symbol = SVG.invent({\r\n  // Initialize node\r\n  create: 'symbol'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n, construct: {\r\n    // create symbol\r\n    symbol: function() {\r\n      return this.put(new SVG.Symbol)\r\n    }\r\n  }\r\n})\r\n\nSVG.Use = SVG.invent({\r\n  // Initialize node\r\n  create: 'use'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Use element as a reference\r\n    element: function(element, file) {\r\n      // Set lined element\r\n      return this.attr('href', (file || '') + '#' + element, SVG.xlink)\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a use element\r\n    use: function(element, file) {\r\n      return this.put(new SVG.Use).element(element, file)\r\n    }\r\n  }\r\n})\nSVG.Rect = SVG.invent({\r\n  // Initialize node\r\n  create: 'rect'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a rect element\r\n    rect: function(width, height) {\r\n      return this.put(new SVG.Rect()).size(width, height)\r\n    }\r\n  }\r\n})\nSVG.Circle = SVG.invent({\r\n  // Initialize node\r\n  create: 'circle'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create circle element, based on ellipse\r\n    circle: function(size) {\r\n      return this.put(new SVG.Circle).rx(new SVG.Number(size).divide(2)).move(0, 0)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Circle, SVG.FX, {\r\n  // Radius x value\r\n  rx: function(rx) {\r\n    return this.attr('r', rx)\r\n  }\r\n  // Alias radius x value\r\n, ry: function(ry) {\r\n    return this.rx(ry)\r\n  }\r\n})\r\n\r\nSVG.Ellipse = SVG.invent({\r\n  // Initialize node\r\n  create: 'ellipse'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create an ellipse\r\n    ellipse: function(width, height) {\r\n      return this.put(new SVG.Ellipse).size(width, height).move(0, 0)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Ellipse, SVG.Rect, SVG.FX, {\r\n  // Radius x value\r\n  rx: function(rx) {\r\n    return this.attr('rx', rx)\r\n  }\r\n  // Radius y value\r\n, ry: function(ry) {\r\n    return this.attr('ry', ry)\r\n  }\r\n})\r\n\r\n// Add common method\r\nSVG.extend(SVG.Circle, SVG.Ellipse, {\r\n    // Move over x-axis\r\n    x: function(x) {\r\n      return x == null ? this.cx() - this.rx() : this.cx(x + this.rx())\r\n    }\r\n    // Move over y-axis\r\n  , y: function(y) {\r\n      return y == null ? this.cy() - this.ry() : this.cy(y + this.ry())\r\n    }\r\n    // Move by center over x-axis\r\n  , cx: function(x) {\r\n      return x == null ? this.attr('cx') : this.attr('cx', x)\r\n    }\r\n    // Move by center over y-axis\r\n  , cy: function(y) {\r\n      return y == null ? this.attr('cy') : this.attr('cy', y)\r\n    }\r\n    // Set width of element\r\n  , width: function(width) {\r\n      return width == null ? this.rx() * 2 : this.rx(new SVG.Number(width).divide(2))\r\n    }\r\n    // Set height of element\r\n  , height: function(height) {\r\n      return height == null ? this.ry() * 2 : this.ry(new SVG.Number(height).divide(2))\r\n    }\r\n    // Custom size function\r\n  , size: function(width, height) {\r\n      var p = proportionalSize(this, width, height)\r\n\r\n      return this\r\n        .rx(new SVG.Number(p.width).divide(2))\r\n        .ry(new SVG.Number(p.height).divide(2))\r\n    }\r\n})\nSVG.Line = SVG.invent({\r\n  // Initialize node\r\n  create: 'line'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Get array\r\n    array: function() {\r\n      return new SVG.PointArray([\r\n        [ this.attr('x1'), this.attr('y1') ]\r\n      , [ this.attr('x2'), this.attr('y2') ]\r\n      ])\r\n    }\r\n    // Overwrite native plot() method\r\n  , plot: function(x1, y1, x2, y2) {\r\n      if (x1 == null)\r\n        return this.array()\r\n      else if (typeof y1 !== 'undefined')\r\n        x1 = { x1: x1, y1: y1, x2: x2, y2: y2 }\r\n      else\r\n        x1 = new SVG.PointArray(x1).toLine()\r\n\r\n      return this.attr(x1)\r\n    }\r\n    // Move by left top corner\r\n  , move: function(x, y) {\r\n      return this.attr(this.array().move(x, y).toLine())\r\n    }\r\n    // Set element size to given width and height\r\n  , size: function(width, height) {\r\n      var p = proportionalSize(this, width, height)\r\n\r\n      return this.attr(this.array().size(p.width, p.height).toLine())\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a line element\r\n    line: function(x1, y1, x2, y2) {\r\n      // make sure plot is called as a setter\r\n      // x1 is not necessarily a number, it can also be an array, a string and a SVG.PointArray\r\n      return SVG.Line.prototype.plot.apply(\r\n        this.put(new SVG.Line)\r\n      , x1 != null ? [x1, y1, x2, y2] : [0, 0, 0, 0]\r\n      )\r\n    }\r\n  }\r\n})\r\n\nSVG.Polyline = SVG.invent({\r\n  // Initialize node\r\n  create: 'polyline'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a wrapped polyline element\r\n    polyline: function(p) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new SVG.Polyline).plot(p || new SVG.PointArray)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.Polygon = SVG.invent({\r\n  // Initialize node\r\n  create: 'polygon'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a wrapped polygon element\r\n    polygon: function(p) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new SVG.Polygon).plot(p || new SVG.PointArray)\r\n    }\r\n  }\r\n})\r\n\r\n// Add polygon-specific functions\r\nSVG.extend(SVG.Polyline, SVG.Polygon, {\r\n  // Get array\r\n  array: function() {\r\n    return this._array || (this._array = new SVG.PointArray(this.attr('points')))\r\n  }\r\n  // Plot new path\r\n, plot: function(p) {\r\n    return (p == null) ?\r\n      this.array() :\r\n      this.clear().attr('points', typeof p == 'string' ? p : (this._array = new SVG.PointArray(p)))\r\n  }\r\n  // Clear array cache\r\n, clear: function() {\r\n    delete this._array\r\n    return this\r\n  }\r\n  // Move by left top corner\r\n, move: function(x, y) {\r\n    return this.attr('points', this.array().move(x, y))\r\n  }\r\n  // Set element size to given width and height\r\n, size: function(width, height) {\r\n    var p = proportionalSize(this, width, height)\r\n\r\n    return this.attr('points', this.array().size(p.width, p.height))\r\n  }\r\n\r\n})\r\n\n// unify all point to point elements\r\nSVG.extend(SVG.Line, SVG.Polyline, SVG.Polygon, {\r\n  // Define morphable array\r\n  morphArray:  SVG.PointArray\r\n  // Move by left top corner over x-axis\r\n, x: function(x) {\r\n    return x == null ? this.bbox().x : this.move(x, this.bbox().y)\r\n  }\r\n  // Move by left top corner over y-axis\r\n, y: function(y) {\r\n    return y == null ? this.bbox().y : this.move(this.bbox().x, y)\r\n  }\r\n  // Set width of element\r\n, width: function(width) {\r\n    var b = this.bbox()\r\n\r\n    return width == null ? b.width : this.size(width, b.height)\r\n  }\r\n  // Set height of element\r\n, height: function(height) {\r\n    var b = this.bbox()\r\n\r\n    return height == null ? b.height : this.size(b.width, height)\r\n  }\r\n})\nSVG.Path = SVG.invent({\r\n  // Initialize node\r\n  create: 'path'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Define morphable array\r\n    morphArray:  SVG.PathArray\r\n    // Get array\r\n  , array: function() {\r\n      return this._array || (this._array = new SVG.PathArray(this.attr('d')))\r\n    }\r\n    // Plot new path\r\n  , plot: function(d) {\r\n      return (d == null) ?\r\n        this.array() :\r\n        this.clear().attr('d', typeof d == 'string' ? d : (this._array = new SVG.PathArray(d)))\r\n    }\r\n    // Clear array cache\r\n  , clear: function() {\r\n      delete this._array\r\n      return this\r\n    }\r\n    // Move by left top corner\r\n  , move: function(x, y) {\r\n      return this.attr('d', this.array().move(x, y))\r\n    }\r\n    // Move by left top corner over x-axis\r\n  , x: function(x) {\r\n      return x == null ? this.bbox().x : this.move(x, this.bbox().y)\r\n    }\r\n    // Move by left top corner over y-axis\r\n  , y: function(y) {\r\n      return y == null ? this.bbox().y : this.move(this.bbox().x, y)\r\n    }\r\n    // Set element size to given width and height\r\n  , size: function(width, height) {\r\n      var p = proportionalSize(this, width, height)\r\n\r\n      return this.attr('d', this.array().size(p.width, p.height))\r\n    }\r\n    // Set width of element\r\n  , width: function(width) {\r\n      return width == null ? this.bbox().width : this.size(width, this.bbox().height)\r\n    }\r\n    // Set height of element\r\n  , height: function(height) {\r\n      return height == null ? this.bbox().height : this.size(this.bbox().width, height)\r\n    }\r\n\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a wrapped path element\r\n    path: function(d) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new SVG.Path).plot(d || new SVG.PathArray)\r\n    }\r\n  }\r\n})\r\n\nSVG.Image = SVG.invent({\r\n  // Initialize node\r\n  create: 'image'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // (re)load image\r\n    load: function(url) {\r\n      if (!url) return this\r\n\r\n      var self = this\r\n        , img  = new window.Image()\r\n\r\n      // preload image\r\n      SVG.on(img, 'load', function() {\r\n        var p = self.parent(SVG.Pattern)\r\n\r\n        if(p === null) return\r\n\r\n        // ensure image size\r\n        if (self.width() == 0 && self.height() == 0)\r\n          self.size(img.width, img.height)\r\n\r\n        // ensure pattern size if not set\r\n        if (p && p.width() == 0 && p.height() == 0)\r\n          p.size(self.width(), self.height())\r\n\r\n        // callback\r\n        if (typeof self._loaded === 'function')\r\n          self._loaded.call(self, {\r\n            width:  img.width\r\n          , height: img.height\r\n          , ratio:  img.width / img.height\r\n          , url:    url\r\n          })\r\n      })\r\n\r\n      SVG.on(img, 'error', function(e){\r\n        if (typeof self._error === 'function'){\r\n            self._error.call(self, e)\r\n        }\r\n      })\r\n\r\n      return this.attr('href', (img.src = this.src = url), SVG.xlink)\r\n    }\r\n    // Add loaded callback\r\n  , loaded: function(loaded) {\r\n      this._loaded = loaded\r\n      return this\r\n    }\r\n\r\n  , error: function(error) {\r\n      this._error = error\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // create image element, load image and set its size\r\n    image: function(source, width, height) {\r\n      return this.put(new SVG.Image).load(source).size(width || 0, height || width || 0)\r\n    }\r\n  }\r\n\r\n})\nSVG.Text = SVG.invent({\r\n  // Initialize node\r\n  create: function() {\r\n    this.constructor.call(this, SVG.create('text'))\r\n\r\n    this.dom.leading = new SVG.Number(1.3)    // store leading value for rebuilding\r\n    this._rebuild = true                      // enable automatic updating of dy values\r\n    this._build   = false                     // disable build mode for adding multiple lines\r\n\r\n    // set default font\r\n    this.attr('font-family', SVG.defaults.attrs['font-family'])\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Move over x-axis\r\n    x: function(x) {\r\n      // act as getter\r\n      if (x == null)\r\n        return this.attr('x')\r\n\r\n      return this.attr('x', x)\r\n    }\r\n    // Move over y-axis\r\n  , y: function(y) {\r\n      var oy = this.attr('y')\r\n        , o  = typeof oy === 'number' ? oy - this.bbox().y : 0\r\n\r\n      // act as getter\r\n      if (y == null)\r\n        return typeof oy === 'number' ? oy - o : oy\r\n\r\n      return this.attr('y', typeof y === 'number' ? y + o : y)\r\n    }\r\n    // Move center over x-axis\r\n  , cx: function(x) {\r\n      return x == null ? this.bbox().cx : this.x(x - this.bbox().width / 2)\r\n    }\r\n    // Move center over y-axis\r\n  , cy: function(y) {\r\n      return y == null ? this.bbox().cy : this.y(y - this.bbox().height / 2)\r\n    }\r\n    // Set the text content\r\n  , text: function(text) {\r\n      // act as getter\r\n      if (typeof text === 'undefined'){\r\n        var text = ''\r\n        var children = this.node.childNodes\r\n        for(var i = 0, len = children.length; i < len; ++i){\r\n\r\n          // add newline if its not the first child and newLined is set to true\r\n          if(i != 0 && children[i].nodeType != 3 && SVG.adopt(children[i]).dom.newLined == true){\r\n            text += '\\n'\r\n          }\r\n\r\n          // add content of this node\r\n          text += children[i].textContent\r\n        }\r\n\r\n        return text\r\n      }\r\n\r\n      // remove existing content\r\n      this.clear().build(true)\r\n\r\n      if (typeof text === 'function') {\r\n        // call block\r\n        text.call(this, this)\r\n\r\n      } else {\r\n        // store text and make sure text is not blank\r\n        text = text.split('\\n')\r\n\r\n        // build new lines\r\n        for (var i = 0, il = text.length; i < il; i++)\r\n          this.tspan(text[i]).newLine()\r\n      }\r\n\r\n      // disable build mode and rebuild lines\r\n      return this.build(false).rebuild()\r\n    }\r\n    // Set font size\r\n  , size: function(size) {\r\n      return this.attr('font-size', size).rebuild()\r\n    }\r\n    // Set / get leading\r\n  , leading: function(value) {\r\n      // act as getter\r\n      if (value == null)\r\n        return this.dom.leading\r\n\r\n      // act as setter\r\n      this.dom.leading = new SVG.Number(value)\r\n\r\n      return this.rebuild()\r\n    }\r\n    // Get all the first level lines\r\n  , lines: function() {\r\n      var node = (this.textPath && this.textPath() || this).node\r\n\r\n      // filter tspans and map them to SVG.js instances\r\n      var lines = SVG.utils.map(SVG.utils.filterSVGElements(node.childNodes), function(el){\r\n        return SVG.adopt(el)\r\n      })\r\n\r\n      // return an instance of SVG.set\r\n      return new SVG.Set(lines)\r\n    }\r\n    // Rebuild appearance type\r\n  , rebuild: function(rebuild) {\r\n      // store new rebuild flag if given\r\n      if (typeof rebuild == 'boolean')\r\n        this._rebuild = rebuild\r\n\r\n      // define position of all lines\r\n      if (this._rebuild) {\r\n        var self = this\r\n          , blankLineOffset = 0\r\n          , dy = this.dom.leading * new SVG.Number(this.attr('font-size'))\r\n\r\n        this.lines().each(function() {\r\n          if (this.dom.newLined) {\r\n            if (!self.textPath())\r\n              this.attr('x', self.attr('x'))\r\n            if(this.text() == '\\n') {\r\n              blankLineOffset += dy\r\n            }else{\r\n              this.attr('dy', dy + blankLineOffset)\r\n              blankLineOffset = 0\r\n            }\r\n          }\r\n        })\r\n\r\n        this.fire('rebuild')\r\n      }\r\n\r\n      return this\r\n    }\r\n    // Enable / disable build mode\r\n  , build: function(build) {\r\n      this._build = !!build\r\n      return this\r\n    }\r\n    // overwrite method from parent to set data properly\r\n  , setData: function(o){\r\n      this.dom = o\r\n      this.dom.leading = new SVG.Number(o.leading || 1.3)\r\n      return this\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create text element\r\n    text: function(text) {\r\n      return this.put(new SVG.Text).text(text)\r\n    }\r\n    // Create plain text element\r\n  , plain: function(text) {\r\n      return this.put(new SVG.Text).plain(text)\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.Tspan = SVG.invent({\r\n  // Initialize node\r\n  create: 'tspan'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Shape\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Set text content\r\n    text: function(text) {\r\n      if(text == null) return this.node.textContent + (this.dom.newLined ? '\\n' : '')\r\n\r\n      typeof text === 'function' ? text.call(this, this) : this.plain(text)\r\n\r\n      return this\r\n    }\r\n    // Shortcut dx\r\n  , dx: function(dx) {\r\n      return this.attr('dx', dx)\r\n    }\r\n    // Shortcut dy\r\n  , dy: function(dy) {\r\n      return this.attr('dy', dy)\r\n    }\r\n    // Create new line\r\n  , newLine: function() {\r\n      // fetch text parent\r\n      var t = this.parent(SVG.Text)\r\n\r\n      // mark new line\r\n      this.dom.newLined = true\r\n\r\n      // apply new hy¡n\r\n      return this.dy(t.dom.leading * t.attr('font-size')).attr('x', t.x())\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.Text, SVG.Tspan, {\r\n  // Create plain text node\r\n  plain: function(text) {\r\n    // clear if build mode is disabled\r\n    if (this._build === false)\r\n      this.clear()\r\n\r\n    // create text node\r\n    this.node.appendChild(document.createTextNode(text))\r\n\r\n    return this\r\n  }\r\n  // Create a tspan\r\n, tspan: function(text) {\r\n    var node  = (this.textPath && this.textPath() || this).node\r\n      , tspan = new SVG.Tspan\r\n\r\n    // clear if build mode is disabled\r\n    if (this._build === false)\r\n      this.clear()\r\n\r\n    // add new tspan\r\n    node.appendChild(tspan.node)\r\n\r\n    return tspan.text(text)\r\n  }\r\n  // Clear all lines\r\n, clear: function() {\r\n    var node = (this.textPath && this.textPath() || this).node\r\n\r\n    // remove existing child nodes\r\n    while (node.hasChildNodes())\r\n      node.removeChild(node.lastChild)\r\n\r\n    return this\r\n  }\r\n  // Get length of text element\r\n, length: function() {\r\n    return this.node.getComputedTextLength()\r\n  }\r\n})\r\n\nSVG.TextPath = SVG.invent({\r\n  // Initialize node\r\n  create: 'textPath'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Parent\r\n\r\n  // Define parent class\r\n, parent: SVG.Text\r\n\r\n  // Add parent method\r\n, construct: {\r\n    morphArray: SVG.PathArray\r\n    // Create path for text to run on\r\n  , path: function(d) {\r\n      // create textPath element\r\n      var path  = new SVG.TextPath\r\n        , track = this.doc().defs().path(d)\r\n\r\n      // move lines to textpath\r\n      while (this.node.hasChildNodes())\r\n        path.node.appendChild(this.node.firstChild)\r\n\r\n      // add textPath element as child node\r\n      this.node.appendChild(path.node)\r\n\r\n      // link textPath to path and add content\r\n      path.attr('href', '#' + track, SVG.xlink)\r\n\r\n      return this\r\n    }\r\n    // return the array of the path track element\r\n  , array: function() {\r\n      var track = this.track()\r\n\r\n      return track ? track.array() : null\r\n    }\r\n    // Plot path if any\r\n  , plot: function(d) {\r\n      var track = this.track()\r\n        , pathArray = null\r\n\r\n      if (track) {\r\n        pathArray = track.plot(d)\r\n      }\r\n\r\n      return (d == null) ? pathArray : this\r\n    }\r\n    // Get the path track element\r\n  , track: function() {\r\n      var path = this.textPath()\r\n\r\n      if (path)\r\n        return path.reference('href')\r\n    }\r\n    // Get the textPath child\r\n  , textPath: function() {\r\n      if (this.node.firstChild && this.node.firstChild.nodeName == 'textPath')\r\n        return SVG.adopt(this.node.firstChild)\r\n    }\r\n  }\r\n})\r\n\nSVG.Nested = SVG.invent({\r\n  // Initialize node\r\n  create: function() {\r\n    this.constructor.call(this, SVG.create('svg'))\r\n\r\n    this.style('overflow', 'visible')\r\n  }\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create nested svg document\r\n    nested: function() {\r\n      return this.put(new SVG.Nested)\r\n    }\r\n  }\r\n})\nSVG.A = SVG.invent({\r\n  // Initialize node\r\n  create: 'a'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Link url\r\n    to: function(url) {\r\n      return this.attr('href', url, SVG.xlink)\r\n    }\r\n    // Link show attribute\r\n  , show: function(target) {\r\n      return this.attr('show', target, SVG.xlink)\r\n    }\r\n    // Link target attribute\r\n  , target: function(target) {\r\n      return this.attr('target', target)\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a hyperlink element\r\n    link: function(url) {\r\n      return this.put(new SVG.A).to(url)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Element, {\r\n  // Create a hyperlink element\r\n  linkTo: function(url) {\r\n    var link = new SVG.A\r\n\r\n    if (typeof url == 'function')\r\n      url.call(link, link)\r\n    else\r\n      link.to(url)\r\n\r\n    return this.parent().put(link).put(this)\r\n  }\r\n\r\n})\nSVG.Marker = SVG.invent({\r\n  // Initialize node\r\n  create: 'marker'\r\n\r\n  // Inherit from\r\n, inherit: SVG.Container\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Set width of element\r\n    width: function(width) {\r\n      return this.attr('markerWidth', width)\r\n    }\r\n    // Set height of element\r\n  , height: function(height) {\r\n      return this.attr('markerHeight', height)\r\n    }\r\n    // Set marker refX and refY\r\n  , ref: function(x, y) {\r\n      return this.attr('refX', x).attr('refY', y)\r\n    }\r\n    // Update marker\r\n  , update: function(block) {\r\n      // remove all content\r\n      this.clear()\r\n\r\n      // invoke passed block\r\n      if (typeof block == 'function')\r\n        block.call(this, this)\r\n\r\n      return this\r\n    }\r\n    // Return the fill id\r\n  , toString: function() {\r\n      return 'url(#' + this.id() + ')'\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    marker: function(width, height, block) {\r\n      // Create marker element in defs\r\n      return this.defs().marker(width, height, block)\r\n    }\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.Defs, {\r\n  // Create marker\r\n  marker: function(width, height, block) {\r\n    // Set default viewbox to match the width and height, set ref to cx and cy and set orient to auto\r\n    return this.put(new SVG.Marker)\r\n      .size(width, height)\r\n      .ref(width / 2, height / 2)\r\n      .viewbox(0, 0, width, height)\r\n      .attr('orient', 'auto')\r\n      .update(block)\r\n  }\r\n\r\n})\r\n\r\nSVG.extend(SVG.Line, SVG.Polyline, SVG.Polygon, SVG.Path, {\r\n  // Create and attach markers\r\n  marker: function(marker, width, height, block) {\r\n    var attr = ['marker']\r\n\r\n    // Build attribute name\r\n    if (marker != 'all') attr.push(marker)\r\n    attr = attr.join('-')\r\n\r\n    // Set marker attribute\r\n    marker = arguments[1] instanceof SVG.Marker ?\r\n      arguments[1] :\r\n      this.doc().marker(width, height, block)\r\n\r\n    return this.attr(attr, marker)\r\n  }\r\n\r\n})\n// Define list of available attributes for stroke and fill\r\nvar sugar = {\r\n  stroke: ['color', 'width', 'opacity', 'linecap', 'linejoin', 'miterlimit', 'dasharray', 'dashoffset']\r\n, fill:   ['color', 'opacity', 'rule']\r\n, prefix: function(t, a) {\r\n    return a == 'color' ? t : t + '-' + a\r\n  }\r\n}\r\n\r\n// Add sugar for fill and stroke\r\n;['fill', 'stroke'].forEach(function(m) {\r\n  var i, extension = {}\r\n\r\n  extension[m] = function(o) {\r\n    if (typeof o == 'undefined')\r\n      return this\r\n    if (typeof o == 'string' || SVG.Color.isRgb(o) || (o && typeof o.fill === 'function'))\r\n      this.attr(m, o)\r\n\r\n    else\r\n      // set all attributes from sugar.fill and sugar.stroke list\r\n      for (i = sugar[m].length - 1; i >= 0; i--)\r\n        if (o[sugar[m][i]] != null)\r\n          this.attr(sugar.prefix(m, sugar[m][i]), o[sugar[m][i]])\r\n\r\n    return this\r\n  }\r\n\r\n  SVG.extend(SVG.Element, SVG.FX, extension)\r\n\r\n})\r\n\r\nSVG.extend(SVG.Element, SVG.FX, {\r\n  // Map rotation to transform\r\n  rotate: function(d, cx, cy) {\r\n    return this.transform({ rotation: d, cx: cx, cy: cy })\r\n  }\r\n  // Map skew to transform\r\n, skew: function(x, y, cx, cy) {\r\n    return arguments.length == 1  || arguments.length == 3 ?\r\n      this.transform({ skew: x, cx: y, cy: cx }) :\r\n      this.transform({ skewX: x, skewY: y, cx: cx, cy: cy })\r\n  }\r\n  // Map scale to transform\r\n, scale: function(x, y, cx, cy) {\r\n    return arguments.length == 1  || arguments.length == 3 ?\r\n      this.transform({ scale: x, cx: y, cy: cx }) :\r\n      this.transform({ scaleX: x, scaleY: y, cx: cx, cy: cy })\r\n  }\r\n  // Map translate to transform\r\n, translate: function(x, y) {\r\n    return this.transform({ x: x, y: y })\r\n  }\r\n  // Map flip to transform\r\n, flip: function(a, o) {\r\n    o = typeof a == 'number' ? a : o\r\n    return this.transform({ flip: a || 'both', offset: o })\r\n  }\r\n  // Map matrix to transform\r\n, matrix: function(m) {\r\n    return this.attr('transform', new SVG.Matrix(arguments.length == 6 ? [].slice.call(arguments) : m))\r\n  }\r\n  // Opacity\r\n, opacity: function(value) {\r\n    return this.attr('opacity', value)\r\n  }\r\n  // Relative move over x axis\r\n, dx: function(x) {\r\n    return this.x(new SVG.Number(x).plus(this instanceof SVG.FX ? 0 : this.x()), true)\r\n  }\r\n  // Relative move over y axis\r\n, dy: function(y) {\r\n    return this.y(new SVG.Number(y).plus(this instanceof SVG.FX ? 0 : this.y()), true)\r\n  }\r\n  // Relative move over x and y axes\r\n, dmove: function(x, y) {\r\n    return this.dx(x).dy(y)\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Rect, SVG.Ellipse, SVG.Circle, SVG.Gradient, SVG.FX, {\r\n  // Add x and y radius\r\n  radius: function(x, y) {\r\n    var type = (this._target || this).type;\r\n    return type == 'radial' || type == 'circle' ?\r\n      this.attr('r', new SVG.Number(x)) :\r\n      this.rx(x).ry(y == null ? x : y)\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Path, {\r\n  // Get path length\r\n  length: function() {\r\n    return this.node.getTotalLength()\r\n  }\r\n  // Get point at length\r\n, pointAt: function(length) {\r\n    return this.node.getPointAtLength(length)\r\n  }\r\n})\r\n\r\nSVG.extend(SVG.Parent, SVG.Text, SVG.Tspan, SVG.FX, {\r\n  // Set font\r\n  font: function(a, v) {\r\n    if (typeof a == 'object') {\r\n      for (v in a) this.font(v, a[v])\r\n    }\r\n\r\n    return a == 'leading' ?\r\n        this.leading(v) :\r\n      a == 'anchor' ?\r\n        this.attr('text-anchor', v) :\r\n      a == 'size' || a == 'family' || a == 'weight' || a == 'stretch' || a == 'variant' || a == 'style' ?\r\n        this.attr('font-'+ a, v) :\r\n        this.attr(a, v)\r\n  }\r\n})\r\n\nSVG.Set = SVG.invent({\r\n  // Initialize\r\n  create: function(members) {\r\n    // Set initial state\r\n    Array.isArray(members) ? this.members = members : this.clear()\r\n  }\r\n\r\n  // Add class methods\r\n, extend: {\r\n    // Add element to set\r\n    add: function() {\r\n      var i, il, elements = [].slice.call(arguments)\r\n\r\n      for (i = 0, il = elements.length; i < il; i++)\r\n        this.members.push(elements[i])\r\n\r\n      return this\r\n    }\r\n    // Remove element from set\r\n  , remove: function(element) {\r\n      var i = this.index(element)\r\n\r\n      // remove given child\r\n      if (i > -1)\r\n        this.members.splice(i, 1)\r\n\r\n      return this\r\n    }\r\n    // Iterate over all members\r\n  , each: function(block) {\r\n      for (var i = 0, il = this.members.length; i < il; i++)\r\n        block.apply(this.members[i], [i, this.members])\r\n\r\n      return this\r\n    }\r\n    // Restore to defaults\r\n  , clear: function() {\r\n      // initialize store\r\n      this.members = []\r\n\r\n      return this\r\n    }\r\n    // Get the length of a set\r\n  , length: function() {\r\n      return this.members.length\r\n    }\r\n    // Checks if a given element is present in set\r\n  , has: function(element) {\r\n      return this.index(element) >= 0\r\n    }\r\n    // retuns index of given element in set\r\n  , index: function(element) {\r\n      return this.members.indexOf(element)\r\n    }\r\n    // Get member at given index\r\n  , get: function(i) {\r\n      return this.members[i]\r\n    }\r\n    // Get first member\r\n  , first: function() {\r\n      return this.get(0)\r\n    }\r\n    // Get last member\r\n  , last: function() {\r\n      return this.get(this.members.length - 1)\r\n    }\r\n    // Default value\r\n  , valueOf: function() {\r\n      return this.members\r\n    }\r\n    // Get the bounding box of all members included or empty box if set has no items\r\n  , bbox: function(){\r\n      // return an empty box of there are no members\r\n      if (this.members.length == 0)\r\n        return new SVG.RBox()\r\n\r\n      // get the first rbox and update the target bbox\r\n      var rbox = this.members[0].rbox(this.members[0].doc())\r\n\r\n      this.each(function() {\r\n        // user rbox for correct position and visual representation\r\n        rbox = rbox.merge(this.rbox(this.doc()))\r\n      })\r\n\r\n      return rbox\r\n    }\r\n  }\r\n\r\n  // Add parent method\r\n, construct: {\r\n    // Create a new set\r\n    set: function(members) {\r\n      return new SVG.Set(members)\r\n    }\r\n  }\r\n})\r\n\r\nSVG.FX.Set = SVG.invent({\r\n  // Initialize node\r\n  create: function(set) {\r\n    // store reference to set\r\n    this.set = set\r\n  }\r\n\r\n})\r\n\r\n// Alias methods\r\nSVG.Set.inherit = function() {\r\n  var m\r\n    , methods = []\r\n\r\n  // gather shape methods\r\n  for(var m in SVG.Shape.prototype)\r\n    if (typeof SVG.Shape.prototype[m] == 'function' && typeof SVG.Set.prototype[m] != 'function')\r\n      methods.push(m)\r\n\r\n  // apply shape aliasses\r\n  methods.forEach(function(method) {\r\n    SVG.Set.prototype[method] = function() {\r\n      for (var i = 0, il = this.members.length; i < il; i++)\r\n        if (this.members[i] && typeof this.members[i][method] == 'function')\r\n          this.members[i][method].apply(this.members[i], arguments)\r\n\r\n      return method == 'animate' ? (this.fx || (this.fx = new SVG.FX.Set(this))) : this\r\n    }\r\n  })\r\n\r\n  // clear methods for the next round\r\n  methods = []\r\n\r\n  // gather fx methods\r\n  for(var m in SVG.FX.prototype)\r\n    if (typeof SVG.FX.prototype[m] == 'function' && typeof SVG.FX.Set.prototype[m] != 'function')\r\n      methods.push(m)\r\n\r\n  // apply fx aliasses\r\n  methods.forEach(function(method) {\r\n    SVG.FX.Set.prototype[method] = function() {\r\n      for (var i = 0, il = this.set.members.length; i < il; i++)\r\n        this.set.members[i].fx[method].apply(this.set.members[i].fx, arguments)\r\n\r\n      return this\r\n    }\r\n  })\r\n}\r\n\r\n\r\n\n\r\nSVG.extend(SVG.Element, {\r\n  // Store data values on svg nodes\r\n  data: function(a, v, r) {\r\n    if (typeof a == 'object') {\r\n      for (v in a)\r\n        this.data(v, a[v])\r\n\r\n    } else if (arguments.length < 2) {\r\n      try {\r\n        return JSON.parse(this.attr('data-' + a))\r\n      } catch(e) {\r\n        return this.attr('data-' + a)\r\n      }\r\n\r\n    } else {\r\n      this.attr(\r\n        'data-' + a\r\n      , v === null ?\r\n          null :\r\n        r === true || typeof v === 'string' || typeof v === 'number' ?\r\n          v :\r\n          JSON.stringify(v)\r\n      )\r\n    }\r\n\r\n    return this\r\n  }\r\n})\nSVG.extend(SVG.Element, {\r\n  // Remember arbitrary data\r\n  remember: function(k, v) {\r\n    // remember every item in an object individually\r\n    if (typeof arguments[0] == 'object')\r\n      for (var v in k)\r\n        this.remember(v, k[v])\r\n\r\n    // retrieve memory\r\n    else if (arguments.length == 1)\r\n      return this.memory()[k]\r\n\r\n    // store memory\r\n    else\r\n      this.memory()[k] = v\r\n\r\n    return this\r\n  }\r\n\r\n  // Erase a given memory\r\n, forget: function() {\r\n    if (arguments.length == 0)\r\n      this._memory = {}\r\n    else\r\n      for (var i = arguments.length - 1; i >= 0; i--)\r\n        delete this.memory()[arguments[i]]\r\n\r\n    return this\r\n  }\r\n\r\n  // Initialize or return local memory object\r\n, memory: function() {\r\n    return this._memory || (this._memory = {})\r\n  }\r\n\r\n})\n// Method for getting an element by id\r\nSVG.get = function(id) {\r\n  var node = document.getElementById(idFromReference(id) || id)\r\n  return SVG.adopt(node)\r\n}\r\n\r\n// Select elements by query string\r\nSVG.select = function(query, parent) {\r\n  return new SVG.Set(\r\n    SVG.utils.map((parent || document).querySelectorAll(query), function(node) {\r\n      return SVG.adopt(node)\r\n    })\r\n  )\r\n}\r\n\r\nSVG.extend(SVG.Parent, {\r\n  // Scoped select method\r\n  select: function(query) {\r\n    return SVG.select(query, this.node)\r\n  }\r\n\r\n})\nfunction pathRegReplace(a, b, c, d) {\r\n  return c + d.replace(SVG.regex.dots, ' .')\r\n}\r\n\r\n// creates deep clone of array\r\nfunction array_clone(arr){\r\n  var clone = arr.slice(0)\r\n  for(var i = clone.length; i--;){\r\n    if(Array.isArray(clone[i])){\r\n      clone[i] = array_clone(clone[i])\r\n    }\r\n  }\r\n  return clone\r\n}\r\n\r\n// tests if a given element is instance of an object\r\nfunction is(el, obj){\r\n  return el instanceof obj\r\n}\r\n\r\n// tests if a given selector matches an element\r\nfunction matches(el, selector) {\r\n  return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector);\r\n}\r\n\r\n// Convert dash-separated-string to camelCase\r\nfunction camelCase(s) {\r\n  return s.toLowerCase().replace(/-(.)/g, function(m, g) {\r\n    return g.toUpperCase()\r\n  })\r\n}\r\n\r\n// Capitalize first letter of a string\r\nfunction capitalize(s) {\r\n  return s.charAt(0).toUpperCase() + s.slice(1)\r\n}\r\n\r\n// Ensure to six-based hex\r\nfunction fullHex(hex) {\r\n  return hex.length == 4 ?\r\n    [ '#',\r\n      hex.substring(1, 2), hex.substring(1, 2)\r\n    , hex.substring(2, 3), hex.substring(2, 3)\r\n    , hex.substring(3, 4), hex.substring(3, 4)\r\n    ].join('') : hex\r\n}\r\n\r\n// Component to hex value\r\nfunction compToHex(comp) {\r\n  var hex = comp.toString(16)\r\n  return hex.length == 1 ? '0' + hex : hex\r\n}\r\n\r\n// Calculate proportional width and height values when necessary\r\nfunction proportionalSize(element, width, height) {\r\n  if (width == null || height == null) {\r\n    var box = element.bbox()\r\n\r\n    if (width == null)\r\n      width = box.width / box.height * height\r\n    else if (height == null)\r\n      height = box.height / box.width * width\r\n  }\r\n\r\n  return {\r\n    width:  width\r\n  , height: height\r\n  }\r\n}\r\n\r\n// Delta transform point\r\nfunction deltaTransformPoint(matrix, x, y) {\r\n  return {\r\n    x: x * matrix.a + y * matrix.c + 0\r\n  , y: x * matrix.b + y * matrix.d + 0\r\n  }\r\n}\r\n\r\n// Map matrix array to object\r\nfunction arrayToMatrix(a) {\r\n  return { a: a[0], b: a[1], c: a[2], d: a[3], e: a[4], f: a[5] }\r\n}\r\n\r\n// Parse matrix if required\r\nfunction parseMatrix(matrix) {\r\n  if (!(matrix instanceof SVG.Matrix))\r\n    matrix = new SVG.Matrix(matrix)\r\n\r\n  return matrix\r\n}\r\n\r\n// Add centre point to transform object\r\nfunction ensureCentre(o, target) {\r\n  o.cx = o.cx == null ? target.bbox().cx : o.cx\r\n  o.cy = o.cy == null ? target.bbox().cy : o.cy\r\n}\r\n\r\n// PathArray Helpers\r\nfunction arrayToString(a) {\r\n  for (var i = 0, il = a.length, s = ''; i < il; i++) {\r\n    s += a[i][0]\r\n\r\n    if (a[i][1] != null) {\r\n      s += a[i][1]\r\n\r\n      if (a[i][2] != null) {\r\n        s += ' '\r\n        s += a[i][2]\r\n\r\n        if (a[i][3] != null) {\r\n          s += ' '\r\n          s += a[i][3]\r\n          s += ' '\r\n          s += a[i][4]\r\n\r\n          if (a[i][5] != null) {\r\n            s += ' '\r\n            s += a[i][5]\r\n            s += ' '\r\n            s += a[i][6]\r\n\r\n            if (a[i][7] != null) {\r\n              s += ' '\r\n              s += a[i][7]\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return s + ' '\r\n}\r\n\r\n// Deep new id assignment\r\nfunction assignNewId(node) {\r\n  // do the same for SVG child nodes as well\r\n  for (var i = node.childNodes.length - 1; i >= 0; i--)\r\n    if (node.childNodes[i] instanceof window.SVGElement)\r\n      assignNewId(node.childNodes[i])\r\n\r\n  return SVG.adopt(node).id(SVG.eid(node.nodeName))\r\n}\r\n\r\n// Add more bounding box properties\r\nfunction fullBox(b) {\r\n  if (b.x == null) {\r\n    b.x      = 0\r\n    b.y      = 0\r\n    b.width  = 0\r\n    b.height = 0\r\n  }\r\n\r\n  b.w  = b.width\r\n  b.h  = b.height\r\n  b.x2 = b.x + b.width\r\n  b.y2 = b.y + b.height\r\n  b.cx = b.x + b.width / 2\r\n  b.cy = b.y + b.height / 2\r\n\r\n  return b\r\n}\r\n\r\n// Get id from reference string\r\nfunction idFromReference(url) {\r\n  var m = url.toString().match(SVG.regex.reference)\r\n\r\n  if (m) return m[1]\r\n}\r\n\r\n// Create matrix array for looping\r\nvar abcdef = 'abcdef'.split('')\n// Add CustomEvent to IE9 and IE10\r\nif (typeof window.CustomEvent !== 'function') {\r\n  // Code from: https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent\r\n  var CustomEvent = function(event, options) {\r\n    options = options || { bubbles: false, cancelable: false, detail: undefined }\r\n    var e = document.createEvent('CustomEvent')\r\n    e.initCustomEvent(event, options.bubbles, options.cancelable, options.detail)\r\n    return e\r\n  }\r\n\r\n  CustomEvent.prototype = window.Event.prototype\r\n\r\n  window.CustomEvent = CustomEvent\r\n}\r\n\r\n// requestAnimationFrame / cancelAnimationFrame Polyfill with fallback based on Paul Irish\r\n(function(w) {\r\n  var lastTime = 0\r\n  var vendors = ['moz', 'webkit']\r\n\r\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n    w.requestAnimationFrame = w[vendors[x] + 'RequestAnimationFrame']\r\n    w.cancelAnimationFrame  = w[vendors[x] + 'CancelAnimationFrame'] ||\r\n                              w[vendors[x] + 'CancelRequestAnimationFrame']\r\n  }\r\n\r\n  w.requestAnimationFrame = w.requestAnimationFrame ||\r\n    function(callback) {\r\n      var currTime = new Date().getTime()\r\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime))\r\n\r\n      var id = w.setTimeout(function() {\r\n        callback(currTime + timeToCall)\r\n      }, timeToCall)\r\n\r\n      lastTime = currTime + timeToCall\r\n      return id\r\n    }\r\n\r\n  w.cancelAnimationFrame = w.cancelAnimationFrame || w.clearTimeout;\r\n\r\n}(window))\r\n\r\nreturn SVG\r\n\r\n}));\r"],"sourceRoot":""}